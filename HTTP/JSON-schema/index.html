<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" /> 
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"> 
<title>WebTau: JSON Schema</title>
<link rel="stylesheet" type="text/css" href="/webtau/static/css/katex.min.css">
<link rel="stylesheet" type="text/css" href="/webtau/static/main.css">
<link rel="stylesheet" type="text/css" href="/webtau/logo.css">
<link rel="stylesheet" type="text/css" href="/webtau/static/css/global-overrides.css">
</head>
<link rel="shortcut icon" href="/webtau/favicon.png"type="image/ico"/>
<body class="theme-znai-dark">
<script>(function() {
    var themeNameKey = 'znaiTheme';
    var darkThemeName = 'znai-dark';
    var lightThemeName = 'default';

    var znaiTheme = {
        changeHandlers: [],
        addChangeHandler(handler) {
            this.changeHandlers.push(handler);
        },
        removeChangeHandler(handler) {
            var idx = this.changeHandlers.indexOf(handler);
            this.changeHandlers.splice(idx, 1);
        },
        set(name) {
            this.name = name;
            document.body.className = 'theme-' + name;

            var idx = 0;
            var len = this.changeHandlers.length;
            for (; idx < len; idx++) {
                this.changeHandlers[idx](name);
            }
        },
        setExplicitly(name) {
            storeThemeName(name);
            this.set(name);
        },
        setExplicitlyIfNotSetAlready(name) {
            const themeName = getStoredThemeName();
            if (themeName) {
                return
            }

            this.setExplicitly(name)
        },
        toggle() {
            this.setExplicitly(this.name === lightThemeName ? darkThemeName : lightThemeName)
        }
    };

    var mediaThemeName = setLightMatchMediaListenerAndGetThemeName()
    var themeName = getStoredThemeName() || mediaThemeName;
    znaiTheme.set(themeName);

    window.znaiTheme = znaiTheme;

    function getStoredThemeName() {
        return localStorage.getItem(themeNameKey);
    }

    function storeThemeName(name) {
        return localStorage.setItem(themeNameKey, name);
    }

    function setLightMatchMediaListenerAndGetThemeName() {
        if (!window.matchMedia) {
            return darkThemeName;
        }

        var lightQuery = window.matchMedia('(prefers-color-scheme: light)');
        lightQuery.addListener(function (e) {
            const newThemeName = e.matches ? lightThemeName : darkThemeName;
            znaiTheme.setExplicitly(newThemeName);
        });

        return lightQuery.matches ? lightThemeName : darkThemeName;
    }
})()</script>
<div id="znai"><div id="znai-initial-page-loading" style="margin: -20px 0 0 -20px; padding: 0 40px 40px 0; width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center">
    <div></div>
</div><section style="max-width: 640px; margin-left: auto; margin-right: auto;">
<article>
<header><h1>Validation</h1></header>
<p>Webtau supports validation of objects against https://json-schema.org/ JSON Schema. It is possible to validate either the entire body or just a specific field with the complyWithSchema matcher as shown in the two examples below: http.get(&quot;/weather&quot;) { body.should complyWithSchema('valid-schema.json') } http.get(&quot;/city/London&quot;) { weather.should complyWithSchema('valid-schema.json') } Both examples above validate against the following schema:</p>
</article>

<article>
<header><h1>Error messages</h1></header>
<p>Using the first example above, an invalid schema will generate an error similar to: invalid schema (examples/scenarios/rest/jsonSchema/validateSchema.groovy) &gt; executing HTTP GET http://localhost:8080/weather X failed expecting body to comply with schema invalid-schema.json : body expected to comply with schema invalid-schema.json [#: required key [anotherField] not found, #/temperature: expected type: Boolean, found: Integer] { &quot;temperature&quot;: 88 } The schema used in validation to generate this error is as follows:</p>
</article>

<article>
<header><h1>Configuration</h1></header>
<p>The path to the schema file specified in complyWithSchema can be relative or absolute. If it's relative, it'll be relative to the jsonSchemasDir specified in configuration and if not specified then relative to working directory. For example: url = &quot;http://localhost:8180&quot; jsonSchemasDir = 'schemas'</p>
</article>
</section>
</div>
<script type="text/javascript" src="/webtau/footer.js"></script>
<script type="text/javascript" src="/webtau/toc.js"></script>
<script type="text/javascript" src="/webtau/global-anchors.js"></script>
<script type="text/javascript" src="/webtau/documentation-references.js"></script>
<script type="text/javascript" src="/webtau/assets.js"></script>
<script type="text/javascript" src="/webtau/static/main.js"></script>
<script type="text/javascript" src="/webtau/search-index.js"></script>
<script>
document.getElementById('znai').innerHTML = '';
/*<!--*/
ReactDOM.render(React.createElement(Documentation, {
  "docMeta" : {
    "viewOn" : {
      "link" : "https://github.com/testingisdocumenting/webtau/tree/master/webtau-docs/znai",
      "title" : "View On GitHub"
    },
    "id" : "webtau",
    "title" : "WebTau",
    "type" : "Guide",
    "previewEnabled" : false,
    "allowedGroups" : [ "admin" ]
  },
  "page" : {
    "type" : "Page",
    "content" : [ {
      "id" : "validation",
      "type" : "Section",
      "title" : "Validation",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Webtau supports validation of objects against ",
          "type" : "SimpleText"
        }, {
          "isFile" : false,
          "type" : "Link",
          "content" : [ {
            "text" : "JSON Schema",
            "type" : "SimpleText"
          } ],
          "url" : "https://json-schema.org/"
        }, {
          "text" : ".  It is possible to validate either",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "the entire body or just a specific field with the ",
          "type" : "SimpleText"
        }, {
          "code" : "complyWithSchema",
          "type" : "InlinedCode"
        }, {
          "text" : " matcher as shown in the two examples below:",
          "type" : "SimpleText"
        } ]
      }, {
        "snippet" : "http.get(\"/weather\") {\n    body.should complyWithSchema('valid-schema.json')\n}",
        "type" : "Snippet",
        "title" : "Validate entire body against JSON schema",
        "lang" : "groovy"
      }, {
        "snippet" : "http.get(\"/city/London\") {\n    weather.should complyWithSchema('valid-schema.json')\n}",
        "type" : "Snippet",
        "title" : "Validate specific field against JSON schema",
        "lang" : "groovy"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Both examples above validate against the following schema:",
          "type" : "SimpleText"
        } ]
      }, {
        "data" : {
          "type" : "object",
          "properties" : {
            "temperature" : {
              "type" : "integer"
            }
          },
          "required" : [ "temperature" ]
        },
        "paths" : [ ],
        "type" : "Json",
        "title" : "Correct schema for the example above"
      } ]
    }, {
      "id" : "error-messages",
      "type" : "Section",
      "title" : "Error messages",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Using the first example above, an invalid schema will generate an error similar to:",
          "type" : "SimpleText"
        } ]
      }, {
        "snippet" : "invalid schema (examples/scenarios/rest/jsonSchema/validateSchema.groovy)\n> executing HTTP GET http://localhost:8080/weather\n  X failed expecting body to comply with schema invalid-schema.json : \n      body expected to comply with schema invalid-schema.json\n      [#: required key [anotherField] not found, #/temperature: expected type: Boolean, found: Integer]\n{\n  \"temperature\": 88\n}\n",
        "type" : "Snippet",
        "lineNumber" : "",
        "lang" : ""
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "The schema used in validation to generate this error is as follows:",
          "type" : "SimpleText"
        } ]
      }, {
        "data" : {
          "type" : "object",
          "properties" : {
            "anotherField" : {
              "type" : "string"
            },
            "temperature" : {
              "type" : "boolean"
            }
          },
          "required" : [ "temperature", "anotherField" ]
        },
        "paths" : [ ],
        "type" : "Json",
        "title" : "Incorrect schema for the example above"
      } ]
    }, {
      "id" : "configuration",
      "type" : "Section",
      "title" : "Configuration",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "The path to the schema file specified in ",
          "type" : "SimpleText"
        }, {
          "code" : "complyWithSchema",
          "type" : "InlinedCode"
        }, {
          "text" : " can be relative or absolute.  If it's relative, it'll be",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "relative to the ",
          "type" : "SimpleText"
        }, {
          "code" : "jsonSchemasDir",
          "type" : "InlinedCode"
        }, {
          "text" : " specified in configuration and if not specified then relative to working directory.",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "For example:",
          "type" : "SimpleText"
        } ]
      }, {
        "snippet" : "url = \"http://localhost:8180\"\njsonSchemasDir = 'schemas'",
        "excludeRegexp" : "package",
        "type" : "Snippet",
        "title" : "Configuration",
        "lang" : "groovy"
      } ]
    } ],
    "lastModifiedTime" : 1641786403222,
    "tocItem" : {
      "sectionTitle" : "HTTP",
      "pageTitle" : "JSON Schema",
      "pageMeta" : { },
      "dirName" : "HTTP",
      "fileName" : "JSON-schema",
      "viewOnRelativePath" : null,
      "pageSectionIdTitles" : [ {
        "title" : "Validation",
        "id" : "validation"
      }, {
        "title" : "Error messages",
        "id" : "error-messages"
      }, {
        "title" : "Configuration",
        "id" : "configuration"
      } ]
    }
  }
}), document.getElementById("znai"));
/*-->*/

</script>

</body>
</html>
