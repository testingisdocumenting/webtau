<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" /> 
<title>WebTau: Headers</title><link rel="stylesheet" type="text/css" href="/guide/static/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/guide/static/css/katex.min.css">
<link rel="stylesheet" type="text/css" href="/guide/static/main.css">
<link rel="stylesheet" type="text/css" href="/guide/logo.css">
</head>
<link rel="shortcut icon" href="/guide/favicon.png"type="image/ico"/>
<body>
<div id="mdoc"><!--
  ~ Copyright 2019 TWO SIGMA OPEN SOURCE, LLC
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div id="znai-initial-page-loading" style="margin: -20px 0 0 -20px; padding: 0 40px 40px 0; width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center">
    <div></div>
</div><section style="max-width: 640px; margin-left: auto; margin-right: auto;">
<article>
<header><h1>Standard Header</h1></header>
<p>Standard headers like Content-Type and Accept are set on your behalf. When payload content is present then values are based on the content type you are sending. When no payload is present, it defaults to application/json .</p>
</article>

<article>
<header><h1>Common Header</h1></header>
<p>If each http request requires the same header you can specify that header using httpHeaderProvider . Common example is specifying authentication header. import scenarios.rest.headers.auth.Auth url = &quot;http://localhost:8080&quot; httpHeaderProvider = Auth.&amp;authHeader Where Auth.&amp;authHeader is implemented as follows: package scenarios.rest.headers.auth import com.twosigma.webtau.console.ConsoleOutputs import com.twosigma.webtau.http.HttpHeader class Auth { static HttpHeader authHeader(String fullUrl, String url, HttpHeader original) { ConsoleOutputs.out('auth header injection point') return original.merge([Authorization: 'Bearer &lt;token&gt;']) } } This removes implementation details from your tests and makes them less brittle.</p>
</article>

<article>
<header><h1>Explicit Header</h1></header>
<p>To explicitly set header pass http.header(values) as an additional parameter.Additionally http.header accepts values as a map.</p>
</article>

<article>
<header><h1>Mime Type Combined With Payload</h1></header>
<p>Use http.body to combine Content-Type and payload.If you need a standard type consider using</p>
</article>

<article>
<header><h1>Response Header</h1></header>
<p>To validate values from response header use header object.At the moment only location , contentLocation , contentLength have camelCase shortcuts. All the other header values you need to use ['Header-Name'] syntax.</p>
</article>
</section>
</div>
<script type="text/javascript" src="/guide/toc.js"></script>
<script type="text/javascript" src="/guide/assets.js"></script>
<script type="text/javascript" src="/guide/static/react.min.js"></script>
<script type="text/javascript" src="/guide/static/react-dom.min.js"></script>
<script type="text/javascript" src="/guide/static/main.js"></script>
<script type="text/javascript" src="/guide/search-index.js"></script>
<script>
document.getElementById('mdoc').innerHTML = '';
ReactDOM.render(React.createElement(Documentation, {
  "docMeta" : {
    "viewOn" : {
      "link" : "https://github.com/twosigma/webtau/tree/master/webtau-docs/webtau",
      "title" : "View On GitHub"
    },
    "id" : "guide",
    "title" : "WebTau",
    "type" : "Guide",
    "previewEnabled" : false
  },
  "page" : {
    "type" : "Page",
    "content" : [ {
      "title" : "Standard Header",
      "id" : "standard-header",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Standard headers like ",
          "type" : "SimpleText"
        }, {
          "code" : "Content-Type",
          "type" : "InlinedCode"
        }, {
          "text" : " and ",
          "type" : "SimpleText"
        }, {
          "code" : "Accept",
          "type" : "InlinedCode"
        }, {
          "text" : " are set on your behalf.",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "When payload content is present then values are based on the content type you are sending.",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "When no payload is present, it defaults to ",
          "type" : "SimpleText"
        }, {
          "code" : "application/json",
          "type" : "InlinedCode"
        }, {
          "text" : ".",
          "type" : "SimpleText"
        } ]
      } ]
    }, {
      "title" : "Common Header",
      "id" : "common-header",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "If each http request requires the same header you can specify that header using ",
          "type" : "SimpleText"
        }, {
          "code" : "httpHeaderProvider",
          "type" : "InlinedCode"
        }, {
          "text" : ".",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "Common example is specifying authentication header.",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "cfg",
        "snippet" : "import scenarios.rest.headers.auth.Auth\n\nurl = \"http://localhost:8080\"\n\nhttpHeaderProvider = Auth.&authHeader",
        "title" : "webtau.cfg",
        "type" : "Snippet"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Where ",
          "type" : "SimpleText"
        }, {
          "code" : "Auth.&authHeader",
          "type" : "InlinedCode"
        }, {
          "text" : " is implemented as follows:",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "package scenarios.rest.headers.auth\n\nimport com.twosigma.webtau.console.ConsoleOutputs\nimport com.twosigma.webtau.http.HttpHeader\n\nclass Auth {\n    static HttpHeader authHeader(String fullUrl, String url, HttpHeader original) {\n        ConsoleOutputs.out('auth header injection point')\n        return original.merge([Authorization: 'Bearer <token>'])\n    }\n}",
        "title" : "scenarios/rest/headers/auth/Auth.groovy",
        "type" : "Snippet"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "This removes implementation details from your tests and makes them less brittle.",
          "type" : "SimpleText"
        } ]
      } ]
    }, {
      "title" : "Explicit Header",
      "id" : "explicit-header",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "To explicitly set header pass ",
          "type" : "SimpleText"
        }, {
          "code" : "http.header(values)",
          "type" : "InlinedCode"
        }, {
          "text" : " as an additional parameter.",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "http.get(\"/end-point\", http.header('Accept', 'application/octet-stream')) {\n    // assertions go here\n}\n\nhttp.get(\"/end-point\", [queryParam1: 'queryParamValue1'],\n        http.header('Accept', 'application/octet-stream')) {\n    // assertions go here\n}\n\nhttp.post(\"/end-point\", http.header('Accept', 'application/octet-stream'),\n        [fileId: 'myFile']) {\n    // assertions go here\n}\n\nhttp.put(\"/end-point\", http.header('Accept', 'application/octet-stream'),\n        [fileId: 'myFile', file: sampleFile]) {\n    // assertions go here\n}\n\nhttp.delete(\"/end-point\", http.header('Custom-Header', 'special-value'))",
        "entry" : "explicit header passing example",
        "bodyOnly" : true,
        "type" : "Snippet"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Additionally ",
          "type" : "SimpleText"
        }, {
          "code" : "http.header",
          "type" : "InlinedCode"
        }, {
          "text" : " accepts values as a map.",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "def varArgHeader = http.header(\n        'My-Header1', 'Value1',\n        'My-Header2', 'Value2')\n\ndef mapBasedHeader = http.header([\n        'My-Header1': 'Value1',\n        'My-Header2': 'Value2'])\n\nassert varArgHeader == mapBasedHeader",
        "entry" : "header creation",
        "bodyOnly" : true,
        "type" : "Snippet"
      } ]
    }, {
      "title" : "Mime Type Combined With Payload",
      "id" : "mime-type-combined-with-payload",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Use ",
          "type" : "SimpleText"
        }, {
          "code" : "http.body",
          "type" : "InlinedCode"
        }, {
          "text" : " to combine ",
          "type" : "SimpleText"
        }, {
          "code" : "Content-Type",
          "type" : "InlinedCode"
        }, {
          "text" : " and payload.",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "def content = binaryFile('path')\nhttp.post(\"/end-point\", http.body(\"application/octet-stream\", content)) {\n    // assertions go here\n}",
        "title" : "Combined type and payload",
        "entry" : "explicit binary mime types combined with request body",
        "bodyOnly" : true,
        "type" : "Snippet"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "If you need a standard type consider using",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "def content = binaryFile('path')\nhttp.post(\"/end-point\", http.application.octetStream(content)) {\n    // assertions go here\n}",
        "title" : "Binary content shortuct",
        "entry" : "post implicit binary mime types combined with request body",
        "bodyOnly" : true,
        "type" : "Snippet"
      }, {
        "lang" : "groovy",
        "snippet" : "def content = 'text content'\nhttp.post(\"/end-point\", http.text.plain(content)) {\n    // assertions go here\n}",
        "title" : "Text content shortcut",
        "entry" : "implicit text mime types combined with request body",
        "bodyOnly" : true,
        "type" : "Snippet"
      } ]
    }, {
      "title" : "Response Header",
      "id" : "response-header",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "To validate values from response header use ",
          "type" : "SimpleText"
        }, {
          "code" : "header",
          "type" : "InlinedCode"
        }, {
          "text" : " object.",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "http.post(\"/end-point\") {\n    header.location.should == 'http://www.example.org/url/23'\n    header['Location'].should == 'http://www.example.org/url/23'\n\n    header.contentLocation.should == '/url/23'\n    header['Content-Location'].should == '/url/23'\n\n    header.contentLength.shouldBe > 300\n    header['Content-Length'].shouldBe > 300\n}",
        "entry" : "header assertion with shortcut",
        "bodyOnly" : true,
        "type" : "Snippet"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "At the moment only ",
          "type" : "SimpleText"
        }, {
          "code" : "location",
          "type" : "InlinedCode"
        }, {
          "text" : ", ",
          "type" : "SimpleText"
        }, {
          "code" : "contentLocation",
          "type" : "InlinedCode"
        }, {
          "text" : ", ",
          "type" : "SimpleText"
        }, {
          "code" : "contentLength",
          "type" : "InlinedCode"
        }, {
          "text" : " have camelCase shortcuts.",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "All the other header values you need to use ",
          "type" : "SimpleText"
        }, {
          "code" : "['Header-Name']",
          "type" : "InlinedCode"
        }, {
          "text" : " syntax.",
          "type" : "SimpleText"
        } ]
      } ]
    } ],
    "lastModifiedTime" : 1542647883000,
    "tocItem" : {
      "sectionTitle" : "REST",
      "pageTitle" : "Headers",
      "pageMeta" : { },
      "fileName" : "headers",
      "dirName" : "REST",
      "pageSectionIdTitles" : [ {
        "title" : "Standard Header",
        "id" : "standard-header"
      }, {
        "title" : "Common Header",
        "id" : "common-header"
      }, {
        "title" : "Explicit Header",
        "id" : "explicit-header"
      }, {
        "title" : "Mime Type Combined With Payload",
        "id" : "mime-type-combined-with-payload"
      }, {
        "title" : "Response Header",
        "id" : "response-header"
      } ]
    }
  },
  "footer" : { }
}), document.getElementById("mdoc"));
</script>

</body>
</html>
