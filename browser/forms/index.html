<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" /> 
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"> 
<title>WebTau: Forms</title>
<link rel="stylesheet" type="text/css" href="/webtau/static/css/katex.min.css">
<link rel="stylesheet" type="text/css" href="/webtau/static/main.css">
<link rel="stylesheet" type="text/css" href="/webtau/logo.css">
<link rel="stylesheet" type="text/css" href="/webtau/static/css/global-overrides.css">
</head>
<link rel="shortcut icon" href="/webtau/favicon.png"type="image/ico"/>
<body class="theme-znai-dark">
<script>(function() {
    var themeNameKey = 'znaiTheme';
    var darkThemeName = 'znai-dark';
    var lightThemeName = 'default';

    var znaiTheme = {
        changeHandlers: [],
        addChangeHandler(handler) {
            this.changeHandlers.push(handler);
        },
        removeChangeHandler(handler) {
            var idx = this.changeHandlers.indexOf(handler);
            this.changeHandlers.splice(idx, 1);
        },
        set(name) {
            this.name = name;
            document.body.className = 'theme-' + name;

            var idx = 0;
            var len = this.changeHandlers.length;
            for (; idx < len; idx++) {
                this.changeHandlers[idx](name);
            }
        },
        setExplicitly(name) {
            storeThemeName(name);
            this.set(name);
        },
        setExplicitlyIfNotSetAlready(name) {
            const themeName = getStoredThemeName();
            if (themeName) {
                return
            }

            this.setExplicitly(name)
        },
        toggle() {
            this.setExplicitly(this.name === lightThemeName ? darkThemeName : lightThemeName)
        }
    };

    var mediaThemeName = setLightMatchMediaListenerAndGetThemeName()
    var themeName = getStoredThemeName() || mediaThemeName;
    znaiTheme.set(themeName);

    window.znaiTheme = znaiTheme;

    function getStoredThemeName() {
        return localStorage.getItem(themeNameKey);
    }

    function storeThemeName(name) {
        return localStorage.setItem(themeNameKey, name);
    }

    function setLightMatchMediaListenerAndGetThemeName() {
        if (!window.matchMedia) {
            return darkThemeName;
        }

        var lightQuery = window.matchMedia('(prefers-color-scheme: light)');
        lightQuery.addListener(function (e) {
            const newThemeName = e.matches ? lightThemeName : darkThemeName;
            znaiTheme.setExplicitly(newThemeName);
        });

        return lightQuery.matches ? lightThemeName : darkThemeName;
    }
})()</script>
<div id="znai"><div id="znai-initial-page-loading" style="margin: -20px 0 0 -20px; padding: 0 40px 40px 0; width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center">
    <div></div>
</div><section style="max-width: 640px; margin-left: auto; margin-right: auto;">
<article>
<header><h1>Universal Set Value</h1></header>
<p>Use setValue on a declared page element to set its value. It will work on all the standard input types out of the box.Define all the input fields inside a page object. In combination with universal setValue it will make your tests robust.Given a html snippet &lt;html&gt; &lt;body&gt; &lt;div id=&quot;form&quot;&gt; &lt;input id=&quot;name&quot; /&gt; &lt;input id=&quot;startDate&quot; type=&quot;date&quot; /&gt; &lt;input id=&quot;confirmation&quot; type=&quot;checkbox&quot; /&gt; &lt;div id=&quot;choice-group&quot; class=&quot;radio-group&quot;&gt; &lt;div&gt; &lt;input type=&quot;radio&quot; id=&quot;one&quot; name=&quot;choice&quot; value=&quot;value-one&quot;/&gt; &lt;label for=&quot;one&quot;&gt;one&lt;/label&gt; &lt;/div&gt; &lt;div&gt; &lt;input type=&quot;radio&quot; id=&quot;two&quot; name=&quot;choice&quot; value=&quot;value-two&quot;/&gt; &lt;label for=&quot;two&quot;&gt;two&lt;/label&gt; &lt;/div&gt; &lt;div&gt; &lt;input type=&quot;radio&quot; id=&quot;three&quot; name=&quot;choice&quot; value=&quot;value-three&quot;/&gt; &lt;label for=&quot;three&quot;&gt;three&lt;/label&gt; &lt;/div&gt; &lt;/div&gt; &lt;select id=&quot;rank&quot;&gt; &lt;option /&gt; &lt;option value=&quot;A&quot;&gt;Full A&lt;/option&gt; &lt;option value=&quot;B&quot;&gt;Full B&lt;/option&gt; &lt;option value=&quot;C&quot;&gt;Full C&lt;/option&gt; &lt;option value=&quot;D&quot;&gt;Full D&lt;/option&gt; &lt;option value=&quot;E&quot;&gt;Full E&lt;/option&gt; &lt;/select&gt; &lt;/div&gt; &lt;/body&gt; &lt;/html&gt; Page object can be defined as package pages import static org.testingisdocumenting.webtau.WebTauDsl.* class FormPage { def name = $('#name') def rank = $('#rank') def confirmation = $('#confirmation') def choice = $('[name=&quot;choice&quot;]') def startDate = $('#startDate') }</p>
</article>

<article>
<header><h1>Default Input</h1></header>
<p>form.name.setValue('Full Automation')</p>
</article>

<article>
<header><h1>Date Input</h1></header>
<p>form.startDate.setValue('2016-06-21')</p>
</article>

<article>
<header><h1>Select</h1></header>
<p>form.rank.setValue('B') form.rank.setValue('Full B')</p>
</article>

<article>
<header><h1>CheckBox</h1></header>
<p>form.confirmation.setValue(true)</p>
</article>

<article>
<header><h1>Radio Button</h1></header>
<p>form.choice.setValue('value-two')</p>
</article>

<article>
<header><h1>Universal Assert</h1></header>
<p>Form element value can be asserted the same way as any regular element. Underlying value will be extracted based on the element type form.name.should == 'Full Automation' form.rank.should == 'Full B' form.confirmation.should == true form.choice.should == 'value-two' form.startDate.should == '2016-06-21'</p>
</article>

<article>
<header><h1>Custom Form Elements</h1></header>
<p>One of the benefits of universal set and assert is that your test is focused on the data and not implementation details. But what if you decided to use a custom component to enter the data?To hide implementation details from your test you should define a custom input handler for your UI component.Let's consider a form component that you can start interacting with only after you clicked it. And after the value is entered, the input box disappears again. &lt;div id=&quot;answer&quot; class=&quot;special-selector&quot; onclick=&quot;activate('answer')&quot;&gt; &lt;div class=&quot;current-value&quot;&gt; current value &lt;/div&gt; &lt;input class=&quot;value-input&quot; value=&quot;&quot; onblur=&quot;valueEntered('answer')&quot;&gt; &lt;/div&gt; Our test should still be written in terms of data entering and validation. def customFormElement = $('#answer') customFormElement.setValue('hello') customFormElement.should == 'hello' In order to achieve this we need to register a custom handler. package scenarios.ui import static org.testingisdocumenting.webtau.WebTauGroovyDsl.* scenario('open forms') { browser.open('/special-forms') } scenario('get set custom based on registered handler') { def customFormElement = $('#answer') customFormElement.setValue('hello') customFormElement.should == 'hello' } package formHandlers import org.openqa.selenium.Keys import org.testingisdocumenting.webtau.browser.page.HtmlNode import org.testingisdocumenting.webtau.browser.page.HtmlNodeAndWebElementList import org.testingisdocumenting.webtau.browser.page.PageElement import org.testingisdocumenting.webtau.browser.page.PageElementStepExecutor import org.testingisdocumenting.webtau.browser.handlers.PageElementGetSetValueHandler import org.testingisdocumenting.webtau.reporter.TokenizedMessage class CustomInput implements PageElementGetSetValueHandler { @Override boolean handles(HtmlNodeAndWebElementList htmlNodeAndWebElements, PageElement pageElement) { def htmlNode = htmlNodeAndWebElements.firstHtmlNode() return htmlNode.attributes.class =~ /special-selector/ } @Override void setValue(PageElementStepExecutor stepExecutor, TokenizedMessage pathDescription, HtmlNodeAndWebElementList htmlNodeAndWebElements, PageElement pageElement, Object value, boolean noLog) { pageElement.click() pageElement.find('input').sendKeys(&quot;${value}&quot; + Keys.TAB) } @Override Object getValue(HtmlNodeAndWebElementList htmlNodeAndWebElements, PageElement pageElement, int idx) { return pageElement.find('.current-value').getUnderlyingValue() } }</p>
</article>
</section>
</div>
<script type="text/javascript" src="/webtau/footer.js"></script>
<script type="text/javascript" src="/webtau/toc.js"></script>
<script type="text/javascript" src="/webtau/documentation-references.js"></script>
<script type="text/javascript" src="/webtau/assets.js"></script>
<script type="text/javascript" src="/webtau/static/main.js"></script>
<script type="text/javascript" src="/webtau/search-index.js"></script>
<script>
document.getElementById('znai').innerHTML = '';
/*<!--*/
ReactDOM.render(React.createElement(Documentation, {
  "docMeta" : {
    "viewOn" : {
      "link" : "https://github.com/testingisdocumenting/webtau/tree/master/webtau-docs/znai",
      "title" : "View Markdown"
    },
    "id" : "webtau",
    "title" : "WebTau",
    "type" : "Guide",
    "previewEnabled" : false,
    "support" : {
      "link" : "https://github.com/testingisdocumenting/webtau/discussions",
      "title" : "GitHub"
    }
  },
  "page" : {
    "type" : "Page",
    "content" : [ {
      "id" : "universal-set-value",
      "title" : "Universal Set Value",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Use ",
          "type" : "SimpleText"
        }, {
          "code" : "setValue",
          "type" : "InlinedCode"
        }, {
          "text" : " on a declared page element to set its value.",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "It will work on all the standard input types out of the box.",
          "type" : "SimpleText"
        } ]
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Define all the input fields inside a page object. In combination with universal ",
          "type" : "SimpleText"
        }, {
          "code" : "setValue",
          "type" : "InlinedCode"
        }, {
          "text" : " it will make your tests robust.",
          "type" : "SimpleText"
        } ]
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Given a html snippet",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "html",
        "snippet" : "<html>\n<body>\n<div id=\"form\">\n  <input id=\"name\" />\n  <input id=\"startDate\" type=\"date\" />\n  <input id=\"confirmation\" type=\"checkbox\" />\n  <div id=\"choice-group\" class=\"radio-group\">\n    <div>\n      <input type=\"radio\" id=\"one\" name=\"choice\" value=\"value-one\"/>\n      <label for=\"one\">one</label>\n    </div>\n    <div>\n      <input type=\"radio\" id=\"two\" name=\"choice\" value=\"value-two\"/>\n      <label for=\"two\">two</label>\n    </div>\n    <div>\n      <input type=\"radio\" id=\"three\" name=\"choice\" value=\"value-three\"/>\n      <label for=\"three\">three</label>\n    </div>\n  </div>\n  <select id=\"rank\">\n    <option />\n    <option value=\"A\">Full A</option>\n    <option value=\"B\">Full B</option>\n    <option value=\"C\">Full C</option>\n    <option value=\"D\">Full D</option>\n    <option value=\"E\">Full E</option>\n  </select>\n</div>\n</body>\n</html>",
        "title" : "HTML form",
        "anchorId" : "universal-set-value-html-form",
        "type" : "Snippet"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Page object can be defined as",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "package pages\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*\n\nclass FormPage {\n    def name = $('#name')\n    def rank = $('#rank')\n    def confirmation = $('#confirmation')\n    def choice = $('[name=\"choice\"]')\n    def startDate = $('#startDate')\n}",
        "title" : "Form page object",
        "anchorId" : "universal-set-value-form-page-object",
        "type" : "Snippet"
      } ]
    }, {
      "id" : "default-input",
      "title" : "Default Input",
      "type" : "Section",
      "content" : [ {
        "lang" : "groovy",
        "snippet" : "form.name.setValue('Full Automation')",
        "title" : "set value to input",
        "anchorId" : "default-input-set-value-to-input",
        "type" : "Snippet"
      } ]
    }, {
      "id" : "date-input",
      "title" : "Date Input",
      "type" : "Section",
      "content" : [ {
        "lang" : "groovy",
        "snippet" : "form.startDate.setValue('2016-06-21')",
        "title" : "set value to date input",
        "anchorId" : "date-input-set-value-to-date-input",
        "type" : "Snippet"
      } ]
    }, {
      "id" : "select",
      "title" : "Select",
      "type" : "Section",
      "content" : [ {
        "lang" : "groovy",
        "snippet" : "form.rank.setValue('B')",
        "title" : "set value to select by value",
        "anchorId" : "select-set-value-to-select-by-value",
        "type" : "Snippet"
      }, {
        "lang" : "groovy",
        "snippet" : "form.rank.setValue('Full B')",
        "title" : "set value to select by visible text",
        "anchorId" : "select-set-value-to-select-by-visible-text",
        "type" : "Snippet"
      } ]
    }, {
      "id" : "checkbox",
      "title" : "CheckBox",
      "type" : "Section",
      "content" : [ {
        "lang" : "groovy",
        "snippet" : "form.confirmation.setValue(true)",
        "title" : "set value to checkbox",
        "anchorId" : "checkbox-set-value-to-checkbox",
        "type" : "Snippet"
      } ]
    }, {
      "id" : "radio-button",
      "title" : "Radio Button",
      "type" : "Section",
      "content" : [ {
        "lang" : "groovy",
        "snippet" : "form.choice.setValue('value-two')",
        "title" : "set value to radio button",
        "anchorId" : "radio-button-set-value-to-radio-button",
        "type" : "Snippet"
      } ]
    }, {
      "id" : "universal-assert",
      "title" : "Universal Assert",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Form element value can be asserted the same way as any regular element.",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "Underlying value will be extracted based on the element type",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "form.name.should == 'Full Automation'\nform.rank.should == 'Full B'\nform.confirmation.should == true\nform.choice.should == 'value-two'\nform.startDate.should == '2016-06-21'",
        "title" : "universal assert",
        "anchorId" : "universal-assert-universal-assert",
        "type" : "Snippet"
      } ]
    }, {
      "id" : "custom-form-elements",
      "title" : "Custom Form Elements",
      "type" : "Section",
      "content" : [ {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "One of the benefits of universal ",
          "type" : "SimpleText"
        }, {
          "code" : "set",
          "type" : "InlinedCode"
        }, {
          "text" : " and ",
          "type" : "SimpleText"
        }, {
          "code" : "assert",
          "type" : "InlinedCode"
        }, {
          "text" : " is that your test is focused on the data and not implementation details.",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "But what if you decided to use a custom component to enter the data?",
          "type" : "SimpleText"
        } ]
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "To hide implementation details from your test you should define a custom input handler for your UI component.",
          "type" : "SimpleText"
        } ]
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Let's consider a form component that you can start interacting with only after you clicked it. And after the value",
          "type" : "SimpleText"
        }, {
          "type" : "SoftLineBreak"
        }, {
          "text" : "is entered, the input box disappears again.",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "html",
        "snippet" : "<div id=\"answer\" class=\"special-selector\" onclick=\"activate('answer')\"> \n <div class=\"current-value\">\n   current value \n </div> \n <input class=\"value-input\" value=\"\" onblur=\"valueEntered('answer')\"> \n</div>",
        "title" : "Custom input",
        "anchorId" : "custom-form-elements-custom-input",
        "type" : "Snippet"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "Our test should still be written in terms of data entering and validation.",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "def customFormElement = $('#answer')\n\ncustomFormElement.setValue('hello')\ncustomFormElement.should == 'hello'",
        "title" : "set value to custom component",
        "anchorId" : "custom-form-elements-set-value-to-custom-component",
        "type" : "Snippet"
      }, {
        "type" : "Paragraph",
        "content" : [ {
          "text" : "In order to achieve this we need to register a custom handler.",
          "type" : "SimpleText"
        } ]
      }, {
        "lang" : "groovy",
        "snippet" : "package scenarios.ui\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario('open forms') {\n    browser.open('/special-forms')\n}\n\nscenario('get set custom based on registered handler') {\n    def customFormElement = $('#answer')\n\n    customFormElement.setValue('hello')\n    customFormElement.should == 'hello'\n}",
        "title" : "webtau.cfg.groovy",
        "anchorId" : "custom-form-elements-webtau-cfg-groovy",
        "type" : "Snippet"
      }, {
        "lang" : "groovy",
        "snippet" : "package formHandlers\n\nimport org.openqa.selenium.Keys\nimport org.testingisdocumenting.webtau.browser.page.HtmlNode\nimport org.testingisdocumenting.webtau.browser.page.HtmlNodeAndWebElementList\nimport org.testingisdocumenting.webtau.browser.page.PageElement\nimport org.testingisdocumenting.webtau.browser.page.PageElementStepExecutor\nimport org.testingisdocumenting.webtau.browser.handlers.PageElementGetSetValueHandler\nimport org.testingisdocumenting.webtau.reporter.TokenizedMessage\n\nclass CustomInput implements PageElementGetSetValueHandler {\n    @Override\n    boolean handles(HtmlNodeAndWebElementList htmlNodeAndWebElements, PageElement pageElement) {\n        def htmlNode = htmlNodeAndWebElements.firstHtmlNode()\n        return htmlNode.attributes.class =~ /special-selector/\n    }\n\n    @Override\n    void setValue(PageElementStepExecutor stepExecutor,\n                  TokenizedMessage pathDescription,\n                  HtmlNodeAndWebElementList htmlNodeAndWebElements,\n                  PageElement pageElement,\n                  Object value,\n                  boolean noLog) {\n        pageElement.click()\n        pageElement.find('input').sendKeys(\"${value}\" + Keys.TAB)\n    }\n\n    @Override\n    Object getValue(HtmlNodeAndWebElementList htmlNodeAndWebElements, PageElement pageElement, int idx) {\n        return pageElement.find('.current-value').getUnderlyingValue()\n    }\n}",
        "title" : "Custom input handler",
        "anchorId" : "custom-form-elements-custom-input-handler",
        "type" : "Snippet"
      } ]
    } ],
    "lastModifiedTime" : 1681830947306,
    "tocItem" : {
      "chapterTitle" : "Browser",
      "pageTitle" : "Forms",
      "pageMeta" : { },
      "dirName" : "browser",
      "fileName" : "forms",
      "viewOnRelativePath" : null,
      "pageSectionIdTitles" : [ {
        "title" : "Universal Set Value",
        "id" : "universal-set-value"
      }, {
        "title" : "Default Input",
        "id" : "default-input"
      }, {
        "title" : "Date Input",
        "id" : "date-input"
      }, {
        "title" : "Select",
        "id" : "select"
      }, {
        "title" : "CheckBox",
        "id" : "checkbox"
      }, {
        "title" : "Radio Button",
        "id" : "radio-button"
      }, {
        "title" : "Universal Assert",
        "id" : "universal-assert"
      }, {
        "title" : "Custom Form Elements",
        "id" : "custom-form-elements"
      } ]
    }
  }
}), document.getElementById("znai"));
/*-->*/

</script>

</body>
</html>
