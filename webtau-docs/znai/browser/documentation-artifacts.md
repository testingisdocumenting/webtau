# Scenarios

To document how to use a User Interface we often take screenshots and annotate them.
At the same time we need to make sure that documented scenario works as advertised. 

With UI testing we can validate scenarios and at the same time capture screenshots with automatically placed annotations.

# Capturing Screenshots With Annotations

To capture screenshots use `browser.doc[.withAnnotations].capture`:

:include-file: doc-artifacts/snippets/doc-capture/captureBadges.groovy {title: "screenshot capture with badge annotations"}


The result of the `capture` command is two files: actual screenshot and `search.json`.

:include-file: doc-artifacts/search.json {title: "search.json"}

[Webtau](https://testingisdocumenting.org/webtau) documentation site is generated using [Znai](https://github.com/testingisdocumenting/znai). 
It has `include-image` plugin that supports annotations format generated by `capture` command.

    :include-image: doc-artifacts/search.png {fit: true, annotationsPath: "doc-artifacts/search.json"}
    
:include-image: doc-artifacts/search.png {annotationsPath: "doc-artifacts/search.json"}

# Annotation Types

:include-file: doc-artifacts/snippets/doc-capture/captureBadges.groovy {title: "badges"}
:include-image: doc-artifacts/search.png {annotationsPath: "doc-artifacts/search.json"}

:include-file: doc-artifacts/snippets/doc-capture/captureHighlightCover.groovy {title: "cover and highlight"}
:include-image: doc-artifacts/search-highlight-cover.png {annotationsPath: "doc-artifacts/search-highlight-cover.json"}

# Annotation Placement

Use `above`, `below`, `toTheLeft` and `toTheRight` to put an annotation outside of element center.

:include-file: doc-artifacts/snippets/doc-capture/captureBadgesPlacement.groovy {title: "badge placement", endLine: "example-end", excludeStartEnd: true}

:include-image: doc-artifacts/search.png {annotationsPath: "doc-artifacts/search-diff-placement.json"}

# Screenshot Of Specific Element 

Use `:identifier: withRoot {validationPath: "doc-artifacts/snippets/doc-capture/captureFirstResult.groovy"}` 
to limit screenshot to a specific element

:include-image: doc-artifacts/search-results-area.png {annotationsPath: "doc-artifacts/search-results-area.json"}

:include-file: doc-artifacts/snippets/doc-capture/captureFirstResult.groovy {title: "specific element"}


# Inverted Colors

By default, annotation colors assume light theme of an UI you document. 
Use `invertedColors()` to change an annotation color to be dark theme compatible.

:include-image: doc-artifacts/search-inverted-colors.png {annotationsPath: "doc-artifacts/search-inverted-colors.json"}

:include-file: doc-artifacts/snippets/doc-capture/captureBadgesInvertedColors.groovy {
  title: "inverted colors",
  highlight: "invertedColors",
  endLine: "example-end", 
  excludeStartEnd: true
}

To change all annotations to be dark theme compatible by default, use webtau config file

:include-file: scenarios/ui/docCaptureInvertedColors.cfg.groovy {
  title: "webtau.cfg.groovy",
  includeRegexp: "browserAnnotations" }

In this case `invertedColors` will flip from light annotations to dark one  

:include-file: scenarios/ui/docCaptureInvertedColors.groovy {
  title: "dark theme friendly by default",
  startLine: "example-start",
  endLine: "example-end",
  excludeStartEnd: true
}
