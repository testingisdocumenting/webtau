[{"type":"Page","content":[{"url":"getting-started/what-is-this","type":"Redirect"}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"","pageTitle":"WebTau","pageMeta":{},"dirName":"","fileName":"index","viewOnRelativePath":null,"pageSectionIdTitles":[]}},{"type":"Page","content":[{"title":"Webtau","id":"webtau","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau (","type":"SimpleText"},{"type":"StrongEmphasis","content":[{"text":"Web","type":"SimpleText"}]},{"text":" ","type":"SimpleText"},{"type":"StrongEmphasis","content":[{"text":"T","type":"SimpleText"}]},{"text":"est ","type":"SimpleText"},{"type":"StrongEmphasis","content":[{"text":"au","type":"SimpleText"}]},{"text":"tomation) - concise and expressive way to write end-to-end and unit tests.","type":"SimpleText"}]},{"width":256.0,"align":"left","imageSrc":"/webtau/webtau-logo.png","timestamp":1621036321260,"shapes":[],"height":256.0,"type":"AnnotatedImage"},{"type":"Paragraph","content":[{"text":"Test your application across multiple layers:","type":"SimpleText"}]},{"bulletMarker":"*","tight":true,"type":"BulletList","content":[{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"REST API","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"GraphQL API","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"Browser","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"CLI","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"Database","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"Business Logic (JVM only)","type":"SimpleText"}]}]}]},{"type":"Paragraph","content":[{"text":"Use one layer to re-enforce tests on another. E.g. REST API layer to set up data for Browser test, or database layer","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"to validate GraphQL API.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Use powerful ","type":"SimpleText"},{"url":"/webtau/REPL/experiments","isFile":false,"type":"Link","content":[{"text":"REPL","type":"SimpleText"}]},{"text":" mode to significantly speed up end-to-end tests development.","type":"SimpleText"}]},{"title":"trying css selectors","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m $(\"p\")","\u001B[32melement is found: \u001B[35mby css \u001B[1m\u001B[35mp\u001B[0m","\u001B[33m           getText(): \u001B[32mhello web page\u001B[0m"],"type":"CliOutput"},{"type":"Paragraph","content":[{"text":"Capture test artifacts like API Responses, screenshots, command line output to automate your user facing documentation.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Leverage out of the box rich reporting","type":"SimpleText"}]},{"fit":true,"imageSrc":"/webtau/doc-artifacts/reports/report-crud-separated-http-calls.png","timestamp":1621036897332,"shapes":[{"id":"highlight1","type":"highlight","text":"","color":"a","darkFriendly":false,"x":905,"y":220,"width":24,"height":27},{"id":"highlight2","type":"highlight","text":"","color":"a","darkFriendly":false,"x":438,"y":190,"width":362,"height":16}],"width":1200.0,"height":804.0,"type":"AnnotatedImage"},{"type":"Paragraph","content":[{"text":"Tests can be written in any JVM language. Language specific syntactic sugar is available for ","type":"SimpleText"},{"code":"Groovy","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"bulletMarker":"*","tight":true,"type":"BulletList","content":[{"type":"ListItem","content":[{"type":"Paragraph","content":[{"url":"/webtau/getting-started/what-is-this#rest-api-example","isFile":false,"type":"Link","content":[{"text":"REST API example","type":"SimpleText"}]}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"url":"/webtau/getting-started/what-is-this#graphql-api-example","isFile":false,"type":"Link","content":[{"text":"GraphQL API example","type":"SimpleText"}]}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"url":"/webtau/getting-started/what-is-this#browser-example","isFile":false,"type":"Link","content":[{"text":"Browser example","type":"SimpleText"}]}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"url":"/webtau/getting-started/what-is-this#db-example","isFile":false,"type":"Link","content":[{"text":"DB example","type":"SimpleText"}]}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"url":"/webtau/getting-started/what-is-this#cli-example","isFile":false,"type":"Link","content":[{"text":"CLI example","type":"SimpleText"}]}]}]}]}]},{"title":"Rest API Example","id":"rest-api-example","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau provides a succinct DSL for exercising HTTP end points (e.g. REST APIs) and provides simplified way to","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"assert responses.","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"columns":[{"content":[{"lang":"groovy","snippet":"package scenarios.rest\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario(\"check weather\") {\n    http.get(\"/weather\") {\n        temperature.shouldBe < 100\n    }\n}","title":"REST API test (Groovy runner)","type":"Snippet"},{"lang":"groovy","snippet":"package com.example.tests.junit5\n\nimport org.junit.jupiter.api.Test\nimport org.testingisdocumenting.webtau.junit5.WebTau\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\n@WebTau\nclass WeatherGroovyTest {\n    @Test\n    void checkWeather() {\n        http.get(\"/weather\") {\n            temperature.shouldBe < 100\n        }\n    }\n}","title":"REST API test (JUnit5)","type":"Snippet"}]},{"content":[{"lang":"json","snippet":"{\n  \"temperature\": 88\n}\n","lineNumber":"","title":"Server Response","type":"Snippet"}]}],"config":{},"type":"Columns"}]},{"name":"Java","content":[{"columns":[{"content":[{"lang":"java","snippet":"package com.example.tests.junit5;\n\nimport org.junit.jupiter.api.Test;\nimport org.testingisdocumenting.webtau.junit5.WebTau;\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*;\n\n@WebTau\npublic class WeatherJavaTest {\n    @Test\n    public void checkWeather() {\n        http.get(\"/weather\", (header, body) -> {\n            body.get(\"temperature\").shouldBe(lessThan(100));\n        });\n    }\n}","title":"REST API test (JUnit5 Java)","type":"Snippet"}]},{"content":[{"lang":"json","snippet":"{\n  \"temperature\": 88\n}\n","lineNumber":"","title":"Server Response","type":"Snippet"}]}],"config":{},"type":"Columns"}]}],"type":"Tabs"}]},{"title":"GraphQL API Example","id":"graphql-api-example","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Similar to HTTP APIs, Webtau also provides the ability to test GraphQL servers with its GraphQL DSL.","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"columns":[{"content":[{"lang":"groovy","snippet":"package scenarios.rest\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario(\"check weather\") {\n    def query = \"{ weather { temperature } }\";\n    graphql.execute(query) {\n        weather.temperature.shouldBe < 100\n    }\n}","title":"GraphQL API test (Groovy runner)","type":"Snippet"},{"lang":"groovy","snippet":"package com.example.tests.junit4\n\nimport org.junit.Test\nimport org.junit.runner.RunWith\nimport org.testingisdocumenting.webtau.junit4.WebTauRunner\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.graphql\n\n@RunWith(WebTauRunner.class)\nclass GraphQLWeatherGroovyIT {\n    @Test\n    void checkWeather() {\n        def query = \"{ weather { temperature } }\";\n        graphql.execute(query) {\n            weather.temperature.shouldBe < 100\n        }\n    }\n}","title":"GraphQL API test (JUnit4)","type":"Snippet"}]},{"content":[{"lang":"json","snippet":"{\n \"data\": {\n   \"weather\": {\n     \"temperature\": 88\n   }\n }\n}\n","lineNumber":"","title":"Server Response","type":"Snippet"}]}],"config":{},"type":"Columns"}]},{"name":"Java","content":[{"columns":[{"content":[{"lang":"java","snippet":"package com.example.tests.junit4;\n\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.testingisdocumenting.webtau.junit4.WebTauRunner;\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*;\n\n@RunWith(WebTauRunner.class)\npublic class GraphQLWeatherJavaIT {\n    @Test\n    public void checkWeather() {\n        String query = \"{ weather { temperature } }\";\n        graphql.execute(query, (header, body) -> {\n            body.get(\"data.weather.temperature\").shouldBe(lessThan(100));\n        });\n    }\n}","title":"GraphQL API test (JUnit4 Java)","type":"Snippet"}]},{"content":[{"lang":"json","snippet":"{\n \"data\": {\n   \"weather\": {\n     \"temperature\": 88\n   }\n }\n}\n","lineNumber":"","title":"Server Response","type":"Snippet"}]}],"config":{},"type":"Columns"}]}],"type":"Tabs"}]},{"title":"Browser Example","id":"browser-example","type":"Section","content":[{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"package scenarios.ui\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\nimport static pages.Pages.*\n\nscenario(\"search by specific query\") {\n    search.submit(\"search this\")\n    search.numberOfResults.waitToBe > 1\n}","title":"Browser test (Groovy runner)","type":"Snippet"},{"lang":"groovy","snippet":"package pages\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*\n\nclass SearchPage {\n    def header = $(\"#header\")\n    def welcomeMessage = $(\"#welcome\")\n    def searchMessage = $(\"#message\")\n    def box = $(\"#search-box\")\n    def results = $(\"#results .result\")\n    def numberOfResults = results.count\n\n    def submit(query) {\n        browser.open(\"/search\")\n\n        box.setValue(query)\n        box.sendKeys(browser.keys.enter)\n    }\n}","title":"SearchPage.groovy","type":"Snippet"},{"lang":"groovy","snippet":"package pages\n\nclass Pages {\n    static final def search = new SearchPage()\n}","title":"Pages.groovy","excludeRegexp":["calculation","form","payments"],"type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"package com.example.tests.junit5;\n\nimport org.junit.jupiter.api.Test;\nimport org.testingisdocumenting.webtau.junit5.WebTau;\n\nimport static com.example.tests.junit5.pages.Pages.*;\nimport static org.testingisdocumenting.webtau.WebTauDsl.*;\n\n@WebTau\npublic class WebSearchJavaTest {\n    @Test\n    public void searchByQuery() {\n        search.submit(\"search this\");\n        search.numberOfResults.waitToBe(greaterThan(1));\n    }\n}","title":"Browser test (JUnit 5)","type":"Snippet"},{"lang":"java","snippet":"package com.example.tests.junit5.pages;\n\nimport org.testingisdocumenting.webtau.browser.page.PageElement;\nimport org.testingisdocumenting.webtau.browser.page.PageElementValue;\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*;\n\npublic class SearchPage {\n    private final PageElement box = $(\"#search-box\");\n    private final PageElement results = $(\"#results .result\");\n    public final PageElementValue<Integer> numberOfResults = results.getCount();\n\n    public void submit(String query) {\n        browser.open(\"/search\");\n\n        box.setValue(query);\n        box.sendKeys(browser.keys.enter);\n    }\n}","title":"SearchPage.java","type":"Snippet"},{"lang":"java","snippet":"package com.example.tests.junit5.pages;\n\npublic class Pages {\n    public static SearchPage search = new SearchPage();\n}","title":"Pages.java","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"DB Example","id":"db-example","type":"Section","content":[{"lang":"groovy","snippet":"def PRICES = db.table(\"PRICES\")\nPRICES << [     \"id\" | \"description\" |          \"available\" |                \"type\" |       \"price\" ] {\n           _____________________________________________________________________________________________\n           cell.guid | \"nice set\"    |                 true |                \"card\" |            1000 // cell.guid generates random guid that can be used for ids\n           cell.guid | \"nice set\"    |                 true |                \"card\" | cell.above + 10 // cell.above refers values above and can be modified with simple math operations\n           cell.guid | \"another set\" | permute(true, false) | permute(\"rts\", \"fps\") | cell.above + 20 } // permute generates additional rows generating new rows with all the permutations","entry":"use table data permute, above and guid to generate rows","title":"DB data setup example","bodyOnly":true,"startLine":"def PRICES","endLine":"cell.above + 20","commentsType":"inline","type":"Snippet"}]},{"title":"CLI Example","id":"cli-example","type":"Section","content":[{"lang":"groovy","snippet":"cli.run('echo hello world') {\n    output.should contain('hello')\n    output.should contain('world')\n}","title":"output validation","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Getting Started","pageTitle":"What Is This","pageMeta":{},"dirName":"getting-started","fileName":"what-is-this","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Webtau","id":"webtau"},{"title":"Rest API Example","id":"rest-api-example"},{"title":"GraphQL API Example","id":"graphql-api-example"},{"title":"Browser Example","id":"browser-example"},{"title":"DB Example","id":"db-example"},{"title":"CLI Example","id":"cli-example"}]}},{"type":"Page","content":[{"title":"Consistent API","id":"consistent-api","type":"Section","content":[{"type":"Paragraph","content":[{"text":"There are multiple tools to help you test REST API, GraphQL API, Web UI, Database and CLI.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Some of them are JUnit specific, some of them are UI driven. Some use their own matchers and some try to integrate with","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"a specific matcher interface.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Question: Why did we create another tool?","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Tests I write, and the way I write them often require interactions and assertions on multiple layers.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Combining multiple frameworks to achieve the goal ends up with a mix of styles in a single test file.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"It complicates tests creation and maintenance.","type":"SimpleText"}]}]},{"title":"Reporting","id":"reporting","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau in its core captures test actions and assertions.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Everything you do, every match that is ","type":"SimpleText"},{"type":"StrongEmphasis","content":[{"text":"passed","type":"SimpleText"}]},{"text":" or failed is being recorded.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Information is available in console output, so you don't need to sprinkle ","type":"SimpleText"},{"code":"println","type":"InlinedCode"},{"text":" statements everywhere.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"And all the captured information is available as self-contained rich HTML report.","type":"SimpleText"}]}]},{"title":"Syntax Sugar","id":"syntax-sugar","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau provides DSL to make common testing operations succinct. Syntax sugar is available for Java and Groovy and","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"since webtau core is Java, additional syntax sugar can be added to languages like Kotlin and Scala.","type":"SimpleText"}]}]},{"title":"REPL","id":"repl","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Writing end-to-end tests is hard and there are a lot of excuses not write one.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"End to end test feedback loop is usually long and slow. Webtau provides ","type":"SimpleText"},{"url":"/webtau/REPL/experiments","isFile":false,"type":"Link","content":[{"text":"REPL","type":"SimpleText"}]},{"text":" mode to help you","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"experiment with API and write a test in incremental fashion.","type":"SimpleText"}]}]},{"title":"Utilities","id":"utilities","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau provides many utility functions to simplify data organization and setup. ","type":"SimpleText"},{"url":"/webtau/utilities/data","isFile":false,"type":"Link","content":[{"text":"Data","type":"SimpleText"}]},{"text":" module provides","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"shortcuts to deal with ","type":"SimpleText"},{"code":"CSV","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"JSON","type":"InlinedCode"},{"text":" based data. ","type":"SimpleText"},{"url":"/webtau/utilities/file-system","isFile":false,"type":"Link","content":[{"text":"File System","type":"SimpleText"}]},{"text":" module provides shortcuts to","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"deal with file system related things.","type":"SimpleText"}]}]},{"title":"Documentation Artifacts","id":"documentation-artifacts","type":"Section","content":[{"type":"Paragraph","content":[{"text":"I believe that big chunks of a documentation of your product should be automatically generated:","type":"SimpleText"}]},{"bulletMarker":"*","tight":true,"type":"BulletList","content":[{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"Screenshots (with annotations)","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"API request/response examples","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"CLI params and sample output","type":"SimpleText"}]}]}]},{"type":"Paragraph","content":[{"text":"Webtau provides a set of commands to help you capture artifacts of your happy path tests to later be used","type":"SimpleText"},{"type":"HardLineBreak"},{"text":"by a documentation system.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Captured artifacts are agnostic to the documentation system. I personally use ","type":"SimpleText"},{"url":"https://github.com/testingisdocumenting/znai","isFile":false,"type":"Link","content":[{"text":"Znai","type":"SimpleText"}]},{"text":",","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"a markdown based documentation with custom extensions (I am a maintainer of the project).","type":"SimpleText"}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Getting Started","pageTitle":"Why","pageMeta":{},"dirName":"getting-started","fileName":"why","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Consistent API","id":"consistent-api"},{"title":"Reporting","id":"reporting"},{"title":"Syntax Sugar","id":"syntax-sugar"},{"title":"REPL","id":"repl"},{"title":"Utilities","id":"utilities"},{"title":"Documentation Artifacts","id":"documentation-artifacts"}]}},{"type":"Page","content":[{"title":"Runners","id":"runners","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To run webtau tests you have a few options:","type":"SimpleText"}]},{"bulletMarker":"*","tight":true,"type":"BulletList","content":[{"type":"ListItem","content":[{"type":"Paragraph","content":[{"url":"/webtau/getting-started/installation#groovy-runner","isFile":false,"type":"Link","content":[{"text":"Standalone Groovy Runner","type":"SimpleText"}]}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"url":"/webtau/getting-started/installation#junit5","isFile":false,"type":"Link","content":[{"text":"JUnit5","type":"SimpleText"}]}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"url":"/webtau/getting-started/installation#junit4","isFile":false,"type":"Link","content":[{"text":"JUnit4","type":"SimpleText"}]}]}]}]}]},{"title":"Groovy Runner","id":"groovy-runner","type":"Section","content":[{"type":"Paragraph","content":[{"text":"If you have ","type":"SimpleText"},{"url":"https://brew.sh","isFile":false,"type":"Link","content":[{"text":"brew","type":"SimpleText"}]},{"text":" installed in your system use","type":"SimpleText"}]},{"lang":"","snippet":"brew install testingisdocumenting/brew/webtau\n","lineNumber":"","type":"Snippet"},{"type":"Paragraph","content":[{"text":"If you have ","type":"SimpleText"},{"url":"https://sdkman.io","isFile":false,"type":"Link","content":[{"text":"sdkman","type":"SimpleText"}]},{"text":" installed in your system use","type":"SimpleText"}]},{"lang":"","snippet":"sdk install webtau\n","lineNumber":"","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Alternatively, download and unzip ","type":"SimpleText"},{"url":"https://repo.maven.apache.org/maven2/org/testingisdocumenting/webtau/webtau-dist/1.41/webtau-dist-1.41-webtau.zip","isFile":false,"type":"Link","content":[{"text":"webtau","type":"SimpleText"}]},{"text":".","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Add it to your ","type":"SimpleText"},{"code":"PATH","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"command":"webtau --example","paramsToHighlight":[],"type":"CliCommand"},{"type":"Paragraph","content":[{"text":"Navigate into ","type":"SimpleText"},{"code":"todo","type":"InlinedCode"},{"text":" example","type":"SimpleText"}]},{"command":"cd examples/todo","paramsToHighlight":[],"type":"CliCommand"},{"lang":"groovy","snippet":"import static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario('fetch todo item') {\n    http.get('/todos/1') {\n        title.should == 'delectus aut autem'\n        completed.should == false\n    }\n}","title":"todolist.groovy","type":"Snippet"},{"type":"Paragraph","content":[{"text":"To run test","type":"SimpleText"}]},{"command":"webtau todolist.groovy --url=https://jsonplaceholder.typicode.com","paramsToHighlight":["url"],"type":"CliCommand"},{"type":"Paragraph","content":[{"text":"Note: using ","type":"SimpleText"},{"code":"import","type":"InlinedCode"},{"text":" is optional and is mainly for IDE auto completion. Imports are added implicitly","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"during command line run.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"To integrate CLI run into maven build use:","type":"SimpleText"}]},{"lang":"xml","snippet":"<dependency>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau-groovy</artifactId>\n    <version>1.41</version>\n</dependency>","title":"Webtau Dependency","type":"Snippet"},{"lang":"xml","snippet":"<plugin>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau-maven-plugin</artifactId>\n    <version>1.41</version>\n    <executions>\n        <execution>\n            <phase>test</phase>\n            <goals>\n                <goal>run</goal>\n            </goals>\n        </execution>\n    </executions>\n    <configuration>\n        <workingDir>${project.basedir}/src/main/groovy</workingDir>\n        <env>integration</env>\n        <url>http://optional-base-url</url>\n        <tests>\n            <directory>${project.basedir}/src/main/groovy</directory>\n            <includes>\n                <include>scenarios/simple*.groovy</include>\n            </includes>\n        </tests>\n    </configuration>\n</plugin>","title":"Webtau Plugin","type":"Snippet"},{"type":"Paragraph","content":[{"url":"/webtau/groovy-standalone-runner/introduction","isFile":false,"type":"Link","content":[{"text":"Learn more about Groovy Runner features","type":"SimpleText"}]}]}]},{"title":"JUnit5","id":"junit5","type":"Section","content":[{"tabsContent":[{"name":"Groovy","content":[{"lang":"xml","snippet":"<dependency>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau-groovy</artifactId>\n    <version>1.41</version>\n</dependency>","title":"Webtau Groovy Dependency","type":"Snippet"},{"lang":"xml","snippet":"<dependency>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau-junit5</artifactId>\n    <version>1.41</version>\n</dependency>","title":"JUnit5 Dependency","type":"Snippet"},{"lang":"groovy","snippet":"package com.example.tests.junit5\n\nimport org.junit.jupiter.api.Test\nimport org.testingisdocumenting.webtau.junit5.WebTau\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.* // convenient single import for all things webtau\n\n@WebTau // annotation required for reports generation\nclass JUnit5ExampleGroovyTest {\n    @Test\n    void \"my test\"() {\n    }\n}","title":"JUnit 5 example","commentsType":"inline","type":"Snippet"}]},{"name":"Java","content":[{"lang":"xml","snippet":"<dependency>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau</artifactId>\n    <version>1.41</version>\n</dependency>","title":"Webtau Java Dependency","type":"Snippet"},{"lang":"xml","snippet":"<dependency>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau-junit5</artifactId>\n    <version>1.41</version>\n</dependency>","title":"JUnit5 Dependency","type":"Snippet"},{"lang":"java","snippet":"package com.example.tests.junit5;\n\nimport org.junit.jupiter.api.Test;\nimport org.testingisdocumenting.webtau.junit5.WebTau;\nimport static org.testingisdocumenting.webtau.WebTauDsl.*; // convenient single import for all things webtau\n\n@WebTau // annotation required for reports generation\npublic class JUnit5ExampleJavaTest {\n    @Test\n    public void myTest() {\n    }\n}","title":"JUnit 5 example","commentsType":"inline","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"JUnit4","id":"junit4","type":"Section","content":[{"tabsContent":[{"name":"Groovy","content":[{"lang":"xml","snippet":"<dependency>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau-groovy</artifactId>\n    <version>1.41</version>\n</dependency>","title":"Webtau Groovy Dependency","type":"Snippet"},{"lang":"xml","snippet":"<dependency>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau-junit4</artifactId>\n    <version>1.41</version>\n</dependency>","title":"JUnit4 Dependency","type":"Snippet"},{"lang":"groovy","snippet":"package com.example.tests.junit4\n\nimport org.junit.Test\nimport org.junit.runner.RunWith\nimport org.testingisdocumenting.webtau.junit4.WebTauRunner\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.* // convenient single import for all things webtau\n\n@RunWith(WebTauRunner.class) // webtau runner to generate reports\nclass JUnit4ExampleGroovyTest {\n    @Test\n    void \"my test\"() {\n    }\n}","title":"JUnit 4 example","commentsType":"inline","type":"Snippet"}]},{"name":"Java","content":[{"lang":"xml","snippet":"<dependency>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau</artifactId>\n    <version>1.41</version>\n</dependency>","title":"Webtau Java Dependency","type":"Snippet"},{"lang":"xml","snippet":"<dependency>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau-junit4</artifactId>\n    <version>1.41</version>\n</dependency>","title":"JUnit4 Dependency","type":"Snippet"},{"lang":"java","snippet":"package com.example.tests.junit4;\n\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.testingisdocumenting.webtau.junit4.WebTauRunner;\nimport static org.testingisdocumenting.webtau.WebTauDsl.*; // convenient single import for all things webtau\n\n@RunWith(WebTauRunner.class) // webtau runner to generate reports\npublic class JUnit4ExampleJavaTest {\n    @Test\n    public void myTest() {\n    }\n}","title":"JUnit 4 example","commentsType":"inline","type":"Snippet"}]}],"type":"Tabs"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Getting Started","pageTitle":"Installation","pageMeta":{},"dirName":"getting-started","fileName":"installation","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Runners","id":"runners"},{"title":"Groovy Runner","id":"groovy-runner"},{"title":"JUnit5","id":"junit5"},{"title":"JUnit4","id":"junit4"}]}},{"type":"Page","content":[{"title":"Config File","id":"config-file","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau let you specify services url, browser settings, DB url connections, etc in a config file.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Depending on ","type":"SimpleText"},{"url":"/webtau/getting-started/installation","isFile":false,"type":"Link","content":[{"text":"runner","type":"SimpleText"}]},{"text":" you use webtau will read data from a different place.","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"type":"Paragraph","content":[{"text":"When you use the Groovy runner, it will look for ","type":"SimpleText"},{"code":"webtau.cfg.groovy","type":"InlinedCode"},{"text":" file (default).","type":"SimpleText"}]},{"lang":"groovy","snippet":"url = \"http://localhost:8080\"","title":"webtau.cfg.groovy","includeRegexp":"localhost","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: webtau treats groovy config file as code","type":"SimpleText"}]}]},{"name":"Java","content":[{"type":"Paragraph","content":[{"text":"When you use JUnit like runners, e.g. ","type":"SimpleText"},{"url":"/webtau/getting-started/installation#junit5","isFile":false,"type":"Link","content":[{"text":"JUnit5","type":"SimpleText"}]},{"text":", webtau expects file named","type":"SimpleText"},{"type":"SoftLineBreak"},{"code":"webtau.properties","type":"InlinedCode"},{"text":" to be present in test classpath, e.g. test resources:","type":"SimpleText"}]},{"lang":"properties","snippet":"url = http://localhost:8080","title":"src/test/resources/webtau.properties","includeRegexp":"localhost","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Environments","id":"environments","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau supports environment specific config values, and a way to select which environment to set active during tests run.","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"url = \"http://localhost:8080\"\n\nenvironments {\n    qa {\n        url = \"http://server.qa:8080\"\n    }\n}","title":"webtau.cfg.groovy","excludeRegexp":"package","type":"Snippet"},{"type":"Paragraph","content":[{"text":"To select an active environment using ","type":"SimpleText"},{"url":"/webtau/groovy-standalone-runner/introduction","isFile":false,"type":"Link","content":[{"text":"Groovy Standalone Runner","type":"SimpleText"}]},{"text":" you","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"can pass ","type":"SimpleText"},{"code":"env","type":"InlinedCode"},{"text":" as cli parameter","type":"SimpleText"}]},{"command":"webtau --env=qa","paramsToHighlight":[],"type":"CliCommand"},{"type":"Paragraph","content":[{"text":"Additionally you can use environment varialbe to set an active environment: ","type":"SimpleText"},{"code":"WEBTAU_ENV=qa","type":"InlinedCode"},{"text":".","type":"SimpleText"}]}]},{"name":"Java","content":[{"lang":"properties","snippet":"url = http://localhost:8080\nenvironments.qa.url = http://server.qa:8080","title":"src/test/resources/webtau.properties","type":"Snippet"},{"type":"Paragraph","content":[{"text":"To select an active environment you have two options:","type":"SimpleText"}]},{"bulletMarker":"*","tight":true,"type":"BulletList","content":[{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"System property ","type":"SimpleText"},{"code":"-Denv=qa","type":"InlinedCode"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"Environment variable ","type":"SimpleText"},{"code":"WEBTAU_ENV=qa","type":"InlinedCode"}]}]}]}]}],"type":"Tabs"}]},{"title":"Overrides","id":"overrides","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau has a list of options you can specify using config file: ","type":"SimpleText"},{"url":"/webtau/configuration/options","isFile":false,"type":"Link","content":[{"text":"url, browserId, etc.","type":"SimpleText"}]},{"text":".","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"You can override any value using ","type":"SimpleText"},{"url":"/webtau/configuration/options#environment-variable-options","isFile":false,"type":"Link","content":[{"text":"environment variables","type":"SimpleText"}]},{"text":":","type":"SimpleText"}]},{"lang":"","snippet":"export WEBTAU_URL=http://another-server\nexport WEBTAU_CHROME_DRIVER_PATH=/path/to/chrome/driver\n","lineNumber":"","type":"Snippet"},{"type":"Paragraph","content":[{"text":"In addition to environment variables, you can use a runner specific way to override:","type":"SimpleText"}]},{"level":2,"title":"Groovy Standalone Runner","id":"overrides-groovy-standalone-runner","type":"SubHeading"},{"type":"Paragraph","content":[{"text":"In case of Groovy standalone runner, pass ","type":"SimpleText"},{"code":"--<option>=<value>","type":"InlinedCode"},{"text":":","type":"SimpleText"}]},{"command":"webtau --waitTimeout=25000 --url=http://another-server","paramsToHighlight":[],"type":"CliCommand"},{"level":2,"title":"JUnit Like Runners","id":"overrides-junit-like-runners","type":"SubHeading"},{"type":"Paragraph","content":[{"text":"Pass system property via java ","type":"SimpleText"},{"code":"-D","type":"InlinedCode"},{"text":" option:","type":"SimpleText"}]},{"lang":"","snippet":"-Durl=http://another-server\n","lineNumber":"","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Getting Started","pageTitle":"Configuration","pageMeta":{},"dirName":"getting-started","fileName":"configuration","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Config File","id":"config-file"},{"title":"Environments","id":"environments"},{"title":"Overrides","id":"overrides"}]}},{"type":"Page","content":[{"type":"Paragraph","content":[{"text":"Webtau ","type":"SimpleText"},{"code":"http.","type":"InlinedCode"},{"text":" module lets you exercise and validate HTTP endpoints.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"It provides a simplified way to access JSON response of an end-point and simplifies REST API tests.","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"columns":[{"content":[{"lang":"groovy","snippet":"package scenarios.rest\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario(\"check weather\") {\n    http.get(\"/weather\") {\n        temperature.shouldBe < 100\n    }\n}","title":"REST API test (Groovy specific runner)","type":"Snippet"},{"lang":"groovy","snippet":"package com.example.tests.junit5\n\nimport org.junit.jupiter.api.Test\nimport org.testingisdocumenting.webtau.junit5.WebTau\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\n@WebTau\nclass WeatherGroovyTest {\n    @Test\n    void checkWeather() {\n        http.get(\"/weather\") {\n            temperature.shouldBe < 100\n        }\n    }\n}","title":"REST API test (JUnit5)","type":"Snippet"}]},{"content":[{"lang":"json","snippet":"{\n  \"temperature\": 88\n}\n","lineNumber":"","title":"Server Response","type":"Snippet"}]}],"config":{},"type":"Columns"}]},{"name":"Java","content":[{"columns":[{"content":[{"lang":"java","snippet":"package com.example.tests.junit5;\n\nimport org.junit.jupiter.api.Test;\nimport org.testingisdocumenting.webtau.junit5.WebTau;\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*;\n\n@WebTau\npublic class WeatherJavaTest {\n    @Test\n    public void checkWeather() {\n        http.get(\"/weather\", (header, body) -> {\n            body.get(\"temperature\").shouldBe(lessThan(100));\n        });\n    }\n}","title":"REST API test (JUnit5 Java)","type":"Snippet"}]},{"content":[{"lang":"json","snippet":"{\n  \"temperature\": 88\n}\n","lineNumber":"","title":"Server Response","type":"Snippet"}]}],"config":{},"type":"Columns"}]}],"type":"Tabs"}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"HTTP","pageTitle":"Introduction","pageMeta":{},"dirName":"HTTP","fileName":"introduction","viewOnRelativePath":null,"pageSectionIdTitles":[]}},{"type":"Page","content":[{"title":"Example","id":"example","type":"Section","content":[{"type":"Paragraph","content":[{"text":"We have an app that exposes ","type":"SimpleText"},{"code":"create","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"read","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"update","type":"InlinedCode"},{"text":", and ","type":"SimpleText"},{"code":"delete","type":"InlinedCode"},{"text":" operations for customer records. Records are being served","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"under ","type":"SimpleText"},{"code":"/customers","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Here is an example of a ","type":"SimpleText"},{"code":"CRUD","type":"InlinedCode"},{"text":" operations test.","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"package scenarios.rest.springboot\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario(\"CRUD operations for customer\") {\n    def customerPayload = [firstName: \"FN\", lastName: \"LN\"] // new customer data\n\n    def id = http.post(\"/customers\", customerPayload) {\n        return id // return id value from response body\n    }\n\n    http.get(\"/customers/${id}\") {\n        body.should == customerPayload // only specified properties will be asserted against\n    }\n\n    def changedLastName = \"NLN\"\n    http.put(\"/customers/${id}\", [*:customerPayload, lastName: changedLastName]) {\n        lastName.should == changedLastName // specifying body is optional\n    }\n\n    http.get(\"/customers/${id}\") {\n        firstName.should == \"FN\"\n        lastName.should == changedLastName\n    }\n\n    def changedFirstName = \"NFN\"\n    http.patch(\"/customers/${id}\", [firstName: changedFirstName])\n\n    http.get(\"/customers/${id}\") {\n        firstName.should == changedFirstName\n        lastName.should == changedLastName\n    }\n\n    http.delete(\"/customers/${id}\") {\n        statusCode.should == 204\n    }\n\n    http.get(\"/customers/${id}\") {\n        statusCode.should == 404\n    }\n}","commentsType":"inline","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"package com.example.tests.junit5;\n\nimport org.testingisdocumenting.webtau.junit5.WebTau;\nimport org.junit.jupiter.api.Test;\n\nimport java.util.Map;\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*;\n\n@WebTau\npublic class CustomerCrudJavaTest {\n    @Test\n    public void crud() {\n        Map<String, ?> customerPayload = aMapOf( // new customer data\n                \"firstName\", \"FN\",\n                \"lastName\", \"LN\" );\n\n        int id = http.post(\"/customers\", customerPayload, ((header, body) -> {\n            return body.get(\"id\"); // return id value from response body\n        }));\n\n        http.get(\"/customers/\" + id, ((header, body) -> {\n            body.should(equal(customerPayload)); // only specified properties will be asserted against\n        }));\n\n        String changedLastName = \"NLN\";\n        Map<String, ?> changedCustomerPayload = aMapOf(\n                \"firstName\", \"FN\",\n                \"lastName\", changedLastName);\n\n        http.put(\"/customers/\" + id, changedCustomerPayload, ((header, body) -> {\n            body.get(\"firstName\").should(equal(\"FN\"));\n            body.get(\"lastName\").should(equal(changedLastName));\n        }));\n\n        http.get(\"/customers/\" + id, ((header, body) -> {\n            body.should(equal(changedCustomerPayload));\n        }));\n\n        http.delete(\"/customers/\" + id, ((header, body) -> {\n            header.statusCode().should(equal(204));\n        }));\n\n        http.get(\"/customers/\" + id, ((header, body) -> {\n            header.statusCode().should(equal(404));\n        }));\n    }\n}","commentsType":"inline","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Implicit statusCode Check","id":"implicit-statuscode-check","type":"Section","content":[{"type":"Paragraph","content":[{"text":"If you don't have an explicit ","type":"SimpleText"},{"code":"statusCode","type":"InlinedCode"},{"text":" validation it will be automatically validated based on the rules below","type":"SimpleText"}]},{"table":{"columns":[{"title":"Method","align":"left"},{"title":"Expected Code","align":"left"}],"data":[[[{"text":"GET","type":"SimpleText"}],[{"text":"200","type":"SimpleText"}]],[[{"text":"POST","type":"SimpleText"}],[{"text":"201","type":"SimpleText"}]],[[{"text":"PUT","type":"SimpleText"}],[{"text":"200","type":"SimpleText"}]],[[{"text":"PUT (no content)","type":"SimpleText"}],[{"text":"204","type":"SimpleText"}]],[[{"text":"DELETE","type":"SimpleText"}],[{"text":"200","type":"SimpleText"}]],[[{"text":"DELETE (no content)","type":"SimpleText"}],[{"text":"204","type":"SimpleText"}]],[[{"text":"PATCH","type":"SimpleText"}],[{"text":"200","type":"SimpleText"}]],[[{"text":"PATCH (no content)","type":"SimpleText"}],[{"text":"204","type":"SimpleText"}]]]},"type":"Table"}]},{"title":"Report","id":"report","type":"Section","content":[{"type":"Paragraph","content":[{"text":"After your test executions a report will be produced.","type":"SimpleText"}]},{"fit":true,"imageSrc":"/webtau/doc-artifacts/reports/report-crud-http-calls.png","timestamp":1621036895756,"shapes":[],"width":1200.0,"height":804.0,"type":"AnnotatedImage"},{"type":"Paragraph","content":[{"text":"Note: asserted values are being tracked and highlighted inside the report","type":"SimpleText"}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"HTTP","pageTitle":"CRUD","pageMeta":{},"dirName":"HTTP","fileName":"CRUD","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Example","id":"example"},{"title":"Implicit statusCode Check","id":"implicit-statuscode-check"},{"title":"Report","id":"report"}]}},{"type":"Page","content":[{"title":"Lazy Resource","id":"lazy-resource","type":"Section","content":[{"tabsContent":[{"name":"Groovy","content":[{"type":"Paragraph","content":[{"text":"One of the benefits of separating one CRUD ","type":"SimpleText"},{"code":"scenario","type":"InlinedCode"},{"text":" into multiple is to be able to run one test at a time.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"In order to make each test runnable independently we will use ","type":"SimpleText"},{"code":"createLazyResource","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.rest.springboot\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\ndef customerPayload = [firstName: \"FN\", lastName: \"LN\"]\n\ndef customer = createLazyResource(\"customer\") { // lazy resource to be created on the first access\n    def id = http.post(\"/customers\", customerPayload) {\n        return id\n    }\n\n    return new Customer(id: id, url: \"/customers/${id}\") // definition is below\n}\n\nscenario(\"customer create\") {\n    customer.id.should != null // accessing resource for the first time will trigger POST (in this example)\n}\n\nscenario(\"customer read\") {\n    http.get(customer.url) { // convenient re-use of url defined above\n        body.should == customerPayload\n    }\n}\n\nscenario(\"customer update\") {\n    def changedLastName = \"NLN\"\n    http.put(customer.url, [*:customerPayload, lastName: changedLastName]) {\n        lastName.should == changedLastName\n    }\n\n    http.get(customer.url) {\n        lastName.should == changedLastName\n    }\n}\n\nscenario(\"customer delete\") {\n    http.delete(customer.url) {\n        statusCode.should == 204\n    }\n\n    http.get(customer.url) {\n        statusCode.should == 404\n    }\n}","commentsType":"inline","title":"CRUD separated","type":"Snippet"},{"lang":"groovy","snippet":"package scenarios.rest.springboot\n\nclass Customer {\n    Number id\n    String url // store url of the created entity\n}","commentsType":"inline","title":"Customer lazy resource","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: to run one scenario at a time use ","type":"SimpleText"},{"code":"sscenario","type":"InlinedCode"},{"text":" (additional ","type":"SimpleText"},{"code":"s","type":"InlinedCode"},{"text":" in front). ","type":"SimpleText"},{"url":"/webtau/groovy-standalone-runner/selective-run","isFile":false,"type":"Link","content":[{"text":"Read more","type":"SimpleText"}]}]}]},{"name":"Java","content":[{"type":"Paragraph","content":[{"text":"One of the benefits of separating one CRUD ","type":"SimpleText"},{"code":"@Test","type":"InlinedCode"},{"text":" into multiple is to be able to run one test at a time.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"In order to make each test runnable independently we will leverage ","type":"SimpleText"},{"code":"BeforeAll","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"AfterAll","type":"InlinedCode"},{"text":", and ","type":"SimpleText"},{"code":"TestMethodOrder","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"lang":"java","snippet":"package com.example.tests.junit5;\n\nimport org.testingisdocumenting.webtau.junit5.WebTau;\nimport org.junit.jupiter.api.*;\n\nimport java.util.Map;\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*;\n\n@WebTau\n@TestMethodOrder(MethodOrderer.OrderAnnotation.class) // forcing methods execution order\n@DisplayName(\"customer CRUD\")\npublic class CustomerCrudSeparatedJavaTest {\n    private static final Map<String, ?> customerPayload = aMapOf(\n            \"firstName\", \"FN\",\n            \"lastName\", \"LN\" );\n\n    private static final Map<String, ?> changedCustomerPayload = aMapOf(\n            customerPayload,\n            \"lastName\", \"NLN\");\n\n    private static int id;\n\n    @BeforeAll\n    @DisplayName(\"create customer\") // optional friendly name for reporting purposes\n    static void createCustomer() {\n        id = http.post(\"/customers\", customerPayload, ((header, body) -> {\n            return body.get(\"id\");\n        }));\n\n        actual(id).shouldNot(equal(0));\n    }\n\n    @Test\n    @Order(1)\n    @DisplayName(\"read customer\")\n    void read() {\n        http.get(\"/customers/\" + id, ((header, body) -> {\n            body.should(equal(customerPayload));\n        }));\n    }\n\n    @Test\n    @Order(2) // order dependence saves from creating customer on every test\n    @DisplayName(\"update customer\")\n    void update() {\n        http.put(\"/customers/\" + id, changedCustomerPayload, ((header, body) -> {\n            body.should(equal(changedCustomerPayload));\n        }));\n\n        http.get(\"/customers/\" + id, ((header, body) -> {\n            body.should(equal(changedCustomerPayload));\n        }));\n    }\n\n    @Test\n    @Order(3) // but you can still run each method independently\n    @DisplayName(\"delete customer\")\n    void delete() {\n        http.delete(\"/customers/\" + id, ((header, body) -> {\n            header.statusCode().should(equal(204));\n        }));\n\n        http.get(\"/customers/\" + id, ((header, body) -> {\n            header.statusCode().should(equal(404));\n        }));\n\n        id = -1; // marking as deleted to let cleanup step know that no delete is required\n    }\n\n    @AfterAll\n    static void cleanup() { // optional (since we create new ids all the time) step to keep your environment clean\n        if (id == -1) {\n            return;\n        }\n\n        http.delete(\"/customers/\" + id);\n    }\n}","commentsType":"inline","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Report","id":"report","type":"Section","content":[{"type":"Paragraph","content":[{"text":"As you can see in the report below, each ","type":"SimpleText"},{"code":"CRUD","type":"InlinedCode"},{"text":" operation has its own entry. If you follow this pattern, then you","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"can filter tests by ","type":"SimpleText"},{"code":"create","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"update","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"read","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"delete","type":"InlinedCode"},{"text":" to streamline investigation.","type":"SimpleText"}]},{"fit":true,"imageSrc":"/webtau/doc-artifacts/reports/report-crud-separated-http-calls.png","timestamp":1621036897332,"shapes":[{"id":"highlight1","type":"highlight","text":"","color":"a","darkFriendly":false,"x":905,"y":220,"width":24,"height":27},{"id":"highlight2","type":"highlight","text":"","color":"a","darkFriendly":false,"x":438,"y":190,"width":362,"height":16}],"width":1200.0,"height":804.0,"type":"AnnotatedImage"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"HTTP","pageTitle":"CRUD Separated","pageMeta":{},"dirName":"HTTP","fileName":"CRUD-separated","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Lazy Resource","id":"lazy-resource"},{"title":"Report","id":"report"}]}},{"type":"Page","content":[{"title":"Special Values","id":"special-values","type":"Section","content":[{"lang":"groovy","snippet":"http.get(\"/end-point\") {\n    price.should == 100\n    assert price instanceof DataNode\n}","entry":"use groovy closure as validation","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"Values that you access inside validation block are special values of ","type":"SimpleText"},{"code":"DataNode","type":"InlinedCode"},{"text":" type. When you assert them using ","type":"SimpleText"},{"code":"should","type":"InlinedCode"},{"text":" statement","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"they act as proxies that record every assertion that you do.","type":"SimpleText"}]}]},{"title":"Extracting Values","id":"extracting-values","type":"Section","content":[{"type":"Paragraph","content":[{"text":"As you have seen in ","type":"SimpleText"},{"url":"/webtau/HTTP/CRUD","isFile":false,"type":"Link","content":[{"text":"CRUD example","type":"SimpleText"}]},{"text":" you can return values back from a validation block.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def id = http.get(\"/end-point\") {\n    return id\n}\n\nassert id == 10\nassert id.getClass() == Integer","entry":"can return simple value from get","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"When you return a value from a validation block, it automatically gets converted to its correspondent primitive.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Note: asserting that value after returning will not track and associated assertions with the call anymore. Use it only","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"to get values required for consequent test calls.","type":"SimpleText"}]}]},{"title":"Properties On Lists","id":"properties-on-lists","type":"Section","content":[{"data":{"id":10,"price":100,"amount":30,"list":[1,2,3],"object":{"k1":"v1","k2":"v2","k3":"v3"},"complexList":[{"id":"id1","k1":"v1","k2":30},{"id":"id2","k1":"v11","k2":40}]},"paths":[],"type":"Json"},{"type":"Paragraph","content":[{"text":"If you have a list of objects like ","type":"SimpleText"},{"code":"complexList","type":"InlinedCode"},{"text":" above, you can access all its children property value with ","type":"SimpleText"},{"code":"complexList.k2","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"lang":"groovy","snippet":"http.get(\"/end-point\") {\n    complexList.k2.should == [30, 40]\n}","entry":"children key shortcut","bodyOnly":true,"type":"Snippet"}]},{"title":"Path based properties access","id":"path-based-properties-access","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Primarily for Java users, webtau supports the ability to query properties of a ","type":"SimpleText"},{"code":"DataNode","type":"InlinedCode"},{"text":" via a path instead of chaining","type":"SimpleText"},{"type":"SoftLineBreak"},{"code":"get(String name)","type":"InlinedCode"},{"text":" calls.  For example, to obtain a simple property:","type":"SimpleText"}]},{"lang":"java","snippet":"http.get(\"/end-point\", (header, body) -> {\n    body.get(\"object.k1\").should(equal(\"v1\"));\n});","entry":"canQueryNodeByPath","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"It is also possible to query arrays, including the ability to query for the Nth element from the end:","type":"SimpleText"}]},{"lang":"java","snippet":"http.get(\"/end-point\", (header, body) -> {\n    body.get(\"complexList[0].k1\").should(equal(\"v1\"));\n    body.get(\"complexList[-1].k1\").should(equal(\"v11\"));\n});","entry":"canQuerySpecificListElementByPath","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"Similarly to the Groovy example in ","type":"SimpleText"},{"url":"/webtau/HTTP/data-node#properties-on-lists","isFile":false,"type":"Link","content":[{"text":"Properties On Lists","type":"SimpleText"}]},{"text":", it is possible to access","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"all children property values:","type":"SimpleText"}]},{"lang":"java","snippet":"http.get(\"/end-point\", (header, body) -> {\n    body.get(\"complexList.k1\").should(equal(Arrays.asList(\"v1\", \"v11\")));\n});","entry":"canQueryListByNodePath","bodyOnly":true,"type":"Snippet"}]},{"title":"If-Else Logic","id":"if-else-logic","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Even though values that you access inside validation block are special values of ","type":"SimpleText"},{"code":"DataNode","type":"InlinedCode"},{"text":" type, you can still","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"perform simple ","type":"SimpleText"},{"code":"if-else","type":"InlinedCode"},{"text":" like logic checks on them. Accessing the values will mark them as \"touched\" for data coverage statistic.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def zipCode = http.get(\"/address\") {\n    return addressType == \"complex\" ? address.zipCode : \"NA\"\n}\n\nzipCode.should == \"12345\"","entry":"if-else logic","bodyOnly":true,"title":"simple if-else logic","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Warning: Comparison of complex values is not properly implemented due to current Groovy API implementation details","type":"SimpleText"}]}]},{"title":"Each","id":"each","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Special values inside assertion block have convenient methods","type":"SimpleText"}]},{"type":"Paragraph","content":[{"code":"each","type":"InlinedCode"},{"text":" to iterate over a list","type":"SimpleText"}]},{"lang":"groovy","snippet":"http.get(\"/end-point\") {\n    list.each { it.shouldBe > 0 }\n}","entry":"each on simple list","bodyOnly":true,"title":"List of simple values","type":"Snippet"},{"lang":"groovy","snippet":"http.get(\"/end-point\") {\n    complexList.each { k2.shouldBe > 0 }\n}","entry":"each on complex list","bodyOnly":true,"title":"List of complex values","type":"Snippet"}]},{"title":"Find","id":"find","type":"Section","content":[{"type":"Paragraph","content":[{"code":"find","type":"InlinedCode"},{"text":" to find a single value","type":"SimpleText"}]},{"lang":"groovy","snippet":"def found = http.get(\"/end-point\") {\n    return list.find { it > 1 }\n}\n\nassert found == 2\nassert found.getClass() == Integer","entry":"find on list","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"and ","type":"SimpleText"},{"code":"findAll","type":"InlinedCode"},{"text":" to find all the values matching predicate","type":"SimpleText"}]},{"lang":"groovy","snippet":"def found = http.get(\"/end-point\") {\n    return list.findAll { it > 1 }\n}\n\nassert found == [2, 3]\nassert found[0].getClass() == Integer","entry":"findAll on list","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: While values inside a predicate are normal values, the result of ","type":"SimpleText"},{"code":"find","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"findAll","type":"InlinedCode"},{"text":" is still ","type":"SimpleText"},{"code":"DataNode","type":"InlinedCode"}]},{"lang":"groovy","snippet":"def id = http.get(\"/end-point\") {\n    def found = complexList.find {\n        assert k1.getClass() == String\n        k1 == 'v1'\n    }\n    assert found.getClass() == GroovyDataNode\n\n    return found.id\n}\n\nassert id.getClass() == String","entry":"find on list of objects","bodyOnly":true,"type":"Snippet"}]},{"title":"Collect","id":"collect","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"collect","type":"InlinedCode"},{"text":" to transform a collection of items","type":"SimpleText"}]},{"lang":"groovy","snippet":"def transformed = http.get(\"/end-point\") {\n    return list.collect { \"world#${it}\" }\n}\n\nassert transformed == ['world#1', 'world#2', 'world#3']\nassert transformed[0] instanceof GString","entry":"transform list","bodyOnly":true,"type":"Snippet"}]},{"title":"Combine","id":"combine","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Methods ","type":"SimpleText"},{"code":"find","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"collect","type":"InlinedCode"},{"text":" can be chained","type":"SimpleText"}]},{"lang":"groovy","snippet":"def sum = http.get(\"/end-point\") {\n    return complexList\n            .findAll { k1.startsWith('v1') }\n            .collect { k2 }\n            .sum()\n}\n\nassert sum == 70","entry":"findAll, collect, and sum","bodyOnly":true,"type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"HTTP","pageTitle":"Data Node","pageMeta":{},"dirName":"HTTP","fileName":"data-node","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Special Values","id":"special-values"},{"title":"Extracting Values","id":"extracting-values"},{"title":"Properties On Lists","id":"properties-on-lists"},{"title":"Path based properties access","id":"path-based-properties-access"},{"title":"If-Else Logic","id":"if-else-logic"},{"title":"Each","id":"each"},{"title":"Find","id":"find"},{"title":"Collect","id":"collect"},{"title":"Combine","id":"combine"}]}},{"type":"Page","content":[{"title":"Standard Header","id":"standard-header","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Standard headers like ","type":"SimpleText"},{"code":"Content-Type","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"Accept","type":"InlinedCode"},{"text":" are set on your behalf.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"When payload content is present then values are based on the content type you are sending.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"When no payload is present, it defaults to ","type":"SimpleText"},{"code":"application/json","type":"InlinedCode"},{"text":".","type":"SimpleText"}]}]},{"title":"Common Header","id":"common-header","type":"Section","content":[{"type":"Paragraph","content":[{"text":"If each http request requires the same header you can specify that header using ","type":"SimpleText"},{"code":"httpHeaderProvider","type":"InlinedCode"},{"text":".","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Common example is specifying authentication header.","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.rest.headers\n\nimport scenarios.rest.headers.auth.Auth\n\nurl = \"http://localhost:8080\"\n\nhttpHeaderProvider = Auth.&authHeader","title":"webtau.cfg.groovy","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Where ","type":"SimpleText"},{"code":"Auth.&authHeader","type":"InlinedCode"},{"text":" is implemented as follows:","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.rest.headers.auth\n\nimport org.testingisdocumenting.webtau.console.ConsoleOutputs\nimport org.testingisdocumenting.webtau.http.HttpHeader\n\nclass Auth {\n    static HttpHeader authHeader(String fullUrl, String url, HttpHeader original) {\n        ConsoleOutputs.out('auth header injection point')\n        return original.merge([Authorization: 'Bearer <token>'])\n    }\n}","title":"scenarios/rest/headers/auth/Auth.groovy","type":"Snippet"},{"type":"Paragraph","content":[{"text":"This removes implementation details from your tests and makes them less brittle.","type":"SimpleText"}]}]},{"title":"Explicit Header","id":"explicit-header","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To explicitly set header pass ","type":"SimpleText"},{"code":"http.header(values)","type":"InlinedCode"},{"text":" as an additional parameter.","type":"SimpleText"}]},{"lang":"groovy","snippet":"http.get(\"/end-point\", http.header('Accept', 'application/octet-stream')) {\n    // assertions go here\n}\n\nhttp.get(\"/end-point\", [queryParam1: 'queryParamValue1'],\n        http.header('Accept', 'application/octet-stream')) {\n    // assertions go here\n}\n\nhttp.patch(\"/end-point\", http.header('Accept', 'application/octet-stream'),\n        [fileId: 'myFile']) {\n    // assertions go here\n}\n\nhttp.post(\"/end-point\", http.header('Accept', 'application/octet-stream'),\n        [fileId: 'myFile']) {\n    // assertions go here\n}\n\nhttp.put(\"/end-point\", http.header('Accept', 'application/octet-stream'),\n        [fileId: 'myFile', file: sampleFile]) {\n    // assertions go here\n}\n\nhttp.delete(\"/end-point\", http.header('Custom-Header', 'special-value'))","entry":"explicit header passing example","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"Additionally ","type":"SimpleText"},{"code":"http.header","type":"InlinedCode"},{"text":" accepts values as a map.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def varArgHeader = http.header(\n        'My-Header1', 'Value1',\n        'My-Header2', 'Value2')\n\ndef mapBasedHeader = http.header([\n        'My-Header1': 'Value1',\n        'My-Header2': 'Value2'])\n\nassert varArgHeader == mapBasedHeader","entry":"header creation","bodyOnly":true,"type":"Snippet"}]},{"title":"Mime Type Combined With Payload","id":"mime-type-combined-with-payload","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"http.body","type":"InlinedCode"},{"text":" to combine ","type":"SimpleText"},{"code":"Content-Type","type":"InlinedCode"},{"text":" and payload.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def content = binaryFile('path')\nhttp.post(\"/end-point\", http.body(\"application/octet-stream\", content)) {\n    // assertions go here\n}","title":"Combined type and payload","entry":"explicit binary mime types combined with request body","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"If you need a standard type consider using","type":"SimpleText"}]},{"lang":"groovy","snippet":"def content = binaryFile('path')\nhttp.post(\"/end-point\", http.application.octetStream(content)) {\n    // assertions go here\n}","title":"Binary content shortuct","entry":"post implicit binary mime types combined with request body","bodyOnly":true,"type":"Snippet"},{"lang":"groovy","snippet":"def content = 'text content'\nhttp.post(\"/end-point\", http.text.plain(content)) {\n    // assertions go here\n}","title":"Text content shortcut","entry":"implicit text mime types combined with request body","bodyOnly":true,"type":"Snippet"}]},{"title":"Response Header","id":"response-header","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To validate values from response header use ","type":"SimpleText"},{"code":"header","type":"InlinedCode"},{"text":" object.","type":"SimpleText"}]},{"lang":"groovy","snippet":"http.post(\"/end-point\") {\n    header.location.should == 'http://www.example.org/url/23'\n    header['Location'].should == 'http://www.example.org/url/23'\n\n    header.contentLocation.should == '/url/23'\n    header['Content-Location'].should == '/url/23'\n\n    header.contentLength.shouldBe > 300\n    header['Content-Length'].shouldBe > 300\n}","entry":"header assertion with shortcut","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"At the moment only ","type":"SimpleText"},{"code":"location","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"contentLocation","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"contentLength","type":"InlinedCode"},{"text":" have camelCase shortcuts.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"All the other header values you need to use ","type":"SimpleText"},{"code":"['Header-Name']","type":"InlinedCode"},{"text":" syntax.","type":"SimpleText"}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"HTTP","pageTitle":"Headers","pageMeta":{},"dirName":"HTTP","fileName":"headers","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Standard Header","id":"standard-header"},{"title":"Common Header","id":"common-header"},{"title":"Explicit Header","id":"explicit-header"},{"title":"Mime Type Combined With Payload","id":"mime-type-combined-with-payload"},{"title":"Response Header","id":"response-header"}]}},{"type":"Page","content":[{"title":"Passing Query Parameters","id":"passing-query-parameters","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau offers a number of ways of specifying query parameters:","type":"SimpleText"}]},{"lang":"groovy","snippet":"http.get(\"params?a=1&b=text\") {\n    // assertions go here\n}","title":"embedding query params directly in url","entry":"query params in url example","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"Map","type":"InlinedCode"},{"text":" as a second parameter to pass query parameters. Suitable for languages that support in-line creation of ","type":"SimpleText"},{"code":"Map","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"lang":"groovy","snippet":"http.get(\"params\", [a: 1, b: 'text']) {\n    // assertions go here\n}","title":"pass query parameters as Map","entry":"query params using query as map example","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"Only ","type":"SimpleText"},{"code":"http.get","type":"InlinedCode"},{"text":" has a ","type":"SimpleText"},{"code":"Map","type":"InlinedCode"},{"text":" variant, for ","type":"SimpleText"},{"code":"http.put","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"http.post","type":"InlinedCode"},{"text":", etc you must use ","type":"SimpleText"},{"code":"http.query","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"lang":"groovy","snippet":"http.get(\"params\", http.query([a: 1, b: 'text']), http.header(['x-param': 'value'])) {\n    // assertions go here\n}","title":"pass query parameters using http.query","entry":"query params using query method example","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"Additionally ","type":"SimpleText"},{"code":"http.query","type":"InlinedCode"},{"text":" has a vararg variant which is more convenient for ","type":"SimpleText"},{"code":"Java","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"lang":"groovy","snippet":"http.get(\"params\", http.query('a', '1', 'b', 'text')) {\n    // assertions go here\n}","title":"http.query vararg variant","entry":"query params using query method and comma example","bodyOnly":true,"type":"Snippet"}]},{"title":"Parameters Encoding","id":"parameters-encoding","type":"Section","content":[{"type":"Paragraph","content":[{"text":"All query parameters are encoded automatically.","type":"SimpleText"}]},{"lang":"groovy","snippet":"http.get(\"params\", http.query([message: 'hello world !'])) {\n    // assertions go here\n}","title":"query parameter with url forbidden characters","entry":"query params encoding","startLine":"query params encoding snippet start","endLine":"query params encoding snippet end","excludeStartEnd":true,"excludeRegexp":"http.doc","type":"Snippet"},{"lang":"txt","snippet":"params?message=hello+world+%21","title":"automatic encoding","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"HTTP","pageTitle":"Query Parameters","pageMeta":{},"dirName":"HTTP","fileName":"query-parameters","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Passing Query Parameters","id":"passing-query-parameters"},{"title":"Parameters Encoding","id":"parameters-encoding"}]}},{"type":"Page","content":[{"title":"GET","id":"get","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"http.ping","type":"InlinedCode"},{"text":" to have a simplified way to check if ","type":"SimpleText"},{"code":"url","type":"InlinedCode"},{"text":" is responding with ","type":"SimpleText"},{"code":"200","type":"InlinedCode"},{"text":" on ","type":"SimpleText"},{"code":"GET","type":"InlinedCode"},{"text":" request.","type":"SimpleText"}]},{"lang":"groovy","snippet":"if (!http.ping(\"/weather\")) {\n    http.post(\"/cluster-master\", [restart: \"weather\"])\n}","title":"Ping response to make reboot action","type":"Snippet"},{"lang":"groovy","snippet":"http.ping(\"/weather\")\nhttp.ping(\"/weather\", [\"query-param\": \"value\"])\nhttp.ping(\"/weather\", [\"query-param\": \"value\"], http.header([\"X-flag\": \"test\"]))","title":"Ping with query params and header","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"HTTP","pageTitle":"Ping","pageMeta":{},"dirName":"HTTP","fileName":"ping","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"GET","id":"get"}]}},{"type":"Page","content":[{"title":"File System Content","id":"file-system-content","type":"Section","content":[{"type":"Paragraph","content":[{"text":"In following examples backend expects a file passed as ","type":"SimpleText"},{"code":"multipart/form-data","type":"InlinedCode"},{"text":". File content is expected to be stored in ","type":"SimpleText"},{"code":"file","type":"InlinedCode"},{"text":" field.","type":"SimpleText"},{"type":"HardLineBreak"},{"text":"Backend responds with received file name and file description.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"To ","type":"SimpleText"},{"code":"POST","type":"InlinedCode"},{"text":" form data, you need to use the same ","type":"SimpleText"},{"code":"http.post","type":"InlinedCode"},{"text":" statement as you saw in previous examples.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Second parameter should be ","type":"SimpleText"},{"code":"http.formData","type":"InlinedCode"},{"text":" instead of a map payload we used for ","type":"SimpleText"},{"code":"JSON","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"lang":"groovy","snippet":"def imagePath = testResourcePath(\"src/test/resources/image.png\")\n\nhttp.post(\"/file-upload\", http.formData(file: imagePath)) {\n    fileName.should == 'image.png'\n}","entry":"file upload example simple","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"http.formFile","type":"InlinedCode"},{"text":" to override file name that is being sent to the backend.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def imagePath = testResourcePath(\"src/test/resources/image.png\")\n\nhttp.post(\"/file-upload\", http.formData(file: http.formFile('myFileName.png', imagePath))) {\n    fileName.should == 'myFileName.png'\n}","entry":"file upload example with file name override","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"Multiple form fields can be specified like in the example below.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def imagePath = testResourcePath(\"src/test/resources/image.png\")\n\nhttp.post(\"/file-upload\", http.formData(file: imagePath, fileDescription: 'new report')) {\n    fileName.should == 'image.png'\n    description.should == 'new report'\n}","entry":"file upload example multiple fields","bodyOnly":true,"type":"Snippet"}]},{"title":"In-Memory Content","id":"in-memory-content","type":"Section","content":[{"type":"Paragraph","content":[{"text":"If your test already has content, you can explicitly pass it as is.","type":"SimpleText"}]},{"lang":"groovy","snippet":"byte[] fileContent = [1, 2, 3, 4] as byte[]\n\nhttp.post(\"/file-upload\", http.formData(file: fileContent)) {\n    fileName.should == 'backend-generated-name-as-no-name-provided'\n}","entry":"file upload example with in-memory content","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: no file name is passed and this particular backend generated file name on your behalf.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"http.formFile","type":"InlinedCode"},{"text":" to provide a file name","type":"SimpleText"}]},{"lang":"groovy","snippet":"byte[] fileContent = [1, 2, 3, 4] as byte[]\n\nhttp.post(\"/file-upload\", http.formData(\n        file: http.formFile('myFileName.dat', fileContent))) {\n    fileName.should == 'myFileName.dat'\n}","entry":"file upload example with in-memory content and file name","bodyOnly":true,"type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"HTTP","pageTitle":"Files Upload","pageMeta":{},"dirName":"HTTP","fileName":"files-upload","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"File System Content","id":"file-system-content"},{"title":"In-Memory Content","id":"in-memory-content"}]}},{"type":"Page","content":[{"title":"Asserting Text","id":"asserting-text","type":"Section","content":[{"type":"Paragraph","content":[{"text":"If response contains a pdf file you can assert its content using ","type":"SimpleText"},{"code":"pdf(body)","type":"InlinedCode"},{"text":" function.","type":"SimpleText"}]},{"lang":"groovy","snippet":"http.get(\"/report\") {\n    pdf(body).pageText(0).should contain('Quarterly earnings:')\n}","entry":"download pdf and assert page text using contains","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"If more than one assertion needs to be made, assign ","type":"SimpleText"},{"code":"pdf","type":"InlinedCode"},{"text":" result to a local variable.","type":"SimpleText"}]},{"lang":"groovy","snippet":"http.get(\"/report\") {\n    def pdf = pdf(body)\n    pdf.pageText(0).should contain('Quarterly earnings:')\n    pdf.pageText(1).should == 'Intentional blank page\\n'\n}","entry":"download pdf and assert page text using equal and contains","bodyOnly":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: use pdf assertions for sanity checks like presence of correct client names or account numbers. Leave comprehensive pdf generation test to unit tests.","type":"SimpleText"}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"HTTP","pageTitle":"PDF","pageMeta":{},"dirName":"HTTP","fileName":"PDF","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Asserting Text","id":"asserting-text"}]}},{"type":"Page","content":[{"title":"Scenarios","id":"scenarios","type":"Section","content":[{"type":"Paragraph","content":[{"text":"You document ","type":"SimpleText"},{"code":"REST endpoints","type":"InlinedCode"},{"text":" so users can use them to achieve various goals.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"You also need to make sure that documented scenarios work as advertised.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"To automate the process, capture executed scenarios and use them inside your documentation.","type":"SimpleText"}]}]},{"title":"Capturing Test Artifacts","id":"capturing-test-artifacts","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To capture ","type":"SimpleText"},{"code":"REST","type":"InlinedCode"},{"text":" artifacts use ","type":"SimpleText"},{"code":"http.doc.capture","type":"InlinedCode"},{"text":":","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.rest\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.http\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.scenario\n\nscenario(\"extracting id after POST to use inside GET request\") {\n    def id = http.post(\"/employee\", [firstName: 'FN', lastName: 'LN']) {\n        return id\n    }\n    http.doc.capture('employee-post')\n\n    http.get(\"/employee/$id\") {\n        firstName.should == 'FN'\n        lastName.should == 'LN'\n    }\n    http.doc.capture('employee-get') // capture previous HTTP call into <docDir>/employee-get\n}","title":"test.groovy","commentsType":"inline","type":"Snippet"},{"type":"Paragraph","content":[{"text":"An ","type":"SimpleText"},{"code":"employee-get","type":"InlinedCode"},{"text":" directory will be created containing a number of test artifacts.","type":"SimpleText"}]}]},{"title":"Test Artifacts Location","id":"test-artifacts-location","type":"Section","content":[{"type":"Paragraph","content":[{"text":"By default, the directory will be created in the current working directory.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"To change it add ","type":"SimpleText"},{"code":"docPath","type":"InlinedCode"},{"text":" to your ","type":"SimpleText"},{"code":"webtau.cfg.groovy","type":"InlinedCode"},{"text":" file.","type":"SimpleText"}]},{"lang":"groovy","snippet":"url = \"http://localhost:8180\"\n\ndocPath = \"doc-artifacts\"","title":"webtau.cfg.groovy","excludeRegexp":"package","type":"Snippet"}]},{"title":"Test Artifacts","id":"test-artifacts","type":"Section","content":[{"type":"Paragraph","content":[{"text":"A number of artifacts will be created depending on the exact call being captured.","type":"SimpleText"}]},{"level":2,"title":"Request and response payloads","id":"test-artifacts-request-and-response-payloads","type":"SubHeading"},{"type":"Paragraph","content":[{"text":"Request bodies are captured in either ","type":"SimpleText"},{"code":"request.json","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"request.pdf","type":"InlinedCode"},{"text":" or ","type":"SimpleText"},{"code":"request.data","type":"InlinedCode"},{"text":" depending on the type.","type":"SimpleText"}]},{"title":"employee-post/request.json","data":{"firstName":"FN","lastName":"LN"},"paths":[],"type":"Json"},{"type":"Paragraph","content":[{"text":"Similarly, response bodies are captured in either ","type":"SimpleText"},{"code":"response.json","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"response.pdf","type":"InlinedCode"},{"text":" or ","type":"SimpleText"},{"code":"response.data","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"title":"employee-get/response.json","data":{"firstName":"FN","lastName":"LN"},"paths":[],"type":"Json"},{"level":2,"title":"Request and response headers","id":"test-artifacts-request-and-response-headers","type":"SubHeading"},{"type":"Paragraph","content":[{"text":"Just like payloads, request and response headers are captured in ","type":"SimpleText"},{"code":"request.header.txt","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"response.header.txt","type":"InlinedCode"},{"type":"SoftLineBreak"},{"text":"respectively. These files contain a header per line with the name and values colon separated.  The values","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"are redacted for any potentially sensitive headers.","type":"SimpleText"}]},{"title":"redacted request.header.txt","data":"testheader: testValue\nauthorization: ................","paths":[],"type":"Json"},{"level":2,"title":"Response body assertions","id":"test-artifacts-response-body-assertions","type":"SubHeading"},{"type":"Paragraph","content":[{"text":"Any assertions you perform on the response body in your scenarios are captured in a ","type":"SimpleText"},{"code":"paths.json","type":"InlinedCode"},{"text":" file.  This","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"contains an array with the list of paths within the body whose values were asserted.","type":"SimpleText"}]},{"title":"employee-get/paths.json","data":["root.firstName","root.lastName"],"paths":[],"type":"Json"},{"level":2,"title":"Request URLs","id":"test-artifacts-request-urls","type":"SubHeading"},{"type":"Paragraph","content":[{"text":"The actual request URL is captured in two forms into two different files:","type":"SimpleText"}]},{"bulletMarker":"*","tight":true,"type":"BulletList","content":[{"type":"ListItem","content":[{"type":"Paragraph","content":[{"code":"request.fullurl.txt","type":"InlinedCode"},{"text":" - contains the full URL","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"code":"request.url.txt","type":"InlinedCode"},{"text":" - contains only the part specified in the http call in the scenario","type":"SimpleText"}]}]}]},{"lang":"txt","snippet":"/params?a=1&b=text","title":"request.url.txt","type":"Snippet"},{"lang":"txt","snippet":"http://localhost:39673/params?a=1&b=text","title":"request.fullurl.txt","type":"Snippet"}]},{"title":"Document REST calls","id":"document-rest-calls","type":"Section","content":[{"type":"Paragraph","content":[{"text":"If you have user facing scenario tests, capture them and refer to them inside your documentation.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Set your documentation build pipeline like below.","type":"SimpleText"}]},{"diagram":{"isInvertedTextColorByStyleId":{},"svg":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 2.43.0 (0)\n -->\n<!-- Title: Generated Pages: 1 -->\n<svg width=\"407pt\" height=\"48pt\"\n viewBox=\"0.00 0.00 407.00 48.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 44)\">\n<title>Generated</title>\n<polygon fill=\"transparent\" stroke=\"transparent\" points=\"-4,4 -4,-44 403,-44 403,4 -4,4\"/>\n<!-- build -->\n<g id=\"node1\" class=\"node\">\n<title>build</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"0,-0.5 0,-39.5 54,-39.5 54,-0.5 0,-0.5\"/>\n<text text-anchor=\"middle\" x=\"27\" y=\"-17.5\" font-family=\"Helvetica,sans-Serif\" font-size=\"10.00\">Build</text>\n</g>\n<!-- deploy -->\n<g id=\"node2\" class=\"node\">\n<title>deploy</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"90,-0.5 90,-39.5 153,-39.5 153,-0.5 90,-0.5\"/>\n<text text-anchor=\"middle\" x=\"121.5\" y=\"-17.5\" font-family=\"Helvetica,sans-Serif\" font-size=\"10.00\">Deploy</text>\n</g>\n<!-- build&#45;&gt;deploy -->\n<g id=\"edge1\" class=\"edge\">\n<title>build&#45;&gt;deploy</title>\n<path fill=\"none\" stroke=\"black\" d=\"M54.26,-20C62.24,-20 71.21,-20 79.91,-20\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"79.92,-23.5 89.92,-20 79.92,-16.5 79.92,-23.5\"/>\n</g>\n<!-- testrun -->\n<g id=\"node3\" class=\"node\">\n<title>testrun</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"189,-0.5 189,-39.5 259,-39.5 259,-0.5 189,-0.5\"/>\n<text text-anchor=\"middle\" x=\"224\" y=\"-17.5\" font-family=\"Helvetica,sans-Serif\" font-size=\"10.00\">Test Run</text>\n</g>\n<!-- deploy&#45;&gt;testrun -->\n<g id=\"edge2\" class=\"edge\">\n<title>deploy&#45;&gt;testrun</title>\n<path fill=\"none\" stroke=\"black\" d=\"M153.2,-20C161.33,-20 170.27,-20 178.96,-20\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"178.98,-23.5 188.98,-20 178.98,-16.5 178.98,-23.5\"/>\n</g>\n<!-- documentation -->\n<g id=\"node4\" class=\"node\">\n<title>documentation</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"295,-0.5 295,-39.5 399,-39.5 399,-0.5 295,-0.5\"/>\n<text text-anchor=\"middle\" x=\"347\" y=\"-17.5\" font-family=\"Helvetica,sans-Serif\" font-size=\"10.00\">Documentation</text>\n</g>\n<!-- testrun&#45;&gt;documentation -->\n<g id=\"edge3\" class=\"edge\">\n<title>testrun&#45;&gt;documentation</title>\n<path fill=\"none\" stroke=\"black\" d=\"M259.03,-20C266.97,-20 275.66,-20 284.39,-20\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"284.6,-23.5 294.6,-20 284.6,-16.5 284.6,-23.5\"/>\n</g>\n</g>\n</svg>\n","stylesByNodeId":{"testrun":["h"]},"id":"dag1"},"idsToHighlight":[],"wide":false,"urls":{},"type":"GraphVizDiagram"},{"type":"Paragraph","content":[{"text":"Combine REST requests and responses with Open API generated specs for complete documentation.","type":"SimpleText"}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"HTTP","pageTitle":"Documentation","pageMeta":{},"dirName":"HTTP","fileName":"documentation","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Scenarios","id":"scenarios"},{"title":"Capturing Test Artifacts","id":"capturing-test-artifacts"},{"title":"Test Artifacts Location","id":"test-artifacts-location"},{"title":"Test Artifacts","id":"test-artifacts"},{"title":"Document REST calls","id":"document-rest-calls"}]}},{"type":"Page","content":[{"title":"Contain","id":"contain","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"contain","type":"InlinedCode"},{"text":" matcher to test scenarios like search or list of recently created entries.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"This way you don't have to assume an existing state of your backend under test.","type":"SimpleText"}]},{"title":"Response","data":[{"id":1,"firstName":"FN1","lastName":"LN1"},{"id":2,"firstName":"FN2","lastName":"LN2"},{"id":3,"firstName":"FN3","lastName":"LN3"}],"paths":[],"type":"Json"},{"type":"Paragraph","content":[{"text":"Given the response, we want to make sure there is an entry with a specified ","type":"SimpleText"},{"code":"firstName","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"lastName","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.rest.springboot\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario(\"list Customers and assert that it contains a specified entry\") {\n    http.get(\"/customers\") {\n        body.should contain([firstName: 'FN1', lastName: 'LN1'])\n    }\n}","type":"Snippet"}]},{"title":"List Of Objects","id":"list-of-objects","type":"Section","content":[{"type":"Paragraph","content":[{"text":"If you want to make sure that all the values in the list are what you need - use ","type":"SimpleText"},{"code":"TableData","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.rest.springboot\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario(\"list Customers and assert with a Table Data\") {\n    http.post(\"/customers\", [firstName: \"FN1\", lastName: \"LN1\"])\n    http.post(\"/customers\", [firstName: \"FN2\", lastName: \"LN2\"])\n    http.post(\"/customers\", [firstName: \"FN3\", lastName: \"LN3\"])\n\n    http.get(\"/customers?sortBy=firstName\") {\n        body.should == ['firstName' | 'lastName'] {\n                        __________________________\n                              'FN1' |      'LN1'\n                              'FN2' |      'LN2'\n                              'FN3' |      'LN3' }\n    }\n\n    http.doc.capture('list-match')\n}","type":"Snippet"}]},{"title":"Order Agnostic Match","id":"order-agnostic-match","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"*key","type":"InlinedCode"},{"text":" column(s) if list order is not guaranteed","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.rest.springboot\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario(\"list Customers and assert with a Table Data using key column\") {\n    def id1 = createCustomer firstName: \"FN1\", lastName: \"LN1\"\n    def id2 = createCustomer firstName: \"FN2\", lastName: \"LN2\"\n    def id3 = createCustomer firstName: \"FN3\", lastName: \"LN3\"\n\n    http.get(\"/customers\") {\n        body.should == ['*id' | 'firstName' | 'lastName'] {\n                        _________________________________\n                          id2 |       'FN2' |      'LN2'\n                          id1 |       'FN1' |      'LN1'\n                          id3 |       'FN3' |      'LN3'}\n    }\n}\n\ndef createCustomer(Map payload) {\n    return http.post(\"/customers\", payload) { id }\n}","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"HTTP","pageTitle":"Complex Types","pageMeta":{},"dirName":"HTTP","fileName":"complex-types","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Contain","id":"contain"},{"title":"List Of Objects","id":"list-of-objects"},{"title":"Order Agnostic Match","id":"order-agnostic-match"}]}},{"type":"Page","content":[{"title":"Validation","id":"validation","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau supports validation of responses against an ","type":"SimpleText"},{"url":"https://www.openapis.org/","isFile":false,"type":"Link","content":[{"text":"OpenAPI specification","type":"SimpleText"}]},{"text":".  This feature can","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"be enabled by specifying the ","type":"SimpleText"},{"code":"openApiSpecUrl","type":"InlinedCode"},{"text":" configuration option.  This should be the URL to the specification against","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"which to validate.","type":"SimpleText"}]},{"lang":"groovy","snippet":"url = \"http://localhost:8080\"\nopenApiSpecUrl = \"scenarios/rest/springboot/api-spec.json\"","title":"Configuration","excludeRegexp":"docPath","type":"Snippet"}]},{"title":"Current limitations","id":"current-limitations","type":"Section","content":[{"type":"Paragraph","content":[{"text":"OpenAPI specification support is still in its early stage.  It is fully functional but there are a few limitations to be","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"aware of:","type":"SimpleText"}]},{"bulletMarker":"*","tight":true,"type":"BulletList","content":[{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"webtau currently only supports OpenAPI specification v2","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"specification matching is currently done based on the path and method","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"any HTTP requests which do not match any operation in the specification will not fail tests but will produce a warning","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"on the console","type":"SimpleText"}]}]}]}]},{"title":"Validations report","id":"validations-report","type":"Section","content":[{"type":"Paragraph","content":[{"text":"The validation errors are reported in the same manner as assertion errors.  They are available in the output from the","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"command line webtau runner:","type":"SimpleText"}]},{"lang":"bash","snippet":"> executing HTTP POST http://localhost:8080/customers\n {\n  \"id\": 1,\n  \"firstName\": \"FN\",\n  \"lastName\": \"LN\",\n  \"_links\": {\n    \"self\": {\n      \"href\": \"http://localhost:8080/customers/1\"\n    },\n    \"customer\": {\n      \"href\": \"http://localhost:8080/customers/1\"\n    }\n  }\n }\nX failed executing HTTP POST http://localhost:8080/customers : \nAPI spec validation failure: ERROR - Response status 201 not defined for path ''.: []\n[x] failed\njava.lang.AssertionError: \nAPI spec validation failure: ERROR - Response status 201 not defined for path ''.: []\n\tat scenarios.rest.springboot.customerCrud$_run_closure1.doCall(customerCrud.groovy:8)\n\tat scenarios.rest.springboot.customerCrud$_run_closure1.doCall(customerCrud.groovy)\n\n\n\nTotal: 1,  Passed: 0,  Skipped: 0,  Failed: 1,  Errored: 0\n","lineNumber":"","type":"Snippet"},{"type":"Paragraph","content":[{"text":"They are also available in the HTML report:","type":"SimpleText"}]},{"fit":true,"imageSrc":"/webtau/img/rest-crud-openapi-spec-validation-error.png","timestamp":1621036321256,"shapes":[],"width":2242.0,"height":620.0,"type":"AnnotatedImage"}]},{"title":"Validation Configuration","id":"validation-configuration","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To ignore additional properties in responses set ","type":"SimpleText"},{"code":"openApiIgnoreAdditionalProperties","type":"InlinedCode"},{"text":" to ","type":"SimpleText"},{"code":"true","type":"InlinedCode"},{"text":".","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"As any other config value it can be done via command line, config file or system properties.","type":"SimpleText"}]}]},{"title":"Disable Validation","id":"disable-validation","type":"Section","content":[{"lang":"groovy","snippet":"import org.testingisdocumenting.webtau.openapi.OpenApi","includeRegexp":"import.*Open","title":"Additional import","type":"Snippet"},{"lang":"groovy","snippet":"OpenApi.withoutValidation {\n    http.post(\"/employee\", [firstName: 'First']) {\n        // ...\n    }\n}","title":"Disable request and response validation","type":"Snippet"},{"lang":"groovy","snippet":"OpenApi.responseOnlyValidation() {\n    http.post(\"/employee\", [firstName: 'First']) {\n        // ...\n    }\n}","title":"Disable request validation","type":"Snippet"},{"lang":"groovy","snippet":"OpenApi.requestOnlyValidation() {\n    http.post(\"/employee\", [firstName: 'First', lastName: 'Second']) {\n        // ...\n    }\n}","title":"Disable response validation","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"HTTP","pageTitle":"OpenAPI Spec","pageMeta":{},"dirName":"HTTP","fileName":"openAPI-spec","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Validation","id":"validation"},{"title":"Current limitations","id":"current-limitations"},{"title":"Validations report","id":"validations-report"},{"title":"Validation Configuration","id":"validation-configuration"},{"title":"Disable Validation","id":"disable-validation"}]}},{"type":"Page","content":[{"title":"Validation","id":"validation","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau supports validation of objects against ","type":"SimpleText"},{"url":"https://json-schema.org/","isFile":false,"type":"Link","content":[{"text":"JSON Schema","type":"SimpleText"}]},{"text":".  It is possible to validate either","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"the entire body or just a specific field with the ","type":"SimpleText"},{"code":"complyWithSchema","type":"InlinedCode"},{"text":" matcher as shown in the two examples below:","type":"SimpleText"}]},{"lang":"groovy","snippet":"http.get(\"/weather\") {\n    body.should complyWithSchema('valid-schema.json')\n}","title":"Validate entire body against JSON schema","type":"Snippet"},{"lang":"groovy","snippet":"http.get(\"/city/London\") {\n    weather.should complyWithSchema('valid-schema.json')\n}","title":"Validate specific field against JSON schema","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Both examples above validate against the following schema:","type":"SimpleText"}]},{"title":"Correct schema for the example above","data":{"type":"object","required":["temperature"],"properties":{"temperature":{"type":"integer"}}},"paths":[],"type":"Json"}]},{"title":"Error messages","id":"error-messages","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Using the first example above, an invalid schema will generate an error similar to:","type":"SimpleText"}]},{"lang":"","snippet":"invalid schema (examples/scenarios/rest/jsonSchema/validateSchema.groovy)\n> executing HTTP GET http://localhost:8080/weather\n  X failed expecting body to comply with schema invalid-schema.json : \n      body expected to comply with schema invalid-schema.json\n      [#: required key [anotherField] not found, #/temperature: expected type: Boolean, found: Integer]\n{\n  \"temperature\": 88\n}\n","lineNumber":"","type":"Snippet"},{"type":"Paragraph","content":[{"text":"The schema used in validation to generate this error is as follows:","type":"SimpleText"}]},{"title":"Incorrect schema for the example above","data":{"type":"object","required":["temperature","anotherField"],"properties":{"temperature":{"type":"boolean"},"anotherField":{"type":"string"}}},"paths":[],"type":"Json"}]},{"title":"Configuration","id":"configuration","type":"Section","content":[{"type":"Paragraph","content":[{"text":"The path to the schema file specified in ","type":"SimpleText"},{"code":"complyWithSchema","type":"InlinedCode"},{"text":" can be relative or absolute.  If it's relative, it'll be","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"relative to the ","type":"SimpleText"},{"code":"jsonSchemasDir","type":"InlinedCode"},{"text":" specified in configuration and if not specified then relative to working directory.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"For example:","type":"SimpleText"}]},{"lang":"groovy","snippet":"url = \"http://localhost:8180\"\njsonSchemasDir = 'schemas'","title":"Configuration","excludeRegexp":"package","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"HTTP","pageTitle":"JSON Schema","pageMeta":{},"dirName":"HTTP","fileName":"JSON-schema","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Validation","id":"validation"},{"title":"Error messages","id":"error-messages"},{"title":"Configuration","id":"configuration"}]}},{"type":"Page","content":[{"title":"Location","id":"location","type":"Section","content":[{"type":"Paragraph","content":[{"text":"By default report is generated at ","type":"SimpleText"},{"code":"<workingdir>/webtau.report.html","type":"InlinedCode"},{"text":". To change the location use ","type":"SimpleText"},{"code":"--reportPath","type":"InlinedCode"},{"text":" option.","type":"SimpleText"}]}]},{"title":"Summary","id":"summary","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Out of the box report provides high level information like number of failed tests and HTTP Operations coverage.","type":"SimpleText"}]},{"fit":true,"imageSrc":"/webtau/doc-artifacts/reports/report-summary.png","timestamp":1621036896200,"shapes":[],"width":1200.0,"height":804.0,"type":"AnnotatedImage"}]},{"title":"Test Summary","id":"test-summary","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Selected test to see a summary information about test run","type":"SimpleText"}]},{"fit":true,"imageSrc":"/webtau/doc-artifacts/reports/report-test-summary.png","timestamp":1621036896588,"shapes":[],"width":1200.0,"height":804.0,"type":"AnnotatedImage"}]},{"title":"Navigation","id":"navigation","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Report is a self contained single page application.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Url tracks your navigation through screens, so you can share url with your teammates to narrow down a problem.","type":"SimpleText"}]}]},{"title":"Additional Reports","id":"additional-reports","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To generate custom reports or upload report data to your server, specify a ","type":"SimpleText"},{"code":"reportGenerator","type":"InlinedCode"},{"text":" config property.","type":"SimpleText"}]},{"lang":"groovy","snippet":"url = \"http://localhost:8080\"\n\nreportGenerator = Report.&generateReport","title":"webtau.cfg.groovy","excludeRegexp":"package","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Where ","type":"SimpleText"},{"code":"Report.&generateReport","type":"InlinedCode"},{"text":" is implemented as following","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.rest.report\n\nimport org.testingisdocumenting.webtau.console.ConsoleOutputs\nimport org.testingisdocumenting.webtau.console.ansi.Color\nimport org.testingisdocumenting.webtau.reporter.WebTauReport\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.cfg\n\nclass Report {\n    static void generateReport(WebTauReport report) {\n        def reportPath = cfg.workingDir.resolve('report.txt')\n\n        ConsoleOutputs.out('generating report: ', Color.PURPLE, reportPath)\n        reportPath.toFile().text = report.tests.size()\n    }\n}","title":"scenarios/rest/report/Report.groovy","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"HTTP","pageTitle":"Report","pageMeta":{},"dirName":"HTTP","fileName":"report","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Location","id":"location"},{"title":"Summary","id":"summary"},{"title":"Test Summary","id":"test-summary"},{"title":"Navigation","id":"navigation"},{"title":"Additional Reports","id":"additional-reports"}]}},{"type":"Page","content":[{"title":"Dependency","id":"dependency","type":"Section","content":[{"type":"Paragraph","content":[{"text":"You can use maven to add webtau as a dependency to you project (for autocompletion or to use with JUnit like runners).","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"xml","snippet":"<dependency>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau-groovy</artifactId>\n    <version>1.41</version>\n</dependency>","type":"Snippet"}]},{"name":"Java","content":[{"lang":"xml","snippet":"<dependency>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau</artifactId>\n    <version>1.41</version>\n</dependency>","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Plugin","id":"plugin","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use maven plugin to run pure groovy tests as part of your build.","type":"SimpleText"}]},{"lang":"xml","snippet":"<plugin>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau-maven-plugin</artifactId>\n    <version>1.41</version>\n    <executions>\n        <execution>\n            <phase>test</phase>\n            <goals>\n                <goal>run</goal>\n            </goals>\n        </execution>\n    </executions>\n    <configuration>\n        <workingDir>${project.basedir}/src/main/groovy</workingDir>\n        <env>integration</env>\n        <url>http://optional-base-url</url>\n        <tests>\n            <directory>${project.basedir}/src/main/groovy</directory>\n            <includes>\n                <include>scenarios/simple*.groovy</include>\n            </includes>\n        </tests>\n    </configuration>\n</plugin>","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"env","type":"InlinedCode"},{"text":" to specify ","type":"SimpleText"},{"url":"/webtau/configuration/environments","isFile":false,"type":"Link","content":[{"text":"environment to use","type":"SimpleText"}]},{"text":".","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Alternatively you can use ","type":"SimpleText"},{"code":"url","type":"InlinedCode"},{"text":" to override base url.","type":"SimpleText"}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"HTTP","pageTitle":"Maven","pageMeta":{},"dirName":"HTTP","fileName":"maven","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Dependency","id":"dependency"},{"title":"Plugin","id":"plugin"}]}},{"type":"Page","content":[{"title":"Imports to use","id":"imports-to-use","type":"Section","content":[{"lang":"groovy","snippet":"import static org.testingisdocumenting.webtau.WebTauGroovyDsl.*","includeRegexp":"import.*Dsl","title":"Single import to use","type":"Snippet"}]},{"title":"Response Mapping","id":"response-mapping","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Identifiers inside validation closure are automatically mapped to a response body.","type":"SimpleText"}]},{"meta":{"rightSide":true},"type":"EmptyBlock"},{"title":"object response","meta":{"rightSide":false},"data":{"id":"id1","k1":"v1","k2":"v2"},"paths":[],"type":"Json"},{"meta":{"rightSide":true},"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"http.get(\"/end-point-simple-object\") {\n    k1.should == 'v1'\n}","entry":"simple object mapping example","bodyOnly":true,"excludeRegexp":"doc.capture","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"http.get(\"/end-point-simple-object\", (header, body) -> {\n    body.get(\"k1\").should(equal(\"v1\"));\n});","entry":"simpleObjectMappingExample","bodyOnly":true,"excludeRegexp":"doc.capture","type":"Snippet"}]}],"type":"Tabs"},{"type":"Paragraph","content":[{"text":"List responses are handled by using index chain","type":"SimpleText"}]},{"meta":{"rightSide":true},"type":"EmptyBlock"},{"title":"list response","data":[{"id":"id1","k1":"v1","k2":"v2"}],"paths":[],"type":"Json"},{"meta":{"rightSide":true},"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"http.get(\"/end-point-simple-list\") {\n    body[0].k1.should == 'v1'\n}","entry":"simple list mapping example","bodyOnly":true,"excludeRegexp":"doc.capture","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: Groovy API implicitly assumes ","type":"SimpleText"},{"code":"body","type":"InlinedCode"},{"text":", but if you need to deal with array response you need to access values using ","type":"SimpleText"},{"code":"body","type":"InlinedCode"},{"text":" explicitly.","type":"SimpleText"}]}]},{"name":"Java","content":[{"lang":"java","snippet":"http.get(\"/end-point-simple-list\", (header, body) -> {\n    body.get(0).get(\"k1\").should(equal(\"v1\"));\n});","entry":"simpleListMappingExample","bodyOnly":true,"excludeRegexp":"doc.capture","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Should and Should Not","id":"should-and-should-not","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Matchers in webtau are triggered with ","type":"SimpleText"},{"code":"should","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"shouldNot","type":"InlinedCode"},{"text":" keywords.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Additionally ","type":"SimpleText"},{"code":"shouldBe","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"shouldNotBe","type":"InlinedCode"},{"text":" alias keywords are available to make certain matcher combinations easier to read.","type":"SimpleText"}]},{"meta":{"rightSide":true},"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"http.get(\"/example\") {\n    year.shouldNot == 2000\n    year.should != 2000  // alternative shortcut\n    genres.should contain('RPG')\n    rating.shouldBe > 7\n}","entry":"matchers basic example","bodyOnly":true,"excludeRegexp":"doc.capture","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"http.get(\"/example\", (header, body) -> {\n    body.get(\"year\").shouldNot(equal(2000));\n    body.get(\"genres\").should(contain(\"RPG\"));\n    body.get(\"rating\").shouldBe(greaterThan(7));\n});","entry":"matchersBasicExample","bodyOnly":true,"excludeRegexp":"doc.capture","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Equality","id":"equality","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau defines its own set of equality rules to simplify testing.","type":"SimpleText"}]},{"meta":{"rightSide":true},"type":"EmptyBlock"},{"title":"response","pathsFile":"doc-artifacts/end-point-object-equality-matchers/paths.json","data":{"id":10,"price":100,"amount":30,"list":[1,2,3],"object":{"k1":"v1","k2":"v2","k3":"v3"},"complexList":[{"id":"id1","k1":"v1","k2":30},{"id":"id2","k1":"v11","k2":40}]},"paths":["root.id","root.amount","root.list[0]","root.list[1]","root.list[2]","root.object.k1","root.object.k3","root.complexList[0].k1","root.complexList[0].k2","root.complexList[1].k1","root.complexList[1].k2"],"type":"Json"},{"meta":{"rightSide":true},"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"http.get(\"/end-point\") {\n    id.should != 0\n    amount.should == 30\n\n    list.should == [1, 2, 3]\n\n    object.k1.should == ~/v\\d/ // regular expression matching\n\n    object.should == [k1: 'v1', k3: 'v3'] // matching only specified fields and can be nested multiple times\n\n    complexList.should == [\"k1\"   | \"k2\"] { // matching only specified fields, but number of entries must be exact\n                           ________________\n                            \"v1\"  | 30\n                            \"v11\" | 40 }\n}","entry":"equality matcher","bodyOnly":true,"commentsType":"inline","excludeRegexp":"doc.capture","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"http.get(\"/end-point\", (header, body) -> {\n    body.get(\"id\").shouldNot(equal(0));\n    body.get(\"amount\").should(equal(30));\n\n    body.get(\"list\").should(equal(Arrays.asList(1, 2, 3)));\n\n    body.get(\"object\").get(\"k1\").should(equal(\n            Pattern.compile(\"v\\\\d\"))); // regular expression matching\n\n    body.get(\"object\").should(equal(aMapOf(\n            \"k1\", \"v1\",\n            \"k3\", \"v3\"))); // matching only specified fields and can be nested multiple times\n\n    body.get(\"complexList\").should(equal(table(\"k1\" , \"k2\", // matching only specified fields, but number of entries must be exact\n                                              ________________,\n                                               \"v1\" ,  30,\n                                               \"v11\",  40)));\n});","entry":"equalityMatcher","bodyOnly":true,"commentsType":"inline","excludeRegexp":"doc.capture","type":"Snippet"}]}],"type":"Tabs"},{"meta":{"rightSide":true},"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"http.get(\"/end-point\") {\n    complexList.should == [ \"*id\" | \"k1\"  | \"k2\"] { // order agnostic key based match\n                           ________________________\n                            \"id2\" | \"v11\" | 40\n                            \"id1\" | \"v1\"  | 30 }\n}","entry":"equality matcher table keys","bodyOnly":true,"commentsType":"inline","excludeRegexp":"doc.capture","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"http.get(\"/end-point\", (header, body) -> {\n    body.get(\"complexList\").should(equal(table(\"*id\", \"k1\" , \"k2\", // order agnostic key based match\n                                               ________________,\n                                               \"id2\", \"v11\", 40,\n                                               \"id1\", \"v1\" , 30)));\n});","entry":"equalityMatcherTableKey","bodyOnly":true,"commentsType":"inline","excludeRegexp":"doc.capture","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Greater/Less/Equal","id":"greaterlessequal","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"greaterThan","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"greaterThanOrEqual","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"lessThan","type":"InlinedCode"},{"text":", and ","type":"SimpleText"},{"code":"lessThanOrEqual","type":"InlinedCode"},{"text":" to assert numeric values.","type":"SimpleText"}]},{"meta":{"rightSide":true},"type":"EmptyBlock"},{"title":"response","pathsFile":"doc-artifacts/end-point-numbers-matchers/paths.json","data":{"id":10,"price":100,"amount":30,"list":[1,2,3]},"paths":["root.id","root.price","root.amount","root.list[1]"],"type":"Json"},{"meta":{"rightSide":true},"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"http.get(\"/end-point-numbers\") {\n    id.shouldBe > 0\n    price.shouldBe >= 100\n    amount.shouldBe < 150\n    list[1].shouldBe <= 2\n\n    id.shouldNotBe <= 0\n    price.shouldNotBe < 100\n    amount.shouldNotBe >= 150\n    list[1].shouldNotBe > 2\n}","entry":"compare numbers with greater less matchers","bodyOnly":true,"excludeRegexp":"doc.capture","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: ","type":"SimpleText"},{"code":"Groovy","type":"InlinedCode"},{"text":" can use shortcuts ","type":"SimpleText"},{"code":">","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":">=","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"<","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"<=","type":"InlinedCode"},{"text":".","type":"SimpleText"}]}]},{"name":"Java","content":[{"lang":"java","snippet":"http.get(\"/end-point-numbers\", (header, body) -> {\n    body.get(\"id\").shouldBe(greaterThan(0));\n    body.get(\"price\").shouldBe(greaterThanOrEqual(100));\n    body.get(\"amount\").shouldBe(lessThan(150));\n    body.get(\"list\").get(1).shouldBe(lessThanOrEqual(2));\n\n    body.get(\"id\").shouldNotBe(lessThanOrEqual(0));\n    body.get(\"price\").shouldNotBe(lessThan(100));\n    body.get(\"amount\").shouldNotBe(greaterThanOrEqual(150));\n    body.get(\"list\").get(1).shouldNotBe(greaterThan(2));\n});","entry":"compareNumbersWithGreaterLessMatchers","bodyOnly":true,"excludeRegexp":"doc.capture","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Contain","id":"contain","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"contain","type":"InlinedCode"},{"text":" when you cannot rely on order of values in a response.","type":"SimpleText"}]},{"meta":{"rightSide":true},"type":"EmptyBlock"},{"title":"response","pathsFile":"doc-artifacts/end-point-list-contain-matchers/paths.json","data":[{"id":"id1","k1":"v1","k2":"v2"},{"id":"id2","k1":"v11","k2":[10,20,30]}],"paths":["root[0].k1","root[0].k2","root[1].k2[0]","root[1].k2[1]","root[1].k2[2]"],"type":"Json"},{"meta":{"rightSide":true},"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"http.get(\"/end-point-list\") {\n    body.should contain([k1: 'v1', k2: 'v2'])\n    body[1].k2.shouldNot contain(22)\n}","entry":"contain matcher","bodyOnly":true,"excludeRegexp":"doc.capture","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"http.get(\"/end-point-list\", (header, body) -> {\n    body.should(contain(aMapOf(\n            \"k1\", \"v1\",\n            \"k2\", \"v2\")));\n    body.get(1).get(\"k2\").shouldNot(contain(22));\n});","entry":"containMatcher","bodyOnly":true,"excludeRegexp":"doc.capture","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Contain All","id":"contain-all","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"containAll","type":"InlinedCode"},{"text":" when you cannot rely on order of values in a response and need to check more than one value.","type":"SimpleText"}]},{"meta":{"rightSide":true},"type":"EmptyBlock"},{"title":"response","pathsFile":"doc-artifacts/end-point-list-contain-all-matchers/paths.json","data":[{"id":"id1","k1":"v1","k2":"v2"},{"id":"id2","k1":"v11","k2":[10,20,30]}],"paths":["root[1].k2[0]","root[1].k2[1]","root[1].k2[2]"],"type":"Json"},{"meta":{"rightSide":true},"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"http.get(\"/end-point-list\") {\n    body[1].k2.should containAll(10, 30)\n    body[1].k2.shouldNot containAll(40, 60, 80)\n}","entry":"contain all matcher","bodyOnly":true,"excludeRegexp":"doc.capture","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"http.get(\"/end-point-list\", (header, body) -> {\n    body.get(1).get(\"k2\").should(containAll(10, 30));\n    body.get(1).get(\"k2\").shouldNot(containAll(40, 60, 80));\n});","entry":"containAllMatcher","bodyOnly":true,"excludeRegexp":"doc.capture","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Nested Contain All","id":"nested-contain-all","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"containingAll","type":"InlinedCode"},{"text":" alias to make it easier to read ","type":"SimpleText"},{"code":"containAll","type":"InlinedCode"},{"text":" matcher nested inside ","type":"SimpleText"},{"code":"contain","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"meta":{"rightSide":true},"type":"EmptyBlock"},{"title":"response","pathsFile":"doc-artifacts/prices-contain-containing-all/paths.json","data":[{"id":"game1","prices":[15,30,40,60]},{"id":"game2","prices":[10,30]}],"paths":[],"type":"Json"},{"meta":{"rightSide":true},"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"http.get(\"/prices\") {\n    body.prices.should contain(containingAll(10, 30))\n}","entry":"contain containing all matcher","bodyOnly":true,"excludeRegexp":"doc.capture","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"http.get(\"/prices\", (header, body) -> {\n    body.get(\"prices\").should(contain(containingAll(10, 30)));\n});","entry":"containContainingAllMatcher","bodyOnly":true,"excludeRegexp":"doc.capture","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Date and Time","id":"date-and-time","type":"Section","content":[{"type":"Paragraph","content":[{"text":"You can assert ","type":"SimpleText"},{"code":"actual","type":"InlinedCode"},{"text":" string against ","type":"SimpleText"},{"code":"LocalDate","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"ZonedDateTime","type":"InlinedCode"},{"text":". String will be automatically converted","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"using ISO formatter.","type":"SimpleText"}]},{"meta":{"rightSide":true},"type":"EmptyBlock"},{"title":"response","pathsFile":"doc-artifacts/end-point-dates-matchers/paths.json","data":{"id":54,"tradeDate":"2018-06-12","transactionTime":"2018-06-12T10:00:00+01:00:00","paymentSchedule":["2018-06-12","2018-07-10","2018-08-09","2018-09-12"]},"paths":["root.tradeDate","root.transactionTime","root.paymentSchedule[0]"],"type":"Json"},{"meta":{"rightSide":true},"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"http.get(\"/end-point-dates\") {\n    def expectedDate = LocalDate.of(2018, 6, 12)\n    def expectedTime = ZonedDateTime.of(expectedDate,\n        LocalTime.of(9, 0, 0),\n        ZoneId.of(\"UTC\"))\n\n    tradeDate.should == expectedDate\n    transactionTime.should == expectedTime\n    transactionTime.shouldBe >= expectedDate\n\n    paymentSchedule.should contain(expectedDate)\n}","entry":"working with dates","bodyOnly":true,"excludeRegexp":"doc.capture","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"http.get(\"/end-point-dates\", (header, body) -> {\n    LocalDate expectedDate = LocalDate.of(2018, 6, 12);\n    ZonedDateTime expectedTime = ZonedDateTime.of(expectedDate,\n            LocalTime.of(9, 0, 0),\n            ZoneId.of(\"UTC\"));\n\n    body.get(\"tradeDate\").should(equal(expectedDate));\n    body.get(\"transactionTime\").should(equal(expectedTime));\n    body.get(\"transactionTime\").shouldBe(greaterThanOrEqual(expectedDate));\n\n    body.get(\"paymentSchedule\").should(contain(expectedDate));\n});","entry":"workingWithDates","bodyOnly":true,"excludeRegexp":"doc.capture","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Mixing Matchers","id":"mixing-matchers","type":"Section","content":[{"type":"Paragraph","content":[{"text":"You can use matchers in place of expected values to build a more complex expectation.","type":"SimpleText"}]},{"meta":{"rightSide":true},"type":"EmptyBlock"},{"title":"response","pathsFile":"doc-artifacts/end-point-mixing-matchers/paths.json","data":{"list":[1,2,3],"object":{"k1":"v1","k2":"v2","k3":"v3"},"complexList":[{"id":"id1","k1":"v1","k2":100},{"id":"id2","k1":"v11","k2":200}]},"paths":["root.list[0]","root.list[1]","root.object.k1","root.object.k3","root.complexList[0].k1","root.complexList[0].k2","root.complexList[1].k1","root.complexList[1].k2"],"type":"Json"},{"meta":{"rightSide":true},"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"http.get(\"/end-point-mixed\") {\n    list.should contain(lessThanOrEqual(2)) // lessThanOrEqual will be matched against each value\n\n    object.should == [k1: 'v1', k3: ~/v\\d/] // regular expression match against k3\n\n    complexList[0].should == [k1: 'v1', k2: lessThan(120)] // lessThen match against k2\n\n    complexList[1].should == [\n        k1: notEqual('v1'), // any value but v1\n        k2: greaterThanOrEqual(120)]\n\n    complexList.should == [\"k1\"   | \"k2\"] {\n                          ___________________________\n                           ~/v\\d/ | lessThan(120)\n                            \"v11\" | greaterThan(150) } // using matchers as cell values\n}","entry":"matchers combo","bodyOnly":true,"commentsType":"inline","excludeRegexp":"doc.capture","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"Pattern withNumber = Pattern.compile(\"v\\\\d\");\n\nhttp.get(\"/end-point-mixed\", (header, body) -> {\n    body.get(\"list\").should(contain(lessThanOrEqual(2))); // lessThanOrEqual will be matched against each value\n\n    body.get(\"object\").should(equal(aMapOf(\n            \"k1\", \"v1\",\n            \"k3\", withNumber))); // regular expression match against k3\n\n    body.get(\"complexList\").get(0).should(equal(aMapOf(\n            \"k1\", \"v1\",\n            \"k2\", lessThan(120)))); // lessThen match against k2\n\n    body.get(\"complexList\").get(1).should(equal(aMapOf(\n            \"k1\", notEqual(\"v1\"), // any value but v1\n            \"k2\", greaterThanOrEqual(120))));\n\n    TableData expected = table(\"k1\"        , \"k2\", // matching only specified fields, but number of entries must be exact\n                               ________________________________,\n                                withNumber , lessThan(120),\n                                \"v11\"      , greaterThan(150));\n\n    body.get(\"complexList\").should(equal(expected));\n});","entry":"matchersCombo","bodyOnly":true,"commentsType":"inline","excludeRegexp":"doc.capture","type":"Snippet"}]}],"type":"Tabs"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"HTTP","pageTitle":"Matchers","pageMeta":{"type":["two-sides"]},"dirName":"HTTP","fileName":"matchers","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Imports to use","id":"imports-to-use"},{"title":"Response Mapping","id":"response-mapping"},{"title":"Should and Should Not","id":"should-and-should-not"},{"title":"Equality","id":"equality"},{"title":"Greater/Less/Equal","id":"greaterlessequal"},{"title":"Contain","id":"contain"},{"title":"Contain All","id":"contain-all"},{"title":"Nested Contain All","id":"nested-contain-all"},{"title":"Date and Time","id":"date-and-time"},{"title":"Mixing Matchers","id":"mixing-matchers"}]}},{"type":"Page","content":[{"type":"Paragraph","content":[{"text":"The Webtau ","type":"SimpleText"},{"code":"graphql.","type":"InlinedCode"},{"text":" module lets you exercise and validate a GraphQL API.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"It provides a simplified way to access the JSON response of an end-point and provides a DSL to execute queries and mutations.","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"columns":[{"content":[{"lang":"groovy","snippet":"package scenarios.rest\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario(\"check weather\") {\n    def query = \"{ weather { temperature } }\";\n    graphql.execute(query) {\n        weather.temperature.shouldBe < 100\n    }\n}","title":"GraphQL API test (Groovy specific runner)","type":"Snippet"},{"lang":"groovy","snippet":"package com.example.tests.junit4\n\nimport org.junit.Test\nimport org.junit.runner.RunWith\nimport org.testingisdocumenting.webtau.junit4.WebTauRunner\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.graphql\n\n@RunWith(WebTauRunner.class)\nclass GraphQLWeatherGroovyIT {\n    @Test\n    void checkWeather() {\n        def query = \"{ weather { temperature } }\";\n        graphql.execute(query) {\n            weather.temperature.shouldBe < 100\n        }\n    }\n}","title":"GraphQL API test (JUnit4)","type":"Snippet"}]},{"content":[{"lang":"json","snippet":"{\n \"data\": {\n   \"weather\": {\n     \"temperature\": 88\n   }\n }\n}\n","lineNumber":"","title":"Server Response","type":"Snippet"}]}],"config":{},"type":"Columns"}]},{"name":"Java","content":[{"columns":[{"content":[{"lang":"java","snippet":"package com.example.tests.junit4;\n\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.testingisdocumenting.webtau.junit4.WebTauRunner;\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*;\n\n@RunWith(WebTauRunner.class)\npublic class GraphQLWeatherJavaIT {\n    @Test\n    public void checkWeather() {\n        String query = \"{ weather { temperature } }\";\n        graphql.execute(query, (header, body) -> {\n            body.get(\"data.weather.temperature\").shouldBe(lessThan(100));\n        });\n    }\n}","title":"GraphQL API test (JUnit4 Java)","type":"Snippet"}]},{"content":[{"lang":"json","snippet":"{\n \"data\": {\n   \"weather\": {\n     \"temperature\": 88\n   }\n }\n}\n","lineNumber":"","title":"Server Response","type":"Snippet"}]}],"config":{},"type":"Columns"}]}],"type":"Tabs"},{"type":"Paragraph","content":[{"text":"Before diving further into writing tests for your GraphQL server, please read through the HTTP testing documentation","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"starting with the ","type":"SimpleText"},{"url":"/webtau/HTTP/data-node","isFile":false,"type":"Link","content":[{"text":"Data node page","type":"SimpleText"}]},{"text":" as much of the same core principles apply to GraphQL also.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"The main GraphQL specific features are covered in the subsequent pages:","type":"SimpleText"}]},{"bulletMarker":"*","tight":true,"type":"BulletList","content":[{"type":"ListItem","content":[{"type":"Paragraph","content":[{"url":"/webtau/GraphQL/queries-and-mutations","isFile":false,"type":"Link","content":[{"text":"Queries and Mutations","type":"SimpleText"}]}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"url":"/webtau/GraphQL/customized-graphql-urls","isFile":false,"type":"Link","content":[{"text":"Customized GraphQL URLs","type":"SimpleText"}]}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"url":"/webtau/GraphQL/report","isFile":false,"type":"Link","content":[{"text":"Report","type":"SimpleText"}]}]}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"GraphQL","pageTitle":"Introduction","pageMeta":{},"dirName":"GraphQL","fileName":"introduction","viewOnRelativePath":null,"pageSectionIdTitles":[]}},{"type":"Page","content":[{"title":"Executing Queries and Mutations","id":"executing-queries-and-mutations","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau follows GraphQL's ","type":"SimpleText"},{"url":"https://graphql.org/learn/serving-over-http/","isFile":false,"type":"Link","content":[{"text":"Serving over HTTP best practices","type":"SimpleText"}]},{"text":" when invoking","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"GraphQL servers over HTTP.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"It therefore assumes the server responds to requests to ","type":"SimpleText"},{"code":"/graphql","type":"InlinedCode"},{"text":" so you do not need to specify that in the URL in your configuration.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Requests allow providing:","type":"SimpleText"}]},{"bulletMarker":"*","tight":true,"type":"BulletList","content":[{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"a query/mutation string","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"variables","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"an operation name","type":"SimpleText"}]}]}]},{"type":"Paragraph","content":[{"text":"Webtau will default to issuing ","type":"SimpleText"},{"code":"POST","type":"InlinedCode"},{"text":" requests according to the ","type":"SimpleText"},{"url":"https://graphql.org/learn/serving-over-http/#post-request","isFile":false,"type":"Link","content":[{"text":"best practices","type":"SimpleText"}]},{"type":"SoftLineBreak"},{"text":"and will expect a 200 status code and a response with a ","type":"SimpleText"},{"code":"data","type":"InlinedCode"},{"text":" or ","type":"SimpleText"},{"code":"errors","type":"InlinedCode"},{"text":" field.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"The following example demonstrates most of these query features:","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.graphql\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\ndef listAllQuery = '''\n{\n    allTasks(uncompletedOnly: false) {\n        id\n        description\n    }\n}\n'''\n\ndef taskByIdQuery = '''\nquery taskById($id: ID!) {\n    taskById(id: $id) {\n        id\n        description\n        completed\n    }\n}\n'''\n\ndef completeMutation = '''\nmutation complete($id: ID!) {\n    complete(id: $id)\n}\n'''\n\nscenario(\"list all tasks\") {\n    graphql.execute(listAllQuery) { // Execute a simple query with no variables\n        errors.should == null // Validate there were no errors\n        body.data.allTasks.id.should == [\"a\", \"b\", \"c\"] // Access response data with the full path\n        allTasks.id.should == [\"a\", \"b\", \"c\"] // Access response data via a shortcut allowing omitting of `body.data`\n        id.should == [\"a\", \"b\", \"c\"] // For single query requests, access response data via a shortcut allowing omitting of `body.data` and the query name\n    }\n}\n\nscenario(\"complete a task\") {\n    graphql.execute(completeMutation, [id: \"a\"]) { // Execute a mutation with a variables map\n        errors.should == null\n        complete.should == true\n    }\n\n    graphql.execute(taskByIdQuery, [id: \"a\"]) {\n        errors.should == null\n        taskById.id.should == \"a\"\n        taskById.completed.should == true\n    }\n}\n\nscenario(\"cannot complete a completed task\") {\n    graphql.execute(completeMutation, [id: \"b\"]) { // Execute a mutation with a variables map\n        errors.should == null\n        complete.should == true\n    }\n    graphql.execute(completeMutation, [id: \"b\"]) { // force an error\n        errors[0].message.shouldNot == null\n        complete.should == null\n    }\n}","title":"GraphQL example with a query, a mutation and variables","commentsType":"inline","type":"Snippet"}]},{"title":"Response Assertions","id":"response-assertions","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Response assertions follow a similar pattern to REST APIs.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"For Groovy specifically, there are shortcuts for accessing data in the response directly as demonstrated in the example above.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"You may access errors directly via ","type":"SimpleText"},{"code":"errors","type":"InlinedCode"},{"text":" or fields in the response directly with the field names, omitting the ","type":"SimpleText"},{"code":"data","type":"InlinedCode"},{"text":" field.","type":"SimpleText"}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"GraphQL","pageTitle":"Queries And Mutations","pageMeta":{},"dirName":"GraphQL","fileName":"queries-and-mutations","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Executing Queries and Mutations","id":"executing-queries-and-mutations"},{"title":"Response Assertions","id":"response-assertions"}]}},{"type":"Page","content":[{"title":"Customizing the GraphQL Endpoint","id":"customizing-the-graphql-endpoint","type":"Section","content":[{"type":"Paragraph","content":[{"text":"By default, webtau assumes that all requests are made to a ","type":"SimpleText"},{"code":"/graphql","type":"InlinedCode"},{"text":" endpoint. The config value ","type":"SimpleText"},{"code":"graphQLEndpoint","type":"InlinedCode"},{"text":" can be set to use a non-standard endpoint, e.g. ","type":"SimpleText"},{"code":"graphQLEndpoint=/api/graphql","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Webtau also decorates the query with a (typically ignored) query parameter that contains the request's ","type":"SimpleText"},{"code":"operationName","type":"InlinedCode"},{"text":", e.g. ","type":"SimpleText"},{"code":"/graphql?operation=myOperation","type":"InlinedCode"},{"text":". This makes execution logs as well as webtau's step reports easier to read and debug, especially since the operation's name is part of the request's payload and is usually not logged by request loggers.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"If you want to turn this feature off, set the config value for ","type":"SimpleText"},{"code":"graphQLShowOperationAsQueryParam","type":"InlinedCode"},{"text":" to ","type":"SimpleText"},{"code":"false","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"In order to customize the graphQL URL in different ways, you need to implement a ","type":"SimpleText"},{"code":"GraphQLHttpConfiguration","type":"InlinedCode"},{"text":" and ensure it gets loaded at runtime via the Java ServiceLoader.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Here is an example in groovy:","type":"SimpleText"}]},{"lang":"groovy","snippet":"package org.testingisdocumenting.webtau.graphql\n\nimport org.testingisdocumenting.webtau.graphql.config.GraphQLHttpConfiguration\nimport org.testingisdocumenting.webtau.graphql.model.GraphQLRequest\n\nclass CustomGraphQLHttpConfiguration implements GraphQLHttpConfiguration {\n    // Note: our test server requires the graphql endpoint to start with \"graphql\"\n    public static final CUSTOM_GRAPHQL_ENDPOINT = 'graphql-custom'\n\n    @Override\n    String requestUrl(String url, GraphQLRequest graphQLRequest) {\n        if (null != graphQLRequest.operationName && !graphQLRequest.operationName.isEmpty()) {\n            return \"${CUSTOM_GRAPHQL_ENDPOINT}?operation=${graphQLRequest.operationName}\"\n        }\n        return url\n    }\n}","title":"Customized GraphQLHttpConfiguration adding the operation to the URL","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"GraphQL","pageTitle":"Customized Graphql Urls","pageMeta":{},"dirName":"GraphQL","fileName":"customized-graphql-urls","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Customizing the GraphQL Endpoint","id":"customizing-the-graphql-endpoint"}]}},{"type":"Page","content":[{"title":"Additional Reports","id":"additional-reports","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To generate custom reports or upload report data to your server, specify a ","type":"SimpleText"},{"code":"reportGenerator","type":"InlinedCode"},{"text":" config property.","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.graphql\n\nurl = \"http://localhost:8180\"\n\ngraphQLIgnoreIntrospectionFailures = false\n\nreportGenerator = Report.&generateReport","title":"webtau.cfg.groovy","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Where ","type":"SimpleText"},{"code":"Report.&generateReport","type":"InlinedCode"},{"text":" is implemented as follows:","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.graphql\n\n\nimport org.testingisdocumenting.webtau.console.ConsoleOutputs\nimport org.testingisdocumenting.webtau.console.ansi.Color\nimport org.testingisdocumenting.webtau.report.ReportDataProviders\nimport org.testingisdocumenting.webtau.reporter.WebTauReport\nimport org.testingisdocumenting.webtau.utils.JsonUtils\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.cfg\n\nclass Report {\n    static void generateReport(WebTauReport report) {\n        def additionalData = [:]\n        ReportDataProviders.provide(report.tests)\n            .map { it.toMap() }\n            .forEach { additionalData.putAll(it) }\n\n        def reportData = [:]\n        reportData.graphQLSkippedQueries = additionalData.graphQLSkippedQueries // All queries present in the GraphQL schema but not tested\n        reportData.graphQLCoveredQueries = additionalData.graphQLCoveredQueries // All queries present in the GraphQL schema and tested\n        reportData.graphQLCoverageSummary = additionalData.graphQLCoverageSummary // Summary of test coverage compared to the GraphQL schema\n        reportData.graphQLQueryTimeStatistics = additionalData.graphQLQueryTimeStatistics // Summary of timing by query\n        reportData.graphQLCoveredSuccessBranches = additionalData.graphQLCoveredSuccessBranches // All queries present in the GraphQL schema that were hit with a success result\n        reportData.graphQLSkippedSuccessBranches = additionalData.graphQLSkippedSuccessBranches // All queries present in the GraphQL schema but not hit with a success result\n        reportData.graphQLCoveredErrorBranches = additionalData.graphQLCoveredErrorBranches // All queries present in the GraphQL schema that were hit with an error result\n        reportData.graphQLSkippedErrorBranches = additionalData.graphQLSkippedErrorBranches // All queries present in the GraphQL schema but not hit with an error result\n\n        def reportPath = cfg.workingDir.resolve('webtau.graphql-report.json')\n        ConsoleOutputs.out('generating report: ', Color.PURPLE, reportPath)\n\n        reportPath.toFile().text = JsonUtils.serializePrettyPrint(reportData)\n    }\n}","title":"scenarios/graphql/Report.groovy","commentsType":"inline","type":"Snippet"},{"type":"Paragraph","content":[{"text":"The output looks as follows:","type":"SimpleText"}]},{"lang":"json","snippet":"{\n  \"graphQLSkippedQueries\" : [ {\n    \"name\" : \"uncomplete\",\n    \"type\" : \"mutation\"\n  }, {\n    \"name\" : \"taskById\",\n    \"type\" : \"query\"\n  }, {\n    \"name\" : \"allTasks\",\n    \"type\" : \"query\"\n  }, {\n    \"name\" : \"complete\",\n    \"type\" : \"mutation\"\n  } ],\n  \"graphQLCoveredQueries\" : [ {\n    \"name\" : \"weather\",\n    \"type\" : \"query\"\n  } ],\n  \"graphQLCoverageSummary\" : {\n    \"coverage\" : 0.2,\n    \"branchCoverage\" : 0.1,\n    \"types\" : {\n      \"mutation\" : {\n        \"coverage\" : 0.0,\n        \"declaredQueries\" : 2,\n        \"coveredQueries\" : 0.0\n      },\n      \"query\" : {\n        \"coverage\" : 0.3333333333333333,\n        \"declaredQueries\" : 3,\n        \"coveredQueries\" : 1.0\n      }\n    },\n    \"successBranchCoverage\" : 0.2,\n    \"errorBranchCoverage\" : 0.0,\n    \"totalDeclaredQueries\" : 5.0,\n    \"totalCoveredQueries\" : 1.0\n  },\n  \"graphQLQueryTimeStatistics\" : [ {\n    \"name\" : \"weather\",\n    \"type\" : \"query\",\n    \"statistics\" : {\n      \"mean\" : 3.0,\n      \"min\" : 3,\n      \"max\" : 3,\n      \"count\" : 1,\n      \"p95\" : 3.0,\n      \"p99\" : 3.0\n    }\n  } ],\n  \"graphQLCoveredSuccessBranches\" : [ {\n    \"name\" : \"weather\",\n    \"type\" : \"query\"\n  } ],\n  \"graphQLSkippedSuccessBranches\" : [ {\n    \"name\" : \"uncomplete\",\n    \"type\" : \"mutation\"\n  }, {\n    \"name\" : \"taskById\",\n    \"type\" : \"query\"\n  }, {\n    \"name\" : \"allTasks\",\n    \"type\" : \"query\"\n  }, {\n    \"name\" : \"complete\",\n    \"type\" : \"mutation\"\n  } ],\n  \"graphQLCoveredErrorBranches\" : [ ],\n  \"graphQLSkippedErrorBranches\" : [ {\n    \"name\" : \"weather\",\n    \"type\" : \"query\"\n  }, {\n    \"name\" : \"uncomplete\",\n    \"type\" : \"mutation\"\n  }, {\n    \"name\" : \"taskById\",\n    \"type\" : \"query\"\n  }, {\n    \"name\" : \"allTasks\",\n    \"type\" : \"query\"\n  }, {\n    \"name\" : \"complete\",\n    \"type\" : \"mutation\"\n  } ]\n}","title":"webtau.graphql-report.json","type":"Snippet"},{"level":2,"title":"Coverage and Timing Statistics","id":"additional-reports-coverage-and-timing-statistics","type":"SubHeading"},{"type":"Paragraph","content":[{"text":"Webtau will implicitly invoke your GraphQL server's introspection queries in order to fetch a subset of the schema.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"It uses this schema in conjunction with the requests in tests to compute:","type":"SimpleText"}]},{"bulletMarker":"*","tight":true,"type":"BulletList","content":[{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"query coverage - which queries were invoked by tests and which were not as well as an overall summary of coverage","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"timing information - http call timing statistics by query","type":"SimpleText"}]}]}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"GraphQL","pageTitle":"Report","pageMeta":{},"dirName":"GraphQL","fileName":"report","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Additional Reports","id":"additional-reports"}]}},{"type":"Page","content":[{"type":"Paragraph","content":[{"text":"Webtau ","type":"SimpleText"},{"code":"browser.","type":"InlinedCode"},{"text":" module lets you interact with a browser.","type":"SimpleText"},{"type":"HardLineBreak"},{"text":"It provides higher level abstractions to locate elements, encapsulate page implementation details and deal with","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"async nature of modern UIs.","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"package scenarios.ui\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\nimport static pages.Pages.*\n\nscenario(\"search by specific query\") {\n    search.submit(\"search this\")\n    search.numberOfResults.waitToBe > 1\n}","title":"Browser test (Groovy runner)","type":"Snippet"},{"lang":"groovy","snippet":"package pages\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*\n\nclass SearchPage {\n    def header = $(\"#header\")\n    def welcomeMessage = $(\"#welcome\")\n    def searchMessage = $(\"#message\")\n    def box = $(\"#search-box\")\n    def results = $(\"#results .result\")\n    def numberOfResults = results.count\n\n    def submit(query) {\n        browser.open(\"/search\")\n\n        box.setValue(query)\n        box.sendKeys(browser.keys.enter)\n    }\n}","title":"SearchPage.groovy","type":"Snippet"},{"lang":"groovy","snippet":"package pages\n\nclass Pages {\n    static final def search = new SearchPage()\n}","title":"Pages.groovy","excludeRegexp":["calculation","form","payments"],"type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"package com.example.tests.junit5;\n\nimport org.junit.jupiter.api.Test;\nimport org.testingisdocumenting.webtau.junit5.WebTau;\n\nimport static com.example.tests.junit5.pages.Pages.*;\nimport static org.testingisdocumenting.webtau.WebTauDsl.*;\n\n@WebTau\npublic class WebSearchJavaTest {\n    @Test\n    public void searchByQuery() {\n        search.submit(\"search this\");\n        search.numberOfResults.waitToBe(greaterThan(1));\n    }\n}","title":"Browser test (JUnit 5)","type":"Snippet"},{"lang":"java","snippet":"package com.example.tests.junit5.pages;\n\nimport org.testingisdocumenting.webtau.browser.page.PageElement;\nimport org.testingisdocumenting.webtau.browser.page.PageElementValue;\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*;\n\npublic class SearchPage {\n    private final PageElement box = $(\"#search-box\");\n    private final PageElement results = $(\"#results .result\");\n    public final PageElementValue<Integer> numberOfResults = results.getCount();\n\n    public void submit(String query) {\n        browser.open(\"/search\");\n\n        box.setValue(query);\n        box.sendKeys(browser.keys.enter);\n    }\n}","title":"SearchPage.java","type":"Snippet"},{"lang":"java","snippet":"package com.example.tests.junit5.pages;\n\npublic class Pages {\n    public static SearchPage search = new SearchPage();\n}","title":"Pages.java","type":"Snippet"}]}],"type":"Tabs"}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Browser","pageTitle":"Introduction","pageMeta":{},"dirName":"browser","fileName":"introduction","viewOnRelativePath":null,"pageSectionIdTitles":[]}},{"type":"Page","content":[{"title":"Base URL","id":"base-url","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Robust tests don't specify the full URL of an application under test.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Instead you only pass a relative URL to functions like ","type":"SimpleText"},{"code":"open","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.ui\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario('simple open') {\n    browser.open(\"/search\")\n    $('#welcome').should == 'welcome to super search'\n}","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Define base URL either inside a ","type":"SimpleText"},{"code":"webtau.cfg.groovy","type":"InlinedCode"},{"text":" file","type":"SimpleText"}]},{"lang":"groovy","snippet":"url = \"http://localhost:8180\"","type":"Snippet"},{"type":"Paragraph","content":[{"text":"or pass as a command line argument ","type":"SimpleText"},{"code":"--url=http://...","type":"InlinedCode"}]}]},{"title":"Browser Only Base URL","id":"browser-only-base-url","type":"Section","content":[{"type":"Paragraph","content":[{"text":"When you use ","type":"SimpleText"},{"code":"url","type":"InlinedCode"},{"text":" parameter you set base url for both ","type":"SimpleText"},{"code":"REST","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"UI","type":"InlinedCode"},{"text":" testing.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"browserUrl","type":"InlinedCode"},{"text":" to specify ","type":"SimpleText"},{"code":"UI","type":"InlinedCode"},{"text":" only base url. This can be handy when your backend and frontend live separately.","type":"SimpleText"}]}]},{"title":"Browser Id","id":"browser-id","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"browserId","type":"InlinedCode"},{"text":" via command line, or a config file parameter to specify which browser to use.","type":"SimpleText"}]},{"command":"webtau --browserId=firefox","paramsToHighlight":[],"type":"CliCommand"},{"type":"Paragraph","content":[{"text":"Note: Default ","type":"SimpleText"},{"code":"browserId","type":"InlinedCode"},{"text":" is ","type":"SimpleText"},{"code":"chrome","type":"InlinedCode"}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Browser","pageTitle":"Basic Configuration","pageMeta":{},"dirName":"browser","fileName":"basic-configuration","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Base URL","id":"base-url"},{"title":"Browser Only Base URL","id":"browser-only-base-url"},{"title":"Browser Id","id":"browser-id"}]}},{"type":"Page","content":[{"title":"Element Selection","id":"element-selection","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"$('css-selector')","type":"InlinedCode"},{"text":" to select a page element.","type":"SimpleText"}]},{"lang":"groovy","snippet":"$('#element-id')\n","lineNumber":"","title":"select by id","type":"Snippet"},{"lang":"groovy","snippet":"$('.label')\n","lineNumber":"","title":"select by class","type":"Snippet"},{"lang":"groovy","snippet":"$('[data-test-id=\"my-id\"]')\n","lineNumber":"","title":"select by attribute","type":"Snippet"},{"type":"Paragraph","content":[{"url":"/webtau/browser/finders-and-filters","isFile":false,"type":"Link","content":[{"text":"Read Finders And Filters","type":"SimpleText"}]},{"text":" to learn how to select elements using more advanced techniques.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"url":"https://www.w3schools.com/cssref/css_selectors.asp","isFile":false,"type":"Link","content":[{"text":"Read W3Schools CSS selectors","type":"SimpleText"}]},{"text":" to learn all kind of CSS selection techniques.","type":"SimpleText"}]}]},{"title":"Lazy Element","id":"lazy-element","type":"Section","content":[{"type":"Paragraph","content":[{"text":"When you use ","type":"SimpleText"},{"code":"$('css-selector')","type":"InlinedCode"},{"text":" you create an instance of ","type":"SimpleText"},{"code":"PageElement","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"type":"Paragraph","content":[{"code":"PageElement","type":"InlinedCode"},{"text":" represent an element that is present or ","type":"SimpleText"},{"type":"Emphasis","content":[{"text":"will be present","type":"SimpleText"}]},{"text":" on a web page. It is safe to declare an element","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"before you open a browser or navigate to the page you need to test.","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.ui\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\ndef welcomeMessage = $('#welcome')\n\nscenario('simple open') {\n    browser.open(\"/search\")\n    welcomeMessage.should == 'welcome to super search'\n}","type":"Snippet"}]},{"title":"Lazy Value","id":"lazy-value","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Consider a simple search page. Enter value, hit enter, see results.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Here is simple test.","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.ui\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario('search by specific query') {\n    browser.open('/search')\n\n    $('#search-box').setValue('search this')\n    $('#search-box').sendKeys(\"\\n\")\n\n    $('#results .result').count.shouldBe > 1\n}","type":"Snippet"},{"type":"Paragraph","content":[{"text":"In the example ","type":"SimpleText"},{"code":"$('#results .result').count","type":"InlinedCode"},{"text":" represents the number of elements matching the css selector.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Let's extract it.","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.ui\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\ndef searchBox = $('#search-box')\ndef numberOfResults = searchBox.count\n\nscenario('search by specific query') {\n    browser.open('/search')\n\n    searchBox.setValue('search this')\n    searchBox.sendKeys(\"\\n\")\n\n    numberOfResults.shouldBe > 1\n}","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Browser","pageTitle":"Page Element And Value","pageMeta":{},"dirName":"browser","fileName":"page-element-and-value","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Element Selection","id":"element-selection"},{"title":"Lazy Element","id":"lazy-element"},{"title":"Lazy Value","id":"lazy-value"}]}},{"type":"Page","content":[{"title":"Test Encapsulation","id":"test-encapsulation","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Robust tests should not depend on implementation details.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"UI has plenty of those:","type":"SimpleText"}]},{"bulletMarker":"*","tight":true,"type":"BulletList","content":[{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"UI Elements placement","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"Actions","type":"SimpleText"}]}]}]},{"type":"Paragraph","content":[{"text":"UI test should not depend on any of them.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Move elements placement and available actions outside of UI test.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Multiple tests can then reuse that information.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"And more importantly you will have only one place to change if UI changes.","type":"SimpleText"}]}]},{"title":"Definition","id":"definition","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To define ","type":"SimpleText"},{"code":"PageObject","type":"InlinedCode"},{"text":" create a class.","type":"SimpleText"}]},{"lang":"groovy","snippet":"package pages\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*\n\nclass SearchPage {\n    def header = $(\"#header\")\n    def welcomeMessage = $(\"#welcome\")\n    def searchMessage = $(\"#message\")\n    def box = $(\"#search-box\")\n    def results = $(\"#results .result\")\n    def numberOfResults = results.count\n\n    def submit(query) {\n        browser.open(\"/search\")\n\n        box.setValue(query)\n        box.sendKeys(browser.keys.enter)\n    }\n}","type":"Snippet"}]},{"title":"Grouping","id":"grouping","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To make it easier to refer ","type":"SimpleText"},{"code":"PageObjects","type":"InlinedCode"},{"text":" from different tests combine them in one file","type":"SimpleText"}]},{"lang":"groovy","snippet":"package pages\n\nclass Pages {\n    static final def search = new SearchPage()\n    static final def calculation = new CalculationPage()\n    static final def form = new FormPage()\n    static final def payments = new PaymentsPage()\n}","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Use static import to have seamless access to all of them","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.ui\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\nimport static pages.Pages.*\n\nscenario(\"search by specific query\") {\n    search.submit(\"search this\")\n    search.numberOfResults.should == 2\n}","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Browser","pageTitle":"Page Object","pageMeta":{},"dirName":"browser","fileName":"page-object","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Test Encapsulation","id":"test-encapsulation"},{"title":"Definition","id":"definition"},{"title":"Grouping","id":"grouping"}]}},{"type":"Page","content":[{"title":"Clicks","id":"clicks","type":"Section","content":[{"lang":"groovy","snippet":"payments.confirmation.click()","title":"click","type":"Snippet"},{"lang":"groovy","snippet":"expandArea.doubleClick()","title":"double click","type":"Snippet"},{"lang":"groovy","snippet":"paymentsTable.rightClick()","title":"right click","type":"Snippet"},{"lang":"groovy","snippet":"payments.confirmation.shiftClick()","title":"shift click","type":"Snippet"},{"lang":"groovy","snippet":"payments.confirmation.altClick()","title":"alt click","type":"Snippet"},{"lang":"groovy","snippet":"payments.confirmation.controlClick()","title":"control click","type":"Snippet"},{"lang":"groovy","snippet":"payments.confirmation.commandClick()","title":"command click","type":"Snippet"},{"lang":"groovy","snippet":"payments.confirmation.commandOrControlClick()","title":"command or control click","type":"Snippet"}]},{"title":"Modifications","id":"modifications","type":"Section","content":[{"lang":"groovy","snippet":"payments.dollarAmount.clear()","title":"clear","type":"Snippet"},{"lang":"groovy","snippet":"payments.dollarAmount.sendKeys(\"104.5\")","title":"send keys","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Generic way to set a form element value. Will be covered more in ","type":"SimpleText"},{"url":"/webtau/browser/forms","isFile":false,"type":"Link","content":[{"text":"forms","type":"SimpleText"}]}]},{"lang":"groovy","snippet":"payments.dollarAmount.setValue(\"104.5\")","title":"set value","type":"Snippet"}]},{"title":"Move over","id":"move-over","type":"Section","content":[{"lang":"groovy","snippet":"menu.hover()","title":"hover","type":"Snippet"}]},{"title":"Drag And Drop","id":"drag-and-drop","type":"Section","content":[{"lang":"groovy","snippet":"def draggable = $(\"#draggable\")\ndef dropZone = $(\"#drop-zone\")\n\ndraggable.dragAndDropOver(dropZone)","title":"drag element to other","startLine":"// drag-and-drop","endLine":"// drag-and-drop","excludeStartEnd":true,"type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Browser","pageTitle":"Element Actions","pageMeta":{},"dirName":"browser","fileName":"element-actions","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Clicks","id":"clicks"},{"title":"Modifications","id":"modifications"},{"title":"Move over","id":"move-over"},{"title":"Drag And Drop","id":"drag-and-drop"}]}},{"type":"Page","content":[{"title":"Universal Set Value","id":"universal-set-value","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"setValue","type":"InlinedCode"},{"text":" on a declared page element to set its value.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"It will work on all the standard input types out of the box.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Define all the input fields inside a page object. In combination with universal ","type":"SimpleText"},{"code":"setValue","type":"InlinedCode"},{"text":" it will make your tests robust.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Given a html snippet","type":"SimpleText"}]},{"lang":"html","snippet":"<html>\n<body>\n<div id=\"form\">\n  <input id=\"name\" />\n  <input id=\"startDate\" type=\"date\" />\n  <input id=\"confirmation\" type=\"checkbox\" />\n  <div id=\"choice-group\" class=\"radio-group\">\n    <div>\n      <input type=\"radio\" id=\"one\" name=\"choice\" value=\"value-one\"/>\n      <label for=\"one\">one</label>\n    </div>\n    <div>\n      <input type=\"radio\" id=\"two\" name=\"choice\" value=\"value-two\"/>\n      <label for=\"two\">two</label>\n    </div>\n    <div>\n      <input type=\"radio\" id=\"three\" name=\"choice\" value=\"value-three\"/>\n      <label for=\"three\">three</label>\n    </div>\n  </div>\n  <select id=\"rank\">\n    <option />\n    <option value=\"A\">A</option>\n    <option value=\"B\">B</option>\n    <option value=\"C\">C</option>\n    <option value=\"D\">D</option>\n    <option value=\"E\">E</option>\n  </select>\n</div>\n</body>\n</html>","title":"HTML form","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Page object can be defined as","type":"SimpleText"}]},{"lang":"groovy","snippet":"package pages\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*\n\nclass FormPage {\n    def name = $('#name')\n    def rank = $('#rank')\n    def confirmation = $('#confirmation')\n    def choice = $('[name=\"choice\"]')\n    def startDate = $('#startDate')\n}","title":"Form page object","type":"Snippet"}]},{"title":"Default Input","id":"default-input","type":"Section","content":[{"lang":"groovy","snippet":"form.name.setValue('Full Automation')","title":"set value to input","type":"Snippet"}]},{"title":"Date Input","id":"date-input","type":"Section","content":[{"lang":"groovy","snippet":"form.startDate.setValue('2016-06-21')","title":"set value to date input","type":"Snippet"}]},{"title":"Select","id":"select","type":"Section","content":[{"lang":"groovy","snippet":"form.rank.setValue('B')","title":"set value to select","type":"Snippet"}]},{"title":"CheckBox","id":"checkbox","type":"Section","content":[{"lang":"groovy","snippet":"form.confirmation.setValue(true)","title":"set value to checkbox","type":"Snippet"}]},{"title":"Radio Button","id":"radio-button","type":"Section","content":[{"lang":"groovy","snippet":"form.choice.setValue('value-two')","title":"set value to radio button","type":"Snippet"}]},{"title":"Universal Assert","id":"universal-assert","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Form element value can be asserted the same way as any regular element.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Underlying value will be extracted based on the element type","type":"SimpleText"}]},{"lang":"groovy","snippet":"form.name.should == 'Full Automation'\nform.rank.should == 'B'\nform.confirmation.should == true\nform.choice.should == 'value-two'\nform.startDate.should == '2016-06-21'","title":"universal assert","type":"Snippet"}]},{"title":"Custom Form Elements","id":"custom-form-elements","type":"Section","content":[{"type":"Paragraph","content":[{"text":"One of the benefits of universal ","type":"SimpleText"},{"code":"set","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"assert","type":"InlinedCode"},{"text":" is that your test is focused on the data and not implementation details.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"But what if you decided to use a custom component to enter the data?","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"To hide implementation details from your test you should define a custom input handler for your UI component.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Let's consider a form component that you can start interacting with only after you clicked it. And after the value","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"is entered, the input box disappears again.","type":"SimpleText"}]},{"lang":"html","snippet":"<div id=\"answer\" class=\"special-selector\" onclick=\"activate('answer')\"> \n <div class=\"current-value\">\n   current value \n </div> \n <input class=\"value-input\" value=\"\" onblur=\"valueEntered('answer')\"> \n</div>","title":"Custom input","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Our test should still be written in terms of data entering and validation.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def customFormElement = $('#answer')\n\ncustomFormElement.setValue('hello')\ncustomFormElement.should == 'hello'","title":"set value to custom component","type":"Snippet"},{"type":"Paragraph","content":[{"text":"In order to achieve this we need to register a custom handler.","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.ui\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario('open forms') {\n    browser.open('/special-forms')\n}\n\nscenario('get set custom based on registered handler') {\n    def customFormElement = $('#answer')\n\n    customFormElement.setValue('hello')\n    customFormElement.should == 'hello'\n}","title":"webtau.cfg.groovy","type":"Snippet"},{"lang":"groovy","snippet":"package formHandlers\n\nimport org.openqa.selenium.Keys\nimport org.testingisdocumenting.webtau.browser.page.HtmlNode\nimport org.testingisdocumenting.webtau.browser.page.HtmlNodeAndWebElementList\nimport org.testingisdocumenting.webtau.browser.page.PageElement\nimport org.testingisdocumenting.webtau.browser.page.PageElementStepExecutor\nimport org.testingisdocumenting.webtau.browser.handlers.PageElementGetSetValueHandler\nimport org.testingisdocumenting.webtau.reporter.TokenizedMessage\n\nclass CustomInput implements PageElementGetSetValueHandler {\n    @Override\n    boolean handles(HtmlNodeAndWebElementList htmlNodeAndWebElements, PageElement pageElement) {\n        def htmlNode = htmlNodeAndWebElements.firstHtmlNode()\n        return htmlNode.attributes.class =~ /special-selector/\n    }\n\n    @Override\n    void setValue(PageElementStepExecutor stepExecutor,\n                  TokenizedMessage pathDescription,\n                  HtmlNodeAndWebElementList htmlNodeAndWebElements,\n                  PageElement pageElement,\n                  Object value) {\n        pageElement.click()\n        pageElement.find('input').sendKeys(\"${value}\" + Keys.TAB)\n    }\n\n    @Override\n    Object getValue(HtmlNodeAndWebElementList htmlNodeAndWebElements, PageElement pageElement, int idx) {\n        return pageElement.find('.current-value').getUnderlyingValue()\n    }\n}","title":"Custom input handler","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Browser","pageTitle":"Forms","pageMeta":{},"dirName":"browser","fileName":"forms","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Universal Set Value","id":"universal-set-value"},{"title":"Default Input","id":"default-input"},{"title":"Date Input","id":"date-input"},{"title":"Select","id":"select"},{"title":"CheckBox","id":"checkbox"},{"title":"Radio Button","id":"radio-button"},{"title":"Universal Assert","id":"universal-assert"},{"title":"Custom Form Elements","id":"custom-form-elements"}]}},{"type":"Page","content":[{"title":"Synchronization","id":"synchronization","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Many actions in a modern web page are asynchronous. User presses a button and a moment later a result appears.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"In modern web pages there is no full page reload and only a portion of a page will be changed.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"If a test will try to assert a value after a user action, chances are assertion will fail since it will take time","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"for a result to appear on a page.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Question: How do users know that their action is done and they can move on?","type":"SimpleText"}]}]},{"title":"Visible/Hidden Element","id":"visiblehidden-element","type":"Section","content":[{"type":"Paragraph","content":[{"text":"One way to deal with asynchronous pages is to wait for a feedback to appear or disappear.","type":"SimpleText"}]},{"lang":"groovy","snippet":"calculation.start()\n\ncalculation.feedback.waitTo beVisible()\ncalculation.results.should == [100, 230]","title":"beVisible matcher","type":"Snippet"}]},{"title":"Enabled/Disabled Element","id":"enableddisabled-element","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Disabled input box and buttons can be used as a user feedback as well.","type":"SimpleText"}]},{"lang":"groovy","snippet":"calculation.open()\n\ncalculation.input.waitTo beEnabled()\ncalculation.input.setValue(100)","title":"beEnabled matcher","type":"Snippet"}]},{"title":"Wait to match","id":"wait-to-match","type":"Section","content":[{"type":"Paragraph","content":[{"text":"If presence/absence of an element is not important, you can directly to wait for a matcher to match.","type":"SimpleText"}]},{"lang":"groovy","snippet":"calculation.start()\ncalculation.results.waitTo == [100, 230]","title":"waitTo any matcher","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: any matcher that you can use with ","type":"SimpleText"},{"code":"should","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"shouldNot","type":"InlinedCode"},{"text":" can be used with ","type":"SimpleText"},{"code":"waitTo","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"waitToNot","type":"InlinedCode"}]}]},{"title":"Wait on url","id":"wait-on-url","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Another cue to use could be a url change after an action.","type":"SimpleText"}]},{"lang":"groovy","snippet":"browser.open('/resource-creation')\n\n$('#new').click()\nbrowser.url.ref.waitTo == 'created-id'","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: url exposes other parts that you can ","type":"SimpleText"},{"url":"/webtau/browser/navigation#assert-url","isFile":false,"type":"Link","content":[{"text":"read more about here","type":"SimpleText"}]}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Browser","pageTitle":"Asynchronous Page","pageMeta":{},"dirName":"browser","fileName":"asynchronous-page","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Synchronization","id":"synchronization"},{"title":"Visible/Hidden Element","id":"visiblehidden-element"},{"title":"Enabled/Disabled Element","id":"enableddisabled-element"},{"title":"Wait to match","id":"wait-to-match"},{"title":"Wait on url","id":"wait-on-url"}]}},{"type":"Page","content":[{"title":"Scenarios","id":"scenarios","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To document how to use a User Interface we often take screenshots and annotate them.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"At the same time we need to make sure that documented scenario works as advertised.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"With UI testing we can validate scenarios and at the same time capture screenshots with automatically placed annotations.","type":"SimpleText"}]}]},{"title":"Capturing Screenshots With Annotations","id":"capturing-screenshots-with-annotations","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To capture screenshots use ","type":"SimpleText"},{"code":"browser.doc[.withAnnotations].capture","type":"InlinedCode"},{"text":":","type":"SimpleText"}]},{"lang":"groovy","snippet":"search.submit(\"search this\")\n\nbrowser.doc.withAnnotations(\n        browser.doc.badge(search.box),\n        browser.doc.badge(search.results)).capture('search')","title":"screenshot capture with badge annotations","type":"Snippet"},{"type":"Paragraph","content":[{"text":"The result of the ","type":"SimpleText"},{"code":"capture","type":"InlinedCode"},{"text":" command is two files: actual screenshot and ","type":"SimpleText"},{"code":"search.json","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"lang":"json","snippet":"{\n  \"shapes\" : [ {\n    \"id\" : \"badge13\",\n    \"type\" : \"badge\",\n    \"text\" : \"1\",\n    \"color\" : \"a\",\n    \"darkFriendly\" : false,\n    \"x\" : 120,\n    \"y\" : 84,\n    \"align\" : \"Center\"\n  }, {\n    \"id\" : \"badge14\",\n    \"type\" : \"badge\",\n    \"text\" : \"2\",\n    \"color\" : \"a\",\n    \"darkFriendly\" : false,\n    \"x\" : 494,\n    \"y\" : 177,\n    \"align\" : \"Center\"\n  } ],\n  \"pixelRatio\" : 1\n}","title":"search.json","type":"Snippet"},{"type":"Paragraph","content":[{"url":"https://testingisdocumenting.org/webtau","isFile":false,"type":"Link","content":[{"text":"Webtau","type":"SimpleText"}]},{"text":" documentation site is generated using ","type":"SimpleText"},{"url":"https://github.com/testingisdocumenting/znai","isFile":false,"type":"Link","content":[{"text":"Znai","type":"SimpleText"}]},{"text":".","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"It has ","type":"SimpleText"},{"code":"include-image","type":"InlinedCode"},{"text":" plugin that supports annotations format generated by ","type":"SimpleText"},{"code":"capture","type":"InlinedCode"},{"text":" command.","type":"SimpleText"}]},{"lang":"","snippet":":include-image: doc-artifacts/search.png {fit: true, annotationsPath: \"doc-artifacts/search.json\"}\n","lineNumber":"","type":"Snippet"},{"annotationsPath":"doc-artifacts/search.json","imageSrc":"/webtau/doc-artifacts/search.png","timestamp":1621036741869,"shapes":[{"id":"badge13","type":"badge","text":"1","color":"a","darkFriendly":false,"x":120,"y":84,"align":"Center"},{"id":"badge14","type":"badge","text":"2","color":"a","darkFriendly":false,"x":494,"y":177,"align":"Center"}],"width":1000.0,"height":166.0,"type":"AnnotatedImage"}]},{"title":"Annotation Types","id":"annotation-types","type":"Section","content":[{"lang":"groovy","snippet":"search.submit(\"search this\")\n\nbrowser.doc.withAnnotations(\n        browser.doc.badge(search.box),\n        browser.doc.badge(search.results)).capture('search')","title":"badges","type":"Snippet"},{"annotationsPath":"doc-artifacts/search.json","imageSrc":"/webtau/doc-artifacts/search.png","timestamp":1621036741869,"shapes":[{"id":"badge13","type":"badge","text":"1","color":"a","darkFriendly":false,"x":120,"y":84,"align":"Center"},{"id":"badge14","type":"badge","text":"2","color":"a","darkFriendly":false,"x":494,"y":177,"align":"Center"}],"width":1000.0,"height":166.0,"type":"AnnotatedImage"},{"lang":"groovy","snippet":"browser.doc.withAnnotations(\n        browser.doc.highlight(search.box),\n        browser.doc.cover(search.results, \"covering text\")).capture('search-highlight-cover')","title":"cover and highlight","type":"Snippet"},{"annotationsPath":"doc-artifacts/search-highlight-cover.json","imageSrc":"/webtau/doc-artifacts/search-highlight-cover.png","timestamp":1621036742441,"shapes":[{"id":"highlight19","type":"highlight","text":"","color":"a","darkFriendly":false,"x":16,"y":67,"width":208,"height":34},{"id":"rectangle20","type":"rectangle","text":"covering text","color":"a","darkFriendly":false,"x":20,"y":159,"width":948,"height":37}],"width":1000.0,"height":166.0,"type":"AnnotatedImage"}]},{"title":"Annotation Placement","id":"annotation-placement","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"above","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"below","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"toTheLeft","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"toTheRight","type":"InlinedCode"},{"text":" to put an annotation outside of element center.","type":"SimpleText"}]},{"lang":"groovy","snippet":"search.submit(\"search this\")\n\nbrowser.doc.withAnnotations(\n        browser.doc.badge(search.box).toTheRight(),\n        browser.doc.badge(search.results).above()).capture('search-diff-placement')","title":"badge placement","endLine":"example-end","excludeStartEnd":true,"type":"Snippet"},{"annotationsPath":"doc-artifacts/search-diff-placement.json","imageSrc":"/webtau/doc-artifacts/search.png","timestamp":1621036741869,"shapes":[{"id":"badge15","type":"badge","text":"1","color":"a","darkFriendly":false,"x":224,"y":84,"align":"ToTheRight"},{"id":"badge16","type":"badge","text":"2","color":"a","darkFriendly":false,"x":494,"y":159,"align":"Above"}],"width":1000.0,"height":166.0,"type":"AnnotatedImage"}]},{"title":"Inverted Colors","id":"inverted-colors","type":"Section","content":[{"type":"Paragraph","content":[{"text":"By default, annotation colors assume light theme of an UI you document.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Use ","type":"SimpleText"},{"code":"invertedColors()","type":"InlinedCode"},{"text":" to change an annotation color to be dark theme compatible.","type":"SimpleText"}]},{"annotationsPath":"doc-artifacts/search-inverted-colors.json","imageSrc":"/webtau/doc-artifacts/search-inverted-colors.png","timestamp":1621036742305,"shapes":[{"id":"badge17","type":"badge","text":"1","color":"a","darkFriendly":true,"x":494,"y":25,"align":"Center"},{"id":"badge18","type":"badge","text":"2","color":"a","darkFriendly":false,"x":120,"y":84,"align":"Center"}],"width":1000.0,"height":166.0,"type":"AnnotatedImage"},{"lang":"groovy","snippet":"search.submit(\"search this\")\n\nbrowser.doc.withAnnotations(\n        browser.doc.badge(search.header).invertedColors(),\n        browser.doc.badge(search.box)).capture('search-inverted-colors')","title":"inverted colors","highlight":[3],"endLine":"example-end","excludeStartEnd":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"To change all annotations to be dark theme compatible by default, use webtau config file","type":"SimpleText"}]},{"lang":"groovy","snippet":"browserAnnotationsDarkFriendly = true","title":"webtau.cfg.groovy","includeRegexp":"browserAnnotations","type":"Snippet"},{"type":"Paragraph","content":[{"text":"In this case ","type":"SimpleText"},{"code":"invertedColors","type":"InlinedCode"},{"text":" will flip from light annotations to dark one","type":"SimpleText"}]},{"lang":"groovy","snippet":"browser.doc.withAnnotations(\n        browser.doc.badge(search.header),\n        browser.doc.badge(search.results).invertedColors()).capture('search-inverted-colors-from-config')","title":"dark theme friendly by default","startLine":"example-start","endLine":"example-end","excludeStartEnd":true,"type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Browser","pageTitle":"Documentation Artifacts","pageMeta":{},"dirName":"browser","fileName":"documentation-artifacts","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Scenarios","id":"scenarios"},{"title":"Capturing Screenshots With Annotations","id":"capturing-screenshots-with-annotations"},{"title":"Annotation Types","id":"annotation-types"},{"title":"Annotation Placement","id":"annotation-placement"},{"title":"Inverted Colors","id":"inverted-colors"}]}},{"type":"Page","content":[{"title":"Timeouts","id":"timeouts","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Default timeout in milliseconds for ","type":"SimpleText"},{"code":"waitTo","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"waitToNot","type":"InlinedCode"}]},{"columns":[{"content":[{"lang":"","snippet":"waitTimeout = 25000\n","lineNumber":"","type":"Snippet"}]},{"content":[{"lang":"","snippet":"--waitTimeout=25000\n","lineNumber":"","type":"Snippet"}]}],"config":{},"type":"Columns"}]},{"title":"Browser Size","id":"browser-size","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Browser window size can be set using ","type":"SimpleText"},{"code":"browserWidth","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"browserHeight","type":"InlinedCode"}]},{"lang":"groovy","snippet":"url = \"http://localhost:8180\"\n\nbrowserWidth = 1280\nbrowserHeight = 800","type":"Snippet"}]},{"title":"Documentation Artifacts","id":"documentation-artifacts","type":"Section","content":[{"type":"Paragraph","content":[{"text":"By default all generated documentation artifacts (e.g. screenshots) are created in the current directory.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"To override","type":"SimpleText"}]},{"lang":"groovy","snippet":"url = \"http://localhost:8180\"\n\ndocPath = \"screenshots\"","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Browser","pageTitle":"Advanced Configuration","pageMeta":{},"dirName":"browser","fileName":"advanced-configuration","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Timeouts","id":"timeouts"},{"title":"Browser Size","id":"browser-size"},{"title":"Documentation Artifacts","id":"documentation-artifacts"}]}},{"type":"Page","content":[{"title":"Access Local Storage","id":"access-local-storage","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To access local storage use ","type":"SimpleText"},{"code":"browser.localStorage","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Lets consider a simple web page that displays a value from a local storage.","type":"SimpleText"}]},{"lang":"html","snippet":"<div id=\"favorite-color\"> \n</div> \n<script>\n    const element = document.getElementById('favorite-color');\n    element.innerHTML = localStorage.getItem('favoriteColor');\n</script>","title":"Sample web page","type":"Snippet"},{"lang":"groovy","snippet":"package scenarios.ui\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario(\"local storage api\") {\n    browser.open('/local-storage')\n    browser.localStorage.setItem('favoriteColor', 'clean')\n\n    def color = $('#favorite-color')\n\n    browser.reopen('/local-storage')\n    color.should == 'clean'\n\n    browser.localStorage.clear()\n    browser.reopen('/local-storage')\n    color.should == ''\n}","title":"Setting storage after opening page","type":"Snippet"},{"lang":"java","snippet":"public String getItem(String key)\npublic void setItem(String key, String value)\npublic void removeItem(String key)\npublic void clear()\npublic int size()","entries":["getItem","setItem","removeItem","clear","size"],"title":"Local Storage methods","signatureOnly":true,"type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Browser","pageTitle":"Local Storage","pageMeta":{},"dirName":"browser","fileName":"local-storage","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Access Local Storage","id":"access-local-storage"}]}},{"type":"Page","content":[{"title":"Add Cookies","id":"add-cookies","type":"Section","content":[{"lang":"groovy","snippet":"browser.cookies.add(\"cookie-a\", \"hello\")\nbrowser.cookies.add(\"cookie-b\", \"world\")","title":"add cookies","type":"Snippet"}]},{"title":"Get Cookies","id":"get-cookies","type":"Section","content":[{"lang":"groovy","snippet":"browser.cookies.get(\"cookie-a\").should == \"hello\"\nbrowser.cookies.get(\"cookie-b\").should == \"world\"\n\nbrowser.cookies.getAll().should == [\"cookie-a\": \"hello\", \"cookie-b\": \"world\"]","title":"get cookies","type":"Snippet"}]},{"title":"Delete Cookies","id":"delete-cookies","type":"Section","content":[{"lang":"groovy","snippet":"browser.cookies.delete(\"cookie-b\")","title":"delete cookie by name","type":"Snippet"},{"lang":"groovy","snippet":"browser.cookies.deleteAll()","title":"delete all cookies","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Browser","pageTitle":"Cookies","pageMeta":{},"dirName":"browser","fileName":"cookies","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Add Cookies","id":"add-cookies"},{"title":"Get Cookies","id":"get-cookies"},{"title":"Delete Cookies","id":"delete-cookies"}]}},{"type":"Page","content":[{"title":"Open","id":"open","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To open a page use ","type":"SimpleText"},{"code":"browser.open","type":"InlinedCode"},{"text":". Browser will load a page only if the current url doesn't match the passed one.","type":"SimpleText"}]},{"lang":"groovy","snippet":"search.submit('query')\n\nbrowser.open(\"/search\") // page is not be ing refreshed\nsearch.searchMessage.should == 'searching for query'","commentsType":"inline","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: relative url will be automatically expanded to the full url based on the ","type":"SimpleText"},{"url":"/webtau/browser/basic-configuration","isFile":false,"type":"Link","content":[{"text":"configuration","type":"SimpleText"}]}]}]},{"title":"Reopen","id":"reopen","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"brower.reopen","type":"InlinedCode"},{"text":" to force open the page even if the page url already matches the passed one.","type":"SimpleText"}]},{"lang":"groovy","snippet":"search.submit('name')\n\nbrowser.reopen(\"/search\") // page is going to be refreshed\nsearch.searchMessage.should == ''","commentsType":"inline","type":"Snippet"}]},{"title":"Refresh","id":"refresh","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"browser.refresh","type":"InlinedCode"},{"text":" to refresh current page.","type":"SimpleText"}]},{"lang":"groovy","snippet":"search.submit('name')\n\nbrowser.reopen(\"/search\") // page is going to be refreshed\nsearch.searchMessage.should == ''","commentsType":"inline","type":"Snippet"}]},{"title":"Restart","id":"restart","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"browser.restart","type":"InlinedCode"},{"text":" to restart a browser and open last opened url.","type":"SimpleText"}]},{"lang":"groovy","snippet":"browser.open('/local-storage')\nbrowser.localStorage.setItem('favoriteColor', 'pretty')\n\nbrowser.refresh()\n$('#favorite-color').should == 'pretty'\n\nbrowser.restart()\n$('#favorite-color').should == ''","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: restarting creates a clean instance of a browser. Local storage is going to be reset.","type":"SimpleText"}]}]},{"title":"Assert URL","id":"assert-url","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"browser.url","type":"InlinedCode"},{"text":" to assert on or wait for url changes.","type":"SimpleText"}]},{"lang":"txt","snippet":"http://example.com/resource/id?type=full&debug=true#subId","title":"sample url","type":"Snippet"},{"lang":"groovy","snippet":"browser.url.path.should == '/resource/id'\nbrowser.url.path.should contain('/id')\nbrowser.url.query.should == 'type=full&debug=true'\nbrowser.url.ref.should == 'subId'","title":"asserting url parts","entry":"should expose url parts with should","bodyOnly":true,"type":"Snippet"},{"lang":"groovy","snippet":"browser.url.should == 'http://example.com/resource/id?type=full&debug=true#subId'\nbrowser.url.should contain('resource/id?type=')","title":"asserting full url","entry":"full part should be optional and default during assertion","bodyOnly":true,"type":"Snippet"},{"lang":"groovy","snippet":"browser.url.path.waitTo == '/resource/id'\nbrowser.url.query.waitTo == 'type=full&debug=true'\nbrowser.url.ref.waitTo == 'subId'","title":"waiting on url parts","entry":"should expose url parts with wait","bodyOnly":true,"type":"Snippet"}]},{"title":"Persist URL","id":"persist-url","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"browser.saveCurrentUrl","type":"InlinedCode"},{"text":" to save url in a local cache and ","type":"SimpleText"},{"code":"browser.openSavedUrl","type":"InlinedCode"},{"text":" to open a page later.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"It can be handy in multipart tests where first part creates an entity and the second part","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"updates the created entity.","type":"SimpleText"}]},{"lang":"groovy","snippet":"browser.open('/resource-creation')\n\n$('#new').click()\nbrowser.saveCurrentUrl()","type":"Snippet"},{"type":"Paragraph","content":[{"text":"In order to simplify tests development of a second part you can run first part once, save URL,","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"and iterate on a second part by opening a page using saved URL.","type":"SimpleText"}]},{"lang":"groovy","snippet":"browser.openSavedUrl()\n// continue resource related manipulations","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: url is stored in a local cache file and will survive tests restart.","type":"SimpleText"}]}]},{"title":"Assert Title","id":"assert-title","type":"Section","content":[{"lang":"groovy","snippet":"browser.title.should == \"Super Search\"","title":"asserting title","includeRegexp":"title.should","type":"Snippet"},{"lang":"groovy","snippet":"browser.title.waitTo == \"Super Search\"","title":"waiting on title","includeRegexp":"title.waitTo","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Browser","pageTitle":"Navigation","pageMeta":{},"dirName":"browser","fileName":"navigation","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Open","id":"open"},{"title":"Reopen","id":"reopen"},{"title":"Refresh","id":"refresh"},{"title":"Restart","id":"restart"},{"title":"Assert URL","id":"assert-url"},{"title":"Persist URL","id":"persist-url"},{"title":"Assert Title","id":"assert-title"}]}},{"type":"Page","content":[{"title":"Implicit Page Open Logic","id":"implicit-page-open-logic","type":"Section","content":[{"type":"Paragraph","content":[{"text":"You can register a custom callback that will be called implicitly every time a web page is opened.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"One of the typical use cases is to inject cookies or values into a local storage before tests logic begins.","type":"SimpleText"}]}]},{"title":"Auto Login","id":"auto-login","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To register an open handler you need to define ","type":"SimpleText"},{"code":"browserPageNavigationHandlerProvider","type":"InlinedCode"},{"text":" config value.","type":"SimpleText"}]},{"lang":"groovy","snippet":"url = \"http://localhost:8180\"\n\ndef userNameKey = 'userName'\nbrowserPageNavigationHandler = { passedUrl, fullUrl, currentUrl ->\n    if (browser.localStorage.getItem(userNameKey)) {\n        return\n    }\n\n    browser.localStorage.setItem(userNameKey, 'LoggedIn User')\n    browser.reopen(fullUrl)\n}","title":"webtau.cfg.groovy","type":"Snippet"},{"lang":"groovy","snippet":"package scenarios.ui\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario(\"page open handlers\") {\n    browser.open('/logged-in-user')\n    $('#welcome').should == 'Welcome LoggedIn User'\n}\n\nscenario(\"page open handlers during re-open\") {\n    browser.localStorage.clear()\n\n    browser.reopen('/logged-in-user')\n    $('#welcome').should == 'Welcome LoggedIn User'\n}","title":"Handler will be called before first assertion","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: usage of ","type":"SimpleText"},{"code":"localStorage","type":"InlinedCode"},{"text":" is just an example. You can use ","type":"SimpleText"},{"code":"cookies","type":"InlinedCode"},{"text":", call external services using ","type":"SimpleText"},{"code":"http.","type":"InlinedCode"},{"text":" or load","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"credentials from a file system.","type":"SimpleText"}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Browser","pageTitle":"Page Open Handlers","pageMeta":{},"dirName":"browser","fileName":"page-open-handlers","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Implicit Page Open Logic","id":"implicit-page-open-logic"},{"title":"Auto Login","id":"auto-login"}]}},{"type":"Page","content":[{"title":"Finders","id":"finders","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Finders in webtau is the initial web element selection that could select one or more elements.","type":"SimpleText"}]}]},{"title":"CSS Finder","id":"css-finder","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"$","type":"InlinedCode"},{"text":" to select an element by a given ","type":"SimpleText"},{"code":"css","type":"InlinedCode"},{"text":" selector (","type":"SimpleText"},{"url":"https://www.w3schools.com/cssref/css_selectors.asp","isFile":false,"type":"Link","content":[{"text":"Read W3Schools CSS selectors","type":"SimpleText"}]},{"text":" to learn all kind of CSS selection techniques).","type":"SimpleText"}]},{"lang":"groovy","snippet":"def welcomeMessage = $('#welcome')\nwelcomeMessage.should == 'hello'","title":"example of selecting by id","type":"Snippet"},{"type":"Paragraph","content":[{"text":"If more than one element is matched, the first one will be used for actions and assertions.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def menu = $('ul li a')\nmenu.should == 'book'","title":"example of selecting by nested tags","type":"Snippet"},{"type":"Paragraph","content":[{"text":"While ","type":"SimpleText"},{"code":"click","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"sendKeys","type":"InlinedCode"},{"text":" will always work on a first element only, the matchers can work with a list of things.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def menu = $('ul li a')\nmenu.should == ['book', 'orders', 'help']","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: declaring element this way will not trigger element search right away.","type":"SimpleText"}]},{"rightSide":true,"type":"Meta"},{"type":"EmptyBlock"},{"xmlAsJson":{"tagName":"div","attributes":[{"name":"id","value":"\"welcome\""}],"children":[{"tagName":"","text":"hello"}]},"paths":[],"type":"Xml"},{"paths":["div.div[0]","div.div[1].ul.li[0].a"],"xmlAsJson":{"tagName":"ul","attributes":[],"children":[{"tagName":"li","attributes":[],"children":[{"tagName":"a","attributes":[{"name":"href","value":"\"/book\""}],"children":[{"tagName":"","text":"book"}]}]},{"tagName":"li","attributes":[],"children":[{"tagName":"a","attributes":[{"name":"href","value":"\"/orders\""}],"children":[{"tagName":"","text":"orders"}]}]},{"tagName":"li","attributes":[],"children":[{"tagName":"a","attributes":[{"name":"href","value":"\"/help\""}],"children":[{"tagName":"","text":"help"}]}]}]},"type":"Xml"}]},{"title":"Filters","id":"filters","type":"Section","content":[{"type":"Paragraph","content":[{"text":"You can use filters to narrow down elements selected by finders.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Filter comes in a way of ","type":"SimpleText"},{"code":"get","type":"InlinedCode"},{"text":" method. Parameter is one of the following","type":"SimpleText"}]},{"bulletMarker":"*","tight":true,"type":"BulletList","content":[{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"Element number","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"Element text","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"Element regexp","type":"SimpleText"}]}]}]},{"lang":"groovy","snippet":"def ordersMenu = $('ul li a').get(2)\nordersMenu.should == 'orders'","title":"Number","type":"Snippet"},{"lang":"groovy","snippet":"def ordersMenu = $('ul li a').get('orders')\nordersMenu.should == 'orders'","title":"Text","type":"Snippet"},{"lang":"groovy","snippet":"def ordersMenu = $('ul li a').get(~/ord/)\nordersMenu.should == 'orders'","title":"Regexp","type":"Snippet"},{"paths":["div.div[1].ul.li[1].a"],"meta":{"rightSide":true},"xmlAsJson":{"tagName":"ul","attributes":[],"children":[{"tagName":"li","attributes":[],"children":[{"tagName":"a","attributes":[{"name":"href","value":"\"/book\""}],"children":[{"tagName":"","text":"book"}]}]},{"tagName":"li","attributes":[],"children":[{"tagName":"a","attributes":[{"name":"href","value":"\"/orders\""}],"children":[{"tagName":"","text":"orders"}]}]},{"tagName":"li","attributes":[],"children":[{"tagName":"a","attributes":[{"name":"href","value":"\"/help\""}],"children":[{"tagName":"","text":"help"}]}]}]},"type":"Xml"}]},{"title":"Chaining","id":"chaining","type":"Section","content":[{"type":"Paragraph","content":[{"text":"After you filtered, you can use finders again to find nested elements.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def ordersMenu = $('ul li').get(2).find('a')\nordersMenu.should == 'orders'","title":"Nested css selector","type":"Snippet"},{"paths":["div.div[1].ul.li[1].a"],"meta":{"rightSide":true},"xmlAsJson":{"tagName":"ul","attributes":[],"children":[{"tagName":"li","attributes":[],"children":[{"tagName":"a","attributes":[{"name":"href","value":"\"/book\""}],"children":[{"tagName":"","text":"book"}]}]},{"tagName":"li","attributes":[],"children":[{"tagName":"a","attributes":[{"name":"href","value":"\"/orders\""}],"children":[{"tagName":"","text":"orders"}]}]},{"tagName":"li","attributes":[],"children":[{"tagName":"a","attributes":[{"name":"href","value":"\"/help\""}],"children":[{"tagName":"","text":"help"}]}]}]},"type":"Xml"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Browser","pageTitle":"Finders And Filters","pageMeta":{"type":["two-sides"]},"dirName":"browser","fileName":"finders-and-filters","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Finders","id":"finders"},{"title":"CSS Finder","id":"css-finder"},{"title":"Filters","id":"filters"},{"title":"Chaining","id":"chaining"}]}},{"type":"Page","content":[{"title":"Text","id":"text","type":"Section","content":[{"lang":"groovy","snippet":"def message = $('#message')\nmessage.should == 'Select option'","title":"exact text","type":"Snippet"},{"lang":"groovy","snippet":"def message = $('#message')\nmessage.should == ~/option/","title":"regexp text","type":"Snippet"},{"lang":"groovy","snippet":"def menu = $('#menu ul li')\nmenu.should == ['Hello', 'Text', 'World']","title":"list of text","type":"Snippet"},{"lang":"groovy","snippet":"def menu = $('#menu ul li')\nmenu.should contain('Text')","title":"contain text in list","type":"Snippet"},{"lang":"groovy","snippet":"def menu = $('#menu ul li')\nmenu.should == ['Hello', ~/T..t/, 'World']","title":"list of text and regexp","type":"Snippet"},{"meta":{"rightSide":true},"xmlAsJson":{"tagName":"div","attributes":[],"children":[{"tagName":"div","attributes":[{"name":"id","value":"\"message\""}],"children":[{"tagName":"","text":"Select option"}]},{"tagName":"div","attributes":[{"name":"id","value":"\"menu\""}],"children":[{"tagName":"ul","attributes":[],"children":[{"tagName":"li","attributes":[],"children":[{"tagName":"","text":"Hello"}]},{"tagName":"li","attributes":[],"children":[{"tagName":"","text":"Text"}]},{"tagName":"li","attributes":[],"children":[{"tagName":"","text":"World"}]}]}]}]},"paths":[],"type":"Xml"}]},{"title":"Numbers","id":"numbers","type":"Section","content":[{"lang":"groovy","snippet":"def total = $('#total')\ntotal.should == 300.6","title":"exact number","type":"Snippet"},{"lang":"groovy","snippet":"def total = $('#total')\ntotal.shouldBe > 200","title":"greater than","type":"Snippet"},{"lang":"groovy","snippet":"def total = $('#total')\ntotal.shouldBe >= 300","title":"greater than or equal","type":"Snippet"},{"lang":"groovy","snippet":"def split = $('#split ul li')\nsplit.should == [100, 28, 172.6]","title":"list of numbers","type":"Snippet"},{"lang":"groovy","snippet":"def split = $('#split ul li')\nsplit.should == [100, lessThan(100), greaterThanOrEqual(150)]","title":"list of exact and greater/less","type":"Snippet"},{"meta":{"rightSide":true},"xmlAsJson":{"tagName":"div","attributes":[],"children":[{"tagName":"div","attributes":[{"name":"id","value":"\"total\""}],"children":[{"tagName":"","text":"300.6"}]},{"tagName":"div","attributes":[{"name":"id","value":"\"split\""}],"children":[{"tagName":"ul","attributes":[],"children":[{"tagName":"li","attributes":[],"children":[{"tagName":"","text":"100"}]},{"tagName":"li","attributes":[],"children":[{"tagName":"","text":"28"}]},{"tagName":"li","attributes":[],"children":[{"tagName":"","text":"172.6"}]}]}]}]},"paths":[],"type":"Xml"}]},{"title":"State","id":"state","type":"Section","content":[{"lang":"groovy","snippet":"def button = $(\"#action\")\nbutton.should beDisabled()\nbutton.shouldNot beEnabled()","title":"enabled/disabled","type":"Snippet"},{"lang":"groovy","snippet":"def feedback = $(\"#feedback\")\nfeedback.should beHidden()\nfeedback.shouldNot beVisible()","title":"visible/hidden","type":"Snippet"},{"lang":"html","snippet":"<div> <button id=\"action\" disabled>Click me</button> \n <div id=\"feedback\" style=\"display: none;\"></div> \n</div>","meta":{"rightSide":true},"type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Browser","pageTitle":"Matchers","pageMeta":{"type":["two-sides"]},"dirName":"browser","fileName":"matchers","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Text","id":"text"},{"title":"Numbers","id":"numbers"},{"title":"State","id":"state"}]}},{"type":"Page","content":[{"type":"Paragraph","content":[{"text":"Webtau provides database access layer ","type":"SimpleText"},{"code":"db.","type":"InlinedCode"},{"text":" to help with data setup, validation and manipulation.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Use it in conjunction with other layers like ","type":"SimpleText"},{"code":"http.","type":"InlinedCode"},{"text":" to write more powerful tests.","type":"SimpleText"}]},{"bulletMarker":"*","tight":true,"type":"BulletList","content":[{"type":"ListItem","content":[{"type":"Paragraph","content":[{"url":"/webtau/database/data-setup","isFile":false,"type":"Link","content":[{"text":"Data Setup","type":"SimpleText"}]}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"url":"/webtau/database/data-query","isFile":false,"type":"Link","content":[{"text":"Data Query","type":"SimpleText"}]}]}]}]},{"lang":"groovy","snippet":"PRICES << [ \"id\" | \"description\" | \"price\"] {\n          ___________________________________\n           \"id1\" | \"nice set\"    | 1000\n           \"id2\" | \"another set\" | 2000 }","entry":"should insert table data into a table","title":"example of data setup","bodyOnly":true,"startLine":"PRICES <<","endLine":"2000 }","type":"Snippet"},{"lang":"groovy","snippet":"def prices = db.query(\"select * from PRICES where id=:id\", [id: \"id1\"])\nprices.should == [\"ID\" | \"DESCRIPTION\" | \"PRICE\"] {\n                 ___________________________________\n                 \"id1\" | \"nice set\"    | 1000     }","entry":"query table with select statement and param","title":"validate parts of a table","bodyOnly":true,"startLine":"query with where clause start","endLine":"query with where clause end","excludeStartEnd":true,"type":"Snippet"}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Database","pageTitle":"Introduction","pageMeta":{},"dirName":"database","fileName":"introduction","viewOnRelativePath":null,"pageSectionIdTitles":[]}},{"type":"Page","content":[{"title":"Handcrafted Data","id":"handcrafted-data","type":"Section","content":[{"type":"Paragraph","content":[{"text":"One way to set up a DB state is to use handcrafted ","type":"SimpleText"},{"url":"/webtau/reference/table-data","isFile":false,"type":"Link","content":[{"text":"TableData","type":"SimpleText"}]},{"text":".","type":"SimpleText"}]},{"lang":"groovy","snippet":"def PRICES = db.table(\"PRICES\") // declare PRICES table\nPRICES << [ \"id\" | \"description\" | \"price\"] { // append two rows to PRICES\n           ___________________________________\n           \"id1\" | \"nice set\"    | 1000\n           \"id2\" | \"another set\" | 2000 }","entry":"should use data source provider for primary database","title":"data setup with hand crafted table data","bodyOnly":true,"startLine":"def PRICES","endLine":"2000 }","commentsType":"inline","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Alternatively use list of maps as the parameter to perform multiple rows insertion","type":"SimpleText"}]},{"lang":"groovy","snippet":"def PRICES = db.table(\"PRICES\")\nPRICES << [\n        [id: \"id1\", description: \"nice set\", price: 1000],\n        [id: \"id2\", description: \"warm set\", price: 2000]]","entry":"should insert list of maps into table","title":"inserting multiple rows using list","bodyOnly":true,"startLine":"def PRICES","endLine":"2000]","commentsType":"inline","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Use map as the parameter to perform a single row insertion","type":"SimpleText"}]},{"lang":"groovy","snippet":"def PRICES = db.table(\"PRICES\")\nPRICES << [id: \"id1\", description: \"nice set\", price: 1000]","entry":"should insert single row into table","title":"inserting single row","bodyOnly":true,"startLine":"def PRICES","endLine":"1000]","commentsType":"inline","type":"Snippet"}]},{"title":"Semi-Auto Generated TableData","id":"semi-auto-generated-tabledata","type":"Section","content":[{"type":"Paragraph","content":[{"url":"/webtau/reference/table-data","isFile":false,"type":"Link","content":[{"text":"TableData","type":"SimpleText"}]},{"text":" has features like ","type":"SimpleText"},{"url":"/webtau/reference/table-data#permutations","isFile":false,"type":"Link","content":[{"text":"permute","type":"SimpleText"}]},{"text":" and","type":"SimpleText"},{"type":"SoftLineBreak"},{"url":"/webtau/reference/table-data#guid","isFile":false,"type":"Link","content":[{"text":"cell.guid","type":"SimpleText"}]},{"text":" among others.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Using them can reduce the effort required to maintain data setup.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def PRICES = db.table(\"PRICES\")\nPRICES << [     \"id\" | \"description\" |          \"available\" |                \"type\" |       \"price\" ] {\n           _____________________________________________________________________________________________\n           cell.guid | \"nice set\"    |                 true |                \"card\" |            1000 // cell.guid generates random guid that can be used for ids\n           cell.guid | \"nice set\"    |                 true |                \"card\" | cell.above + 10 // cell.above refers values above and can be modified with simple math operations\n           cell.guid | \"another set\" | permute(true, false) | permute(\"rts\", \"fps\") | cell.above + 20 } // permute generates additional rows generating new rows with all the permutations","entry":"use table data permute, above and guid to generate rows","title":"data setup with hand crafted table data","bodyOnly":true,"startLine":"def PRICES","endLine":"cell.above + 20","commentsType":"inline","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: code above assumes ","type":"SimpleText"},{"code":"WebTauCore.*","type":"InlinedCode"},{"text":" static import or ","type":"SimpleText"},{"code":"WebTauGroovyDsl.*","type":"InlinedCode"},{"text":" static import","type":"SimpleText"}]},{"lang":"groovy","snippet":"import static org.testingisdocumenting.webtau.WebTauCore.*","includeRegexp":"import.*Core","type":"Snippet"},{"table":{"columns":[{"title":"ID"},{"title":"EXTERNAL_ID"},{"title":"DESCRIPTION"},{"title":"AVAILABLE"},{"title":"TYPE"},{"title":"PRICE"}],"data":[[[{"type":"Paragraph","content":[{"text":"40143f04-5a1f-49cd-9546-943f2088535c","type":"SimpleText"}]}],[],[{"type":"Paragraph","content":[{"text":"nice set","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"true","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"card","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"1000","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"bcb69bd4-5e23-4f22-8313-cc9b3f700812","type":"SimpleText"}]}],[],[{"type":"Paragraph","content":[{"text":"nice set","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"true","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"card","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"1010","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"79a6bc10-78bd-47ad-8671-c86640d81d15","type":"SimpleText"}]}],[],[{"type":"Paragraph","content":[{"text":"another set","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"true","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"rts","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"1030","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"33bdfe5d-29d9-4c87-9ceb-f9b58463c25a","type":"SimpleText"}]}],[],[{"type":"Paragraph","content":[{"text":"another set","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"rts","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"1050","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"755ce53f-6490-47f5-98a1-3655dd319ca8","type":"SimpleText"}]}],[],[{"type":"Paragraph","content":[{"text":"another set","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"true","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"fps","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"1070","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"f2b08c32-09ff-4f11-91d1-0660b2e7c7d9","type":"SimpleText"}]}],[],[{"type":"Paragraph","content":[{"text":"another set","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"fps","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"1090","type":"SimpleText"}]}]]]},"title":"PRICES","type":"Table"}]},{"title":"External File TableData","id":"external-file-tabledata","type":"Section","content":[{"lang":"groovy","snippet":"def PRICES = db.table(\"PRICES\")\nPRICES << data.csv.table('prices-db.csv')","entry":"use csv read data","title":"data setup with CSV data","bodyOnly":true,"startLine":"def PRICES","endLine":"data.csv.table","type":"Snippet"},{"lang":"csv","snippet":"id, description, available, type, price\nid1, description1, true, card, 200\nid2, description2, false, rts, 400","title":"prices-db.csv","type":"Snippet"},{"table":{"columns":[{"title":"ID"},{"title":"EXTERNAL_ID"},{"title":"DESCRIPTION"},{"title":"AVAILABLE"},{"title":"TYPE"},{"title":"PRICE"}],"data":[[[{"type":"Paragraph","content":[{"text":"id1","type":"SimpleText"}]}],[],[{"type":"Paragraph","content":[{"text":"description1","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"true","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"card","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"200","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"id2","type":"SimpleText"}]}],[],[{"type":"Paragraph","content":[{"text":"description2","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"rts","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"400","type":"SimpleText"}]}]]]},"title":"PRICES","type":"Table"}]},{"title":"Cleaning Tables","id":"cleaning-tables","type":"Section","content":[{"lang":"groovy","snippet":"db.update(\"delete from PRICES where price > :price\", [price: 950])","entry":"delete with params","title":"delete data","bodyOnly":true,"includeRegexp":"delete","commentsType":"inline","type":"Snippet"},{"lang":"groovy","snippet":"db.update(\"delete from PRICES where price > :price\", 950)","entry":"delete with single param shortcut","title":"delete data with single param shortcut","bodyOnly":true,"includeRegexp":"delete","commentsType":"inline","type":"Snippet"}]},{"title":"Updating Tables","id":"updating-tables","type":"Section","content":[{"table":{"columns":[{"title":"ID"},{"title":"EXTERNAL_ID"},{"title":"DESCRIPTION"},{"title":"AVAILABLE"},{"title":"TYPE"},{"title":"PRICE"}],"data":[[[{"type":"Paragraph","content":[{"text":"id1","type":"SimpleText"}]}],[],[{"type":"Paragraph","content":[{"text":"nice set","type":"SimpleText"}]}],[],[],[{"type":"Paragraph","content":[{"text":"1000","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"id2","type":"SimpleText"}]}],[],[{"type":"Paragraph","content":[{"text":"another set","type":"SimpleText"}]}],[],[],[{"type":"Paragraph","content":[{"text":"2000","type":"SimpleText"}]}]]]},"title":"PRICES","type":"Table"},{"lang":"groovy","snippet":"db.update(\"update PRICES set price=:price where id=:id\", [id: 'id2', price: 4000])","entry":"should run updates with params","title":"update data","bodyOnly":true,"includeRegexp":"db.update","commentsType":"inline","type":"Snippet"},{"table":{"columns":[{"title":"ID"},{"title":"EXTERNAL_ID"},{"title":"DESCRIPTION"},{"title":"AVAILABLE"},{"title":"TYPE"},{"title":"PRICE"}],"data":[[[{"type":"Paragraph","content":[{"text":"id1","type":"SimpleText"}]}],[],[{"type":"Paragraph","content":[{"text":"nice set","type":"SimpleText"}]}],[],[],[{"type":"Paragraph","content":[{"text":"1000","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"id2","type":"SimpleText"}]}],[],[{"type":"Paragraph","content":[{"text":"another set","type":"SimpleText"}]}],[],[],[{"type":"Paragraph","content":[{"text":"4000","type":"SimpleText"}]}]]]},"title":"PRICES after update","type":"Table"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Database","pageTitle":"Data Setup","pageMeta":{},"dirName":"database","fileName":"data-setup","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Handcrafted Data","id":"handcrafted-data"},{"title":"Semi-Auto Generated TableData","id":"semi-auto-generated-tabledata"},{"title":"External File TableData","id":"external-file-tabledata"},{"title":"Cleaning Tables","id":"cleaning-tables"},{"title":"Updating Tables","id":"updating-tables"}]}},{"type":"Page","content":[{"title":"Full Table","id":"full-table","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To query all data from a table use:","type":"SimpleText"}]},{"lang":"groovy","snippet":"def PRICES = db.table(\"PRICES\")\nPRICES.should == [\"ID\" | \"DESCRIPTION\" | \"PRICE\"] {\n                 ___________________________________\n                 \"id1\" | \"nice set\"    | 1000\n                 \"id2\" | \"another set\" | 2000 }","entry":"query method on table should be optional during comparison","title":"validate whole table","bodyOnly":true,"startLine":"query whole table start","endLine":"query whole table end","excludeStartEnd":true,"type":"Snippet"}]},{"title":"Custom Query","id":"custom-query","type":"Section","content":[{"lang":"groovy","snippet":"def prices = db.query(\"select * from PRICES where id=:id\", [id: \"id1\"])\nprices.should == [\"ID\" | \"DESCRIPTION\" | \"PRICE\"] {\n                 ___________________________________\n                 \"id1\" | \"nice set\"    | 1000     }","entry":"query table with select statement and param","title":"validate parts of a table","bodyOnly":true,"startLine":"query with where clause start","endLine":"query with where clause end","excludeStartEnd":true,"type":"Snippet"},{"lang":"groovy","snippet":"def prices = db.query(\"select * from PRICES where id=:id\", [id: \"id1\"])\nprices.should == [ID: \"id1\", \"DESCRIPTION\": \"nice set\", PRICE: 1000]","entry":"query table to match one row and assert against map","title":"validate parts of a table against map","bodyOnly":true,"startLine":"query with where clause start","endLine":"query with where clause end","excludeStartEnd":true,"type":"Snippet"},{"lang":"groovy","snippet":"def prices = db.query(\"select * from PRICES where id in (:ids)\", [ids: [\"id1\", \"id2\"]])\nprices.should == [\"ID\" | \"DESCRIPTION\" | \"PRICE\"] {\n                 ___________________________________\n                 \"id1\" | \"nice set\"    | 1000\n                 \"id2\" | \"another set\" | 2000     }","entry":"query table with select statement and array param","title":"use array as input","bodyOnly":true,"startLine":"query with where clause start","endLine":"query with where clause end","excludeStartEnd":true,"type":"Snippet"}]},{"title":"Named Parameter Shortcut","id":"named-parameter-shortcut","type":"Section","content":[{"type":"Paragraph","content":[{"text":"If your query uses a single unique placeholder name, you can pass a regular value instead of a ","type":"SimpleText"},{"code":"java.util.Map","type":"InlinedCode"}]},{"lang":"groovy","snippet":"def prices = db.query(\"select * from PRICES where id=:id or external_id=:id\", \"id1\")\nprices.should == [ID: \"id1\", \"DESCRIPTION\": \"nice set\", PRICE: 1000]","entry":"query table to match one row using single param shortcut and assert against map","title":"use regular value in case of one unique placeholder name","bodyOnly":true,"startLine":"query with where clause start","endLine":"query with where clause end","excludeStartEnd":true,"type":"Snippet"}]},{"title":"Lazy Declaration","id":"lazy-declaration","type":"Section","content":[{"type":"Paragraph","content":[{"code":"query","type":"InlinedCode"},{"text":" doesn't query database at the call time. It defines a query to be used later.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def prices = db.query(\"select * from PRICES\")\n\nprices.shouldNot == []\ndb.update(\"delete from PRICES\")\nprices.should == []","entry":"create query is lazy","title":"create query is lazy","bodyOnly":true,"startLine":"query with where clause start","endLine":"query with where clause end","excludeStartEnd":true,"type":"Snippet"},{"lang":"groovy","snippet":"def PRICES = db.table(\"PRICES\")\ndef numberOfItems = PRICES.queryCount()\n\nnumberOfItems.shouldNot == 0\ndb.update(\"delete from PRICES\")\nnumberOfItems.should == 0","entry":"lazy count query","title":"lazy count query","bodyOnly":true,"startLine":"query with where clause start","endLine":"query with where clause end","excludeStartEnd":true,"type":"Snippet"}]},{"title":"Single Value","id":"single-value","type":"Section","content":[{"lang":"groovy","snippet":"def price = db.query(\"select price from PRICES where id=:id\", [id: 'id1'])\nprice.should == 1000\nprice.shouldNot == 2000","entry":"should query single value with params","title":"validate single value","bodyOnly":true,"startLine":"query single value params start","endLine":"query single value params end","excludeStartEnd":true,"type":"Snippet"}]},{"title":"Wait On Result","id":"wait-on-result","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"waitTo","type":"InlinedCode"},{"text":" on query result to continuously query database until condition is met or timeout is reached.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def count = db.query(\"select count(*) from PRICES\")\ncount.should == 2\n\n// event happen somewhere to increase the number of rows...\ncount.waitTo == 3","entry":"wait for count to change","title":"wait for count to change","bodyOnly":true,"startLine":"query with where clause start","endLine":"query with where clause end","excludeStartEnd":true,"type":"Snippet"}]},{"title":"Query Result Value","id":"query-result-value","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Value returned from ","type":"SimpleText"},{"code":"query","type":"InlinedCode"},{"text":" methods is an instance of ","type":"SimpleText"},{"code":"DbQuery","type":"InlinedCode"},{"text":" type.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"No actual query is performed when ","type":"SimpleText"},{"code":"DbQuery","type":"InlinedCode"},{"text":" instance is created. It holds information about what query is, and what its parameters","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"and only performs query when validation is triggered.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"queryXXX","type":"InlinedCode"},{"text":" to access underlying value.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def price = db.query(\"select price from PRICES where id=:id\", [id: 'id1'])\nif (price.singleValue() > 100) {\n    println(\"do something\")\n}","entry":"value returned from query is a special wrapper value","title":"access single value","bodyOnly":true,"startLine":"single value access start","endLine":"single value access end","excludeStartEnd":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"Avoid: When you use ","type":"SimpleText"},{"code":"queryXXX","type":"InlinedCode"},{"text":" for assertions you may lose additional report information","type":"SimpleText"}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Database","pageTitle":"Data Query","pageMeta":{},"dirName":"database","fileName":"data-query","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Full Table","id":"full-table"},{"title":"Custom Query","id":"custom-query"},{"title":"Named Parameter Shortcut","id":"named-parameter-shortcut"},{"title":"Lazy Declaration","id":"lazy-declaration"},{"title":"Single Value","id":"single-value"},{"title":"Wait On Result","id":"wait-on-result"},{"title":"Query Result Value","id":"query-result-value"}]}},{"type":"Page","content":[{"title":"JDBC","id":"jdbc","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau is JVM based API and it uses ","type":"SimpleText"},{"url":"https://en.wikipedia.org/wiki/Java_Database_Connectivity#:~:text=Java%20Database%20Connectivity%20(JDBC)%20is,used%20for%20Java%20database%20connectivity.","isFile":false,"type":"Link","content":[{"text":"JDBC","type":"SimpleText"}]},{"type":"SoftLineBreak"},{"text":"interface behind the scenes to connect to a database.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"You don't need to know how to use JDBC API as webtau expose higher level APIs, but you will need to understand how","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"to build JDBC connection url to be able to connect to a database.","type":"SimpleText"}]}]},{"title":"Primary Database","id":"primary-database","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Primary DB config used when execute operations using ","type":"SimpleText"},{"code":"db.update","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"db.query","type":"InlinedCode"},{"text":", etc, without specifying data source name.","type":"SimpleText"}]},{"lang":"groovy","snippet":"import groovy.grape.Grape\n\nGrape.grab(group:'com.h2database', module: 'h2', version: '1.4.200', // auto download DB driver dependency (in this case H2 db)\n        classLoader: ClassLoader.getSystemClassLoader())\n\ndbUrl = \"jdbc:h2:file:~/h2db/test-db\" // primary DB JDBC connection url\ndbDriverClassName = \"org.h2.Driver\" // JDBC driver class name\ndbUserName = \"sa\"\ndbPassword = \"password\"","title":"Primary DB config","excludeRegexp":"package","commentsType":"inline","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Database","pageTitle":"Config","pageMeta":{},"dirName":"database","fileName":"config","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"JDBC","id":"jdbc"},{"title":"Primary Database","id":"primary-database"}]}},{"type":"Page","content":[{"type":"Paragraph","content":[{"text":"Webtau provides ","type":"SimpleText"},{"code":"cli.","type":"InlinedCode"},{"text":" module to run and validate command line tools.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Combine it with other modules to create powerful tests: use ","type":"SimpleText"},{"code":"cli","type":"InlinedCode"},{"text":" to run a tool, and","type":"SimpleText"},{"type":"SoftLineBreak"},{"code":"http","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"graphql","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"browser","type":"InlinedCode"},{"text":", or ","type":"SimpleText"},{"code":"db","type":"InlinedCode"},{"text":" to validate the outcome.","type":"SimpleText"}]},{"lang":"groovy","snippet":"scenario(\"example of ls run\") {\n    cli.run('ls') {\n        output.should contain('scripts')\n    }\n}","title":"basicLs.groovy","excludeRegexp":["package","import","doc.capture"],"type":"Snippet"},{"command":"webtau basicLs.groovy","paramsToHighlight":[],"type":"CliCommand"},{"lang":"txt","snippet":"examples\npom.xml\npom.xml.versionsBackup\nscripts\nsrc\ntarget\ntest-expectations\nwebtau-reports","highlightPath":"doc-artifacts/ls-run/out.matched.txt","highlight":[3],"type":"Snippet"}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Cli","pageTitle":"Introduction","pageMeta":{},"dirName":"cli","fileName":"introduction","viewOnRelativePath":null,"pageSectionIdTitles":[]}},{"type":"Page","content":[{"type":"Paragraph","content":[{"text":"Webtau can run commands in ","type":"SimpleText"},{"code":"foreground","type":"InlinedCode"},{"text":" and in ","type":"SimpleText"},{"code":"background","type":"InlinedCode"},{"text":". When command is ran in ","type":"SimpleText"},{"code":"foreground","type":"InlinedCode"},{"text":" webtau will","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"wait for the command to finish.","type":"SimpleText"}]},{"title":"Run","id":"run","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To run a command use ","type":"SimpleText"},{"code":"cli.run","type":"InlinedCode"},{"text":" with a single string parameter that includes a command and","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"all its arguments:","type":"SimpleText"}]},{"lang":"groovy","snippet":"cli.run('echo hello world')","title":"run command","type":"Snippet"}]},{"title":"Run With Validation","id":"run-with-validation","type":"Section","content":[{"lang":"groovy","snippet":"cli.run('echo hello world') {\n    output.should contain('hello')\n    output.should contain('world')\n}","title":"output validation","type":"Snippet"},{"lang":"groovy","snippet":"cli.run('scripts/error-output') {\n    error.should == 'error B892T'\n}","title":"error validation","type":"Snippet"},{"lang":"groovy","snippet":"cli.run('scripts/exit-code 8') {\n    exitCode.should == 8\n    exitCode.shouldNot == 0\n}","title":"exit code validation","type":"Snippet"}]},{"title":"Implicit Exit Code Validation","id":"implicit-exit-code-validation","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau performs implicit exit code validation and adds ","type":"SimpleText"},{"code":"exitCode","type":"InlinedCode"},{"text":" equals zero when","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"you don't specify explicit ","type":"SimpleText"},{"code":"exitCode","type":"InlinedCode"},{"text":" validation.","type":"SimpleText"}]},{"lang":"groovy","snippet":"cli.run('echo hello world')","title":"implicit exit validation happens here","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Example above is equivalent to","type":"SimpleText"}]},{"lang":"groovy","snippet":"cli.run('echo hello world') {\n    exitCode.should == 0\n}","title":"exit code check webtau performs if you don't write explicit validation","type":"Snippet"}]},{"title":"Run Result","id":"run-result","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use the result of ","type":"SimpleText"},{"code":"cli.run","type":"InlinedCode"},{"text":" if you need to process the output of the command.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def result = cli.run('echo hello world')\n\nprintln result.output\nprintln result.error\nif (result.exitCode == 1) {\n    // ...\n}","title":"using run result","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Warning: Perform validation inside validation block so webtau can track what was checked.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def result = cli.run('scripts/generate-id')\ndef id = result.extractFromOutputByRegexp(\"id=(\\\\d+)\")","title":"extract from output by regexp","startLine":"example","endLine":"example","excludeStartEnd":true,"type":"Snippet"},{"lang":"groovy","snippet":"def result = cli.run('scripts/generate-id')\ndef id = result.extractFromErrorByRegexp(\"id=(\\\\d+)\")","title":"extract from error by regexp","startLine":"example","endLine":"example","excludeStartEnd":true,"type":"Snippet"}]},{"title":"Working Dir","id":"working-dir","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"cli.workingDir","type":"InlinedCode"},{"text":" as a second parameter to ","type":"SimpleText"},{"code":"cli.run","type":"InlinedCode"},{"text":" to set a working dir:","type":"SimpleText"}]},{"lang":"groovy","snippet":"cli.run('./listing', cli.workingDir('../scripts')) {\n    output.should contain('listing files')\n    output.should contain('sleeps')\n}","title":"set working dir","type":"Snippet"}]},{"title":"Environment Variables","id":"environment-variables","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"cli.env","type":"InlinedCode"},{"text":" as a second parameter to ","type":"SimpleText"},{"code":"cli.run","type":"InlinedCode"},{"text":" to set the environment variables:","type":"SimpleText"}]},{"lang":"groovy","snippet":"cli.run('scripts/hello-env-var', cli.env([my_var: 'webtau'])) {\n    output.should == 'hello webtau'\n}","title":"set environment variable","type":"Snippet"}]},{"title":"Chain Cli Run Config","id":"chain-cli-run-config","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Combine configs by using ","type":"SimpleText"},{"code":"cli.env(...).workingDir(...)","type":"InlinedCode"},{"text":" in any order to set both:","type":"SimpleText"}]},{"lang":"groovy","snippet":"cli.run('./hello-env-var',\n        cli.workingDir('../scripts').env([my_var: 'webtau'])) {\n    output.should == 'hello webtau'\n}","title":"set environment variable and working dir","type":"Snippet"}]},{"title":"Path","id":"path","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To specify ","type":"SimpleText"},{"code":"PATH","type":"InlinedCode"},{"text":" to use for CLI commands lookup use","type":"SimpleText"}]},{"lang":"groovy","snippet":"cliPath = ['../scripts/more']","title":"webtau.config.groovy","type":"Snippet"}]},{"title":"Timeout","id":"timeout","type":"Section","content":[{"type":"Paragraph","content":[{"code":"cli.run","type":"InlinedCode"},{"text":" command fails if it doesn't complete in 30 seconds.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"To override default timeout use ","type":"SimpleText"},{"code":"cliTimeout","type":"InlinedCode"},{"text":" config value:","type":"SimpleText"}]},{"lang":"groovy","snippet":"cliTimeout = 400","title":"webtau.config.groovy","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: Timeout value is specified in milliseconds","type":"SimpleText"}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Cli","pageTitle":"Foreground Command","pageMeta":{},"dirName":"cli","fileName":"foreground-command","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Run","id":"run"},{"title":"Run With Validation","id":"run-with-validation"},{"title":"Implicit Exit Code Validation","id":"implicit-exit-code-validation"},{"title":"Run Result","id":"run-result"},{"title":"Working Dir","id":"working-dir"},{"title":"Environment Variables","id":"environment-variables"},{"title":"Chain Cli Run Config","id":"chain-cli-run-config"},{"title":"Path","id":"path"},{"title":"Timeout","id":"timeout"}]}},{"type":"Page","content":[{"type":"Paragraph","content":[{"text":"Webtau can run commands in ","type":"SimpleText"},{"code":"foreground","type":"InlinedCode"},{"text":" and in ","type":"SimpleText"},{"code":"background","type":"InlinedCode"},{"text":". When command is ran in ","type":"SimpleText"},{"code":"background","type":"InlinedCode"},{"text":" webtau","type":"SimpleText"},{"type":"HardLineBreak"},{"text":"will continue execution, leaving command to run its course.","type":"SimpleText"}]},{"title":"Run In Background","id":"run-in-background","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To run a command in a background use ","type":"SimpleText"},{"code":"cli.runInBackground","type":"InlinedCode"},{"text":" with a single string parameter that includes a command and","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"all its arguments:","type":"SimpleText"}]},{"lang":"groovy","snippet":"cli.runInBackground('scripts/sleeps')\nprintln \"process above may still be running\"","title":"run command in background","type":"Snippet"}]},{"title":"Stop Command","id":"stop-command","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":".stop","type":"InlinedCode"},{"text":" to explicitly terminate the running background command","type":"SimpleText"}]},{"lang":"groovy","snippet":"def command = cli.runInBackground('scripts/sleeps')\nprintln \"some commands that assume running process\"\n\ncommand.stop()","title":"command termination","type":"Snippet"}]},{"title":"Interacting With Command","id":"interacting-with-command","type":"Section","content":[{"type":"Paragraph","content":[{"text":"We are going to test a \"hello world\" script that asks you for a name and greet you:","type":"SimpleText"}]},{"lang":"","snippet":"#!/bin/bash\necho \"enter your name\"\nread name\necho \"hello $name\"","title":"scripts/hello-world","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":".send","type":"InlinedCode"},{"text":" to send input to a running command. Use ","type":"SimpleText"},{"code":".output.waitTo","type":"InlinedCode"},{"text":" to wait for command to rich a certain state:","type":"SimpleText"}]},{"lang":"groovy","snippet":"def helloWorld = cli.runInBackground(\"scripts/hello-world\")\nhelloWorld.output.waitTo contain(\"enter your name\")\n\nhelloWorld.send(\"webtau\\n\")\nhelloWorld.output.waitTo contain(\"hello webtau\")\n\nhelloWorld.stop()","title":"wait and send input","type":"Snippet"},{"type":"Paragraph","content":[{"text":"You can use ","type":"SimpleText"},{"code":"<<","type":"InlinedCode"},{"text":" instead of ","type":"SimpleText"},{"code":".send","type":"InlinedCode"},{"text":" for extra syntax sugar:","type":"SimpleText"}]},{"lang":"groovy","snippet":"def helloWorld = cli.runInBackground(\"scripts/hello-world\")\nhelloWorld.output.waitTo contain(\"enter your name\")\n\nhelloWorld << \"webtau\\n\"\nhelloWorld.output.waitTo contain(\"hello webtau\")\n\nhelloWorld.stop()","title":"use << as .send","type":"Snippet"}]},{"title":"Working Dir","id":"working-dir","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"cli.workingDir","type":"InlinedCode"},{"text":" as a second parameter to ","type":"SimpleText"},{"code":"cli.runInBackground","type":"InlinedCode"},{"text":" to set a working dir:","type":"SimpleText"}]},{"lang":"groovy","snippet":"def command = cli.runInBackground('./listing', cli.workingDir('../scripts'))\ncommand.output.waitTo contain('listing files')\ncommand.output.waitTo contain('sleeps')\ncommand.stop()","title":"set working dir","type":"Snippet"}]},{"title":"Environment Variables","id":"environment-variables","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"cli.env","type":"InlinedCode"},{"text":" as a second parameter to ","type":"SimpleText"},{"code":"cli.runInBackground","type":"InlinedCode"},{"text":" to set the environment variables:","type":"SimpleText"}]},{"lang":"groovy","snippet":"def command = cli.runInBackground('scripts/hello-env-var', cli.env([my_var: 'webtau']))\ncommand.output.waitTo contain('hello webtau')\ncommand.stop()","title":"set environment variable","type":"Snippet"}]},{"title":"Chain Cli Run Config","id":"chain-cli-run-config","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Combine configs by using ","type":"SimpleText"},{"code":"cli.env(...).workingDir(...)","type":"InlinedCode"},{"text":" in any order to set both:","type":"SimpleText"}]},{"lang":"groovy","snippet":"def command = cli.runInBackground('./hello-env-var',\n        cli.workingDir('../scripts').env([my_var: 'webtau']))\ncommand.output.waitTo contain('hello webtau')\ncommand.stop()","title":"set environment variable and working dir","type":"Snippet"}]},{"title":"Path","id":"path","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To specify ","type":"SimpleText"},{"code":"PATH","type":"InlinedCode"},{"text":" to use for CLI commands lookup use","type":"SimpleText"}]},{"lang":"groovy","snippet":"cliPath = ['../scripts/more']","title":"webtau.config.groovy","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Cli","pageTitle":"Background Command","pageMeta":{},"dirName":"cli","fileName":"background-command","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Run In Background","id":"run-in-background"},{"title":"Stop Command","id":"stop-command"},{"title":"Interacting With Command","id":"interacting-with-command"},{"title":"Working Dir","id":"working-dir"},{"title":"Environment Variables","id":"environment-variables"},{"title":"Chain Cli Run Config","id":"chain-cli-run-config"},{"title":"Path","id":"path"}]}},{"type":"Page","content":[{"title":"Read Eval Print Loop","id":"read-eval-print-loop","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau command line tool comes with a ","type":"SimpleText"},{"code":"REPL","type":"InlinedCode"},{"text":" mode that stands for 'read-eval-print-loop'. REPL is an established way to","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"perform interactive execution of an API for the purpose of learning or experimenting.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"The REPL preserves the context of execution and each new command you run can rely on the established context.","type":"SimpleText"}]}]},{"title":"Start REPL","id":"start-repl","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To run webtau in REPL mode run","type":"SimpleText"}]},{"command":"webtau repl","paramsToHighlight":[],"type":"CliCommand"},{"title":"REPL session","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m 2 + 2","\u001B[1m===>\u001B[m 4","\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m a = 5","\u001B[1m===>\u001B[m 5","\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m a + 3","\u001B[1m===>\u001B[m 8"],"type":"CliOutput"}]},{"title":"Experiment With API","id":"experiment-with-api","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use the REPL to try out various apis like ","type":"SimpleText"},{"code":"http.","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"browser.","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"db.","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"cli.","type":"InlinedCode"},{"text":", etc.","type":"SimpleText"}]},{"title":"exploring http.get","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m http.get(\"https://jsonplaceholder.typicode.com/todos/1\")","\u001B[33m> \u001B[34mexecuting HTTP GET \u001B[35mhttps://jsonplaceholder.typicode.com/todos/1\u001B[0m","  \u001B[32m. \u001B[0m\u001B[1mheader.statusCode \u001B[32mequals 200","      matches:","      ","      header.statusCode:   actual: 200 <java.lang.Integer>","                         expected: 200 <java.lang.Integer>\u001B[33m (\u001B[32m28ms\u001B[33m)\u001B[0m","  \u001B[33mresponse\u001B[36m (application/json; charset=utf-8):\u001B[0m","  \u001B[33m{\u001B[0m","    \u001B[35m\"userId\": \u001B[36m1\u001B[33m,\u001B[0m","    \u001B[35m\"id\": \u001B[36m1\u001B[33m,\u001B[0m","    \u001B[35m\"title\": \u001B[32m\"delectus aut autem\"\u001B[33m,\u001B[0m","    \u001B[35m\"completed\": \u001B[36mfalse\u001B[0m","  \u001B[33m}\u001B[0m","\u001B[32m. \u001B[34mexecuted HTTP GET \u001B[35mhttps://jsonplaceholder.typicode.com/todos/1\u001B[33m (\u001B[32m692ms\u001B[33m)\u001B[0m"],"type":"CliOutput"}]},{"title":"Setting Config Value","id":"setting-config-value","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"cfg.url = \"http://url\"","type":"InlinedCode"},{"text":" to set base url for experiments.","type":"SimpleText"}]},{"title":"setting cfg value","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m cfg.url = \"https://jsonplaceholder.typicode.com\"","\u001B[33m> \u001B[34msetting \u001B[0m\u001B[1murl\u001B[0m","  \u001B[35msource\u001B[37m: \u001B[32mmanual\u001B[0m","  \u001B[35murl\u001B[37m: \u001B[32mhttps://jsonplaceholder.typicode.com\u001B[0m","\u001B[32m. \u001B[34mset \u001B[0m\u001B[1murl\u001B[33m (\u001B[32m0ms\u001B[33m)\u001B[0m","\u001B[1m===>\u001B[m https://jsonplaceholder.typicode.com","\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m http.get(\"/todos/1\")","\u001B[33m> \u001B[34mexecuting HTTP GET \u001B[35mhttps://jsonplaceholder.typicode.com/todos/1\u001B[0m","  \u001B[32m. \u001B[0m\u001B[1mheader.statusCode \u001B[32mequals 200","      matches:","      ","      header.statusCode:   actual: 200 <java.lang.Integer>","                         expected: 200 <java.lang.Integer>\u001B[33m (\u001B[32m1ms\u001B[33m)\u001B[0m","  \u001B[33mresponse\u001B[36m (application/json; charset=utf-8):\u001B[0m","  \u001B[33m{\u001B[0m","    \u001B[35m\"userId\": \u001B[36m1\u001B[33m,\u001B[0m","    \u001B[35m\"id\": \u001B[36m1\u001B[33m,\u001B[0m","    \u001B[35m\"title\": \u001B[32m\"delectus aut autem\"\u001B[33m,\u001B[0m","    \u001B[35m\"completed\": \u001B[36mfalse\u001B[0m","  \u001B[33m}\u001B[0m","\u001B[32m. \u001B[34mexecuted HTTP GET \u001B[35mhttps://jsonplaceholder.typicode.com/todos/1\u001B[33m (\u001B[32m28ms\u001B[33m)\u001B[0m"],"type":"CliOutput"}]},{"title":"Preserving Browser Context","id":"preserving-browser-context","type":"Section","content":[{"type":"Paragraph","content":[{"text":"During browser testing the REPL preserves the context of an opened browser, so you can experiment","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"with css selectors and element actions without re-opening the browser and setting the right web app state.","type":"SimpleText"}]},{"title":"opened browser stays","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m browser.open(\"file:///home/runner/work/webtau/webtau/webtau-cli-testing/src/test/groovy/data/basic.html\")","\u001B[33m> \u001B[34minitializing \u001B[36mwebdriver \u001B[33mfor \u001B[0m\u001B[1mchrome\u001B[0m","\u001B[32m. \u001B[34minitialized \u001B[36mwebdriver \u001B[33mfor \u001B[0m\u001B[1mchrome\u001B[33m (\u001B[32m809ms\u001B[33m)\u001B[0m","\u001B[33m> \u001B[34mopening \u001B[35mfile:///home/runner/work/webtau/webtau/webtau-cli-testing/src/test/groovy/data/basic.html\u001B[0m","\u001B[32m. \u001B[34mopened \u001B[35mfile:///home/runner/work/webtau/webtau/webtau-cli-testing/src/test/groovy/data/basic.html\u001B[33m (\u001B[32m65ms\u001B[33m)\u001B[0m"],"type":"CliOutput"},{"type":"Paragraph","content":[{"text":"Using element selectors provides additional information in REPL mode to help with exploration","type":"SimpleText"}]},{"title":"trying css selectors","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m $(\"p\")","\u001B[32melement is found: \u001B[35mby css \u001B[1m\u001B[35mp\u001B[0m","\u001B[33m           getText(): \u001B[32mhello web page\u001B[0m"],"type":"CliOutput"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"REPL","pageTitle":"Experiments","pageMeta":{},"dirName":"REPL","fileName":"experiments","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Read Eval Print Loop","id":"read-eval-print-loop"},{"title":"Start REPL","id":"start-repl"},{"title":"Experiment With API","id":"experiment-with-api"},{"title":"Setting Config Value","id":"setting-config-value"},{"title":"Preserving Browser Context","id":"preserving-browser-context"}]}},{"type":"Page","content":[{"title":"Incremental Tests Development","id":"incremental-tests-development","type":"Section","content":[{"bulletListType":"Steps","type":"Meta"},{"type":"Paragraph","content":[{"text":"You can combine experimentation in REPL with actual test development. Your feedback loop becomes even faster:","type":"SimpleText"}]},{"bulletMarker":"*","tight":true,"type":"BulletList","content":[{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"Try API","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"Add the line to test","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"Re-run test with REPL","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"Experiment within preserved context","type":"SimpleText"}]}]}]},{"type":"Paragraph","content":[{"text":"Enumerate test files you want to REPL with and add ","type":"SimpleText"},{"code":"repl","type":"InlinedCode"},{"text":" to get into incremental tests development mode","type":"SimpleText"}]},{"command":"webtau testscipts/* repl","paramsToHighlight":[],"type":"CliCommand"}]},{"title":"Test Files Listing","id":"test-files-listing","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"ls","type":"InlinedCode"},{"text":" command to list available test files.","type":"SimpleText"}]},{"title":"listing available test files","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m ls","\u001B[34mTest files:\u001B[0m","\u001B[33m0\u001B[35m testscripts/dataDownload.groovy\u001B[0m","\u001B[33m1\u001B[35m testscripts/downstreamValidation.groovy\u001B[0m","\u001B[33m2\u001B[35m testscripts/resourceCreation.groovy\u001B[0m"],"type":"CliOutput"},{"type":"Paragraph","content":[{"text":"Note: Listing will happen automatically at the start","type":"SimpleText"}]}]},{"title":"Test File Selection","id":"test-file-selection","type":"Section","content":[{"title":"select test file by index","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m s 0","\u001B[34mTest scenarios of \u001B[35mtestscripts/dataDownload.groovy\u001B[34m:\u001B[0m","\u001B[33m0\u001B[35m clean data\u001B[0m","\u001B[33m1\u001B[35m download data\u001B[0m","\u001B[33m2\u001B[35m validate data\u001B[0m"],"type":"CliOutput"},{"title":"get back to file selection","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m b","\u001B[34mTest files:\u001B[0m","\u001B[33m0\u001B[35m testscripts/dataDownload.groovy\u001B[0m","\u001B[33m1\u001B[35m testscripts/downstreamValidation.groovy\u001B[0m","\u001B[33m2\u001B[35m testscripts/resourceCreation.groovy\u001B[0m"],"type":"CliOutput"},{"title":"select test file by text","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m s 'datadownload'","\u001B[34mTest scenarios of \u001B[35mtestscripts/dataDownload.groovy\u001B[34m:\u001B[0m","\u001B[33m0\u001B[35m clean data\u001B[0m","\u001B[33m1\u001B[35m download data\u001B[0m","\u001B[33m2\u001B[35m validate data\u001B[0m"],"type":"CliOutput"}]},{"title":"Single Test Scenario Run","id":"single-test-scenario-run","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Selected test file has three scenarios","type":"SimpleText"}]},{"lang":"groovy","snippet":"package testscripts\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.scenario\n\nscenario(\"clean data\") {\n    println \"cleaning...\"\n}\n\nscenario(\"download data\") {\n    println \"downloading...\"\n}\n\nscenario(\"validate data\") {\n    println \"validating...\"\n}","title":"testscripts/dataDownload.groovy","type":"Snippet"},{"type":"Paragraph","content":[{"text":"To run scenario by index","type":"SimpleText"}]},{"title":"run test scenario by an index","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m r 0","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m before first test \u001B[35m(Setup)\u001B[0m","\u001B[32m[.] \u001B[34mbefore first test \u001B[35m(Setup)\u001B[0m","\u001B[0m","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mclean data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m clean data \u001B[35m(dataDownload.groovy)\u001B[0m","cleaning...","\u001B[32m[.] \u001B[34mclean data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m"],"type":"CliOutput"},{"type":"Paragraph","content":[{"text":"Use negative index to select from the bottom, i.e. -1 will select the last scenario, -2 will select second from the end","type":"SimpleText"}]},{"title":"run test scenario by a negative index","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m r -1","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mvalidate data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m validate data \u001B[35m(dataDownload.groovy)\u001B[0m","validating...","\u001B[32m[.] \u001B[34mvalidate data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m"],"type":"CliOutput"},{"type":"Paragraph","content":[{"text":"To run scenario by partial name match","type":"SimpleText"}]},{"title":"run test scenario by text","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m r 'clean'","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mclean data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m clean data \u001B[35m(dataDownload.groovy)\u001B[0m","cleaning...","\u001B[32m[.] \u001B[34mclean data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m"],"type":"CliOutput"}]},{"title":"Re-run Last Run","id":"re-run-last-run","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"r","type":"InlinedCode"},{"text":" to re-run previous run","type":"SimpleText"}]},{"title":"run test scenario by text","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m r","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mclean data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m clean data \u001B[35m(dataDownload.groovy)\u001B[0m","cleaning...","\u001B[32m[.] \u001B[34mclean data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m"],"type":"CliOutput"}]},{"title":"Multiple Test Scenarios Run","id":"multiple-test-scenarios-run","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use comma separated list of indexes or partial text match to run more than one scenario","type":"SimpleText"}]},{"title":"run multiple scenario by indexes","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m r 0, 1","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mclean data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m clean data \u001B[35m(dataDownload.groovy)\u001B[0m","cleaning...","\u001B[32m[.] \u001B[34mclean data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mdownload data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m download data \u001B[35m(dataDownload.groovy)\u001B[0m","downloading...","\u001B[32m[.] \u001B[34mdownload data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m"],"type":"CliOutput"},{"title":"run multiple scenarios by partial text matches","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m r 'download', 'clean'","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mdownload data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m download data \u001B[35m(dataDownload.groovy)\u001B[0m","downloading...","\u001B[32m[.] \u001B[34mdownload data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mclean data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m clean data \u001B[35m(dataDownload.groovy)\u001B[0m","cleaning...","\u001B[32m[.] \u001B[34mclean data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m"],"type":"CliOutput"},{"type":"Paragraph","content":[{"text":"Note: Order of execution follows the order of specified indexes or text","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"r from:to","type":"InlinedCode"},{"text":" to run a range of scenarios. ","type":"SimpleText"},{"code":"From","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"to","type":"InlinedCode"},{"text":" can be either index or partial text match.","type":"SimpleText"}]},{"title":"run multiple scenarios by mixed range","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m r 0:'validate'","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mclean data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m clean data \u001B[35m(dataDownload.groovy)\u001B[0m","cleaning...","\u001B[32m[.] \u001B[34mclean data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mdownload data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m download data \u001B[35m(dataDownload.groovy)\u001B[0m","downloading...","\u001B[32m[.] \u001B[34mdownload data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mvalidate data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m validate data \u001B[35m(dataDownload.groovy)\u001B[0m","validating...","\u001B[32m[.] \u001B[34mvalidate data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m"],"type":"CliOutput"},{"title":"run multiple scenarios by range in reverse","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m r 'validate':0","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mvalidate data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m validate data \u001B[35m(dataDownload.groovy)\u001B[0m","validating...","\u001B[32m[.] \u001B[34mvalidate data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mdownload data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m download data \u001B[35m(dataDownload.groovy)\u001B[0m","downloading...","\u001B[32m[.] \u001B[34mdownload data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mclean data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m clean data \u001B[35m(dataDownload.groovy)\u001B[0m","cleaning...","\u001B[32m[.] \u001B[34mclean data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m"],"type":"CliOutput"}]},{"title":"Select Scenarios Without Run","id":"select-scenarios-without-run","type":"Section","content":[{"lang":"groovy","snippet":"package testscripts\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.scenario\n\nscenario(\"clean data\") {\n    println \"cleaning...\"\n}\n\nscenario(\"download data\") {\n    println \"downloading...\"\n}\n\nscenario(\"validate data\") {\n    println \"validating...\"\n}","title":"testscripts/dataDownload.groovy","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Lets run scenarios by ranage again","type":"SimpleText"}]},{"title":"run multiple scenarios by range in reverse","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m r 'validate':0","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mvalidate data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m validate data \u001B[35m(dataDownload.groovy)\u001B[0m","validating...","\u001B[32m[.] \u001B[34mvalidate data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mdownload data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m download data \u001B[35m(dataDownload.groovy)\u001B[0m","downloading...","\u001B[32m[.] \u001B[34mdownload data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m","\u001B[34mrunning: \u001B[35mtestscripts/dataDownload.groovy \u001B[33mclean data\u001B[0m","\u001B[43;1m\u001B[30mscenario\u001B[0m\u001B[34m clean data \u001B[35m(dataDownload.groovy)\u001B[0m","cleaning...","\u001B[32m[.] \u001B[34mclean data \u001B[35m(dataDownload.groovy)\u001B[0m","\u001B[0m"],"type":"CliOutput"},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"s","type":"InlinedCode"},{"text":" to display last ran or selected scenarios. These scenarios will be ran with ","type":"SimpleText"},{"code":"r","type":"InlinedCode"}]},{"title":"display selected scenarios","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m s","\u001B[34mSelected scenarios:\u001B[0m","  validate data\u001B[0m","  download data\u001B[0m","  clean data\u001B[0m"],"type":"CliOutput"},{"title":"select scenarios without run","lines":["\u001B[1mwebtau:\u001B[m000\u001B[1m>\u001B[m s 0,2","\u001B[34mSelected scenarios:\u001B[0m","  clean data\u001B[0m","  validate data\u001B[0m"],"type":"CliOutput"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"REPL","pageTitle":"Test Runs","pageMeta":{},"dirName":"REPL","fileName":"test-runs","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Incremental Tests Development","id":"incremental-tests-development"},{"title":"Test Files Listing","id":"test-files-listing"},{"title":"Test File Selection","id":"test-file-selection"},{"title":"Single Test Scenario Run","id":"single-test-scenario-run"},{"title":"Re-run Last Run","id":"re-run-last-run"},{"title":"Multiple Test Scenarios Run","id":"multiple-test-scenarios-run"},{"title":"Select Scenarios Without Run","id":"select-scenarios-without-run"}]}},{"type":"Page","content":[{"type":"Paragraph","content":[{"text":"Webtau has several modules to help you simplify automation processes. All operations in the modules provide","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"detailed information on steps executed and details are included in web report as well as console output.","type":"SimpleText"}]},{"bulletMarker":"*","tight":true,"type":"BulletList","content":[{"type":"ListItem","content":[{"type":"Paragraph","content":[{"url":"/webtau/utilities/data","isFile":false,"type":"Link","content":[{"text":"data","type":"SimpleText"}]},{"text":" - module to read structured data like CSV and JSON into data structures like ","type":"SimpleText"},{"code":"TableData","type":"InlinedCode"},{"text":", lists and maps","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"url":"/webtau/utilities/file-system","isFile":false,"type":"Link","content":[{"text":"file system","type":"SimpleText"}]},{"text":" - module to create files, directories, reading data, unzipping, etc","type":"SimpleText"}]}]},{"type":"ListItem","content":[{"type":"Paragraph","content":[{"url":"/webtau/utilities/cache","isFile":false,"type":"Link","content":[{"text":"cache","type":"SimpleText"}]},{"text":" - module to cache results of test steps to be able to skip them during test development and exploration","type":"SimpleText"}]}]}]}],"lastModifiedTime":1621036321260,"tocItem":{"sectionTitle":"Utilities","pageTitle":"Introduction","pageMeta":{},"dirName":"utilities","fileName":"introduction","viewOnRelativePath":null,"pageSectionIdTitles":[]}},{"type":"Page","content":[{"title":"CSV Read","id":"csv-read","type":"Section","content":[{"level":2,"title":"Table Data","id":"csv-read-table-data","type":"SubHeading"},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"data.csv.table","type":"InlinedCode"},{"text":" to read data as ","type":"SimpleText"},{"code":"TableData","type":"InlinedCode"},{"text":" from CSV file. Passed path is either relative based on working dir or absolute file path. Or it can be a resource class path.","type":"SimpleText"}]},{"table":{"columns":[{"title":"A"},{"title":"B"},{"title":"C"}],"data":[[[{"type":"Paragraph","content":[{"text":"1","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"2","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"3","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"a","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"b","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"c","type":"SimpleText"}]}]]]},"title":"data/table.csv","type":"Table"},{"lang":"groovy","snippet":"def table = data.csv.table('data/table.csv')\ntable.row(0).B.should == '2'\ntable.row(0).B.class.canonicalName.should == 'java.lang.String'","title":"read table data from csv","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: by default numeric values are read as strings, to auto convert numeric values to actual numbers use ","type":"SimpleText"},{"code":"tableAutoConverted","type":"InlinedCode"},{"text":" method","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"data.csv.tableAutoConverted","type":"InlinedCode"},{"text":" to read data as ","type":"SimpleText"},{"code":"TableData","type":"InlinedCode"},{"text":" from CSV file. Numeric values become values of Numeric type instead of String type. Passed path is either relative based on working dir or absolute file path. Or it can be a resource class path.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def table = data.csv.tableAutoConverted('data/table.csv')\ntable.row(0).B.should == 2\ntable.row(0).B.class.canonicalName.should == 'java.lang.Long'","title":"read table data from csv with auto conversion","type":"Snippet"},{"level":2,"title":"List Of Map","id":"csv-read-list-of-map","type":"SubHeading"},{"table":{"columns":[{"title":"A"},{"title":"B"},{"title":"C"}],"data":[[[{"type":"Paragraph","content":[{"text":"1","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"2","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"3","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"a","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"b","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"c","type":"SimpleText"}]}]]]},"title":"data/table.csv","type":"Table"},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"data.csv.listOfMaps","type":"InlinedCode"},{"text":" to read data as ","type":"SimpleText"},{"code":"java.util.List","type":"InlinedCode"},{"text":" of ","type":"SimpleText"},{"code":"java.util.Map","type":"InlinedCode"},{"text":" from CSV file. Passed path is either relative based on working dir or absolute file path. Or it can be a resource class path.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def list = data.csv.listOfMaps('data/table.csv')\nlist.get(0).B.should == '2'\nlist.get(0).B.class.canonicalName.should == 'java.lang.String'","title":"read list of maps from csv","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: by default numeric values are read as strings, to auto convert numeric values to actual numbers use ","type":"SimpleText"},{"code":"tableAutoConverted","type":"InlinedCode"},{"text":" method","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"data.csv.listOfMapsAutoConverted","type":"InlinedCode"},{"text":" to read data as ","type":"SimpleText"},{"code":"java.util.List","type":"InlinedCode"},{"text":" of ","type":"SimpleText"},{"code":"java.util.Map","type":"InlinedCode"},{"text":" from CSV file. Numeric values become values of Numeric type instead of String type. Passed path is either relative based on working dir or absolute file path. Or it can be a resource class path.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def list = data.csv.listOfMapsAutoConverted('data/table.csv')\nlist.get(0).B.should == 2\nlist.get(0).B.class.canonicalName.should == 'java.lang.Long'","title":"read list of maps from csv with auto conversion","type":"Snippet"},{"level":2,"title":"Specify Header","id":"csv-read-specify-header","type":"SubHeading"},{"lang":"csv","snippet":"1, 2, 3\na, b, c","title":"data/table-no-header.csv","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"data.csv.listOfMapsAutoConverted(header, path)","type":"InlinedCode"},{"text":" to read data as ","type":"SimpleText"},{"code":"java.util.List","type":"InlinedCode"},{"text":" of ","type":"SimpleText"},{"code":"java.util.Map","type":"InlinedCode"},{"text":" from CSV file. Header will be taken from first parameter and first row of CSV file will not be treated as header. Numeric values become values of Numeric type instead of String type. Passed path is either relative based on working dir or absolute file path. Or it can be a resource class path.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def list = data.csv.listOfMapsAutoConverted(['C1', 'C2', 'C3'],'data/table-no-header.csv')\nlist.get(0).C2.should == 2\nlist.get(0).C2.class.canonicalName.should == 'java.lang.Long'","title":"read list of maps from csv with auto conversion","type":"Snippet"}]},{"title":"CSV Write","id":"csv-write","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"data.csv.write","type":"InlinedCode"},{"text":" to write data to CSV file.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def path = data.csv.write('generated/from-list-maps.csv', list)","includeRegexp":"data.csv.write","title":"write list of maps","type":"Snippet"},{"lang":"csv","snippet":"colA,colB\n1,R1\n2,R2","title":"result","type":"Snippet"}]},{"title":"JSON Read","id":"json-read","type":"Section","content":[{"level":2,"title":"Read List","id":"json-read-read-list","type":"SubHeading"},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"data.json.list","type":"InlinedCode"},{"text":" to read data as ","type":"SimpleText"},{"code":"java.util.List","type":"InlinedCode"},{"text":" from JSON file. Passed path is either relative based on working dir or absolute file path. Or it can be a resource class path.","type":"SimpleText"}]},{"paths":["root[0].name","root[1].payload.info"],"title":"data/flat-list.json","data":[{"id":"id1","name":"hello","payload":{"info":"additional id1 payload"}},{"id":"id2","name":"world","payload":{"info":"additional id2 payload"}}],"type":"Json"},{"lang":"groovy","snippet":"def list = data.json.list('data/flat-list.json')\nlist[0].name.should == 'hello'\nlist[1].payload.info.should == ~/id2 payload/","title":"read json as list","type":"Snippet"},{"level":2,"title":"Read Map","id":"json-read-read-map","type":"SubHeading"},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"data.json.map","type":"InlinedCode"},{"text":" to read data as ","type":"SimpleText"},{"code":"java.util.Map","type":"InlinedCode"},{"text":" from JSON file. Passed path is either relative based on working dir or absolute path. Or it can be a resource class path.","type":"SimpleText"}]},{"paths":["root.payload.info"],"title":"data/root-map.json","data":{"id":"id1","name":"hello","payload":{"info":"additional id1 payload"}},"type":"Json"},{"lang":"groovy","snippet":"def map = data.json.map('data/root-map.json')\nmap.payload.info.should == \"additional id1 payload\"","title":"read json as map","type":"Snippet"}]},{"title":"GUID","id":"guid","type":"Section","content":[{"level":2,"title":"Generate","id":"guid-generate","type":"SubHeading"},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"data.guid.generate","type":"InlinedCode"},{"text":" to generate unique identifier.","type":"SimpleText"}]},{"lang":"groovy","snippet":"def id = data.guid.generate()","includeRegexp":"data.guid.generate","type":"Snippet"}]}],"lastModifiedTime":1621036321260,"tocItem":{"sectionTitle":"Utilities","pageTitle":"Data","pageMeta":{},"dirName":"utilities","fileName":"data","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"CSV Read","id":"csv-read"},{"title":"CSV Write","id":"csv-write"},{"title":"JSON Read","id":"json-read"},{"title":"GUID","id":"guid"}]}},{"type":"Page","content":[{"title":"File Content","id":"file-content","type":"Section","content":[{"lang":"groovy","snippet":"def path = fs.writeText('my-test-file.txt', 'hello world')","title":"write content to a file","includeRegexp":["fs\\.writeText"],"type":"Snippet"},{"lang":"groovy","snippet":"fs.textContent('my-test-file.txt').should == 'hello world\\nid=15'","title":"validate file content","startLine":"assert-file","endLine":"assert-file","excludeStartEnd":true,"type":"Snippet"},{"type":"Paragraph","content":[{"code":"fs.textContent","type":"InlinedCode"},{"text":" declares file content, but doesn't access it right away.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Webtau reads file content when validation happens. Here is an example of waiting on file content:","type":"SimpleText"}]},{"lang":"groovy","snippet":"def fileTextContent = fs.textContent('my-test-file.txt')\nfileTextContent.waitTo contain('id=15')","title":"wait for file content","startLine":"wait-for-id","endLine":"wait-for-id","excludeStartEnd":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":".data","type":"InlinedCode"},{"text":" to access actual file content for further processing","type":"SimpleText"}]},{"lang":"groovy","snippet":"def actualFileContent = fileTextContent.data","title":"access file content","startLine":"actual-file-content","endLine":"actual-file-content","excludeStartEnd":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"extractByRegexp","type":"InlinedCode"},{"text":" to extract content from a file by regular expression","type":"SimpleText"}]},{"lang":"groovy","snippet":"def id = fileTextContent.extractByRegexp(\"id=(\\\\d+)\")\nhttp.get(\"/customers/${id}\") {\n    // ...\n}","title":"extract file content","startLine":"extract-id","endLine":"extract-id","excludeStartEnd":true,"excludeRegexp":"statusCode","type":"Snippet"}]},{"title":"Copy","id":"copy","type":"Section","content":[{"lang":"groovy","snippet":"def dir = fs.createDir(\"my-dir\")\nfs.copy(\"data/message.txt\", dir)","title":"copy single file to a directory","includeRegexp":["fs\\.copy","createDir"],"type":"Snippet"},{"lang":"groovy","snippet":"def dir = fs.tempDir(\"fs-copy\")\nfs.copy(\"data/message.txt\", dir)","title":"copy single file to a temp directory","includeRegexp":["fs\\.copy","tempDir"],"type":"Snippet"},{"lang":"groovy","snippet":"fs.copy(\"data/message.txt\", \"data/new-message.txt\")","title":"copy single file to a file","includeRegexp":["fs\\.copy"],"type":"Snippet"}]},{"title":"Archive","id":"archive","type":"Section","content":[{"lang":"groovy","snippet":"def dir = fs.tempDir('for-unzip')\nfs.unzip('data/data.zip', dir)","title":"unzip a file","startLine":"// unzip","endLine":"// unzip","excludeStartEnd":true,"type":"Snippet"},{"lang":"groovy","snippet":"def dir = fs.tempDir('for-untar')\nfs.untar('data/data.tar', dir)","title":"untar a file","startLine":"// untar","endLine":"// untar","excludeStartEnd":true,"type":"Snippet"}]}],"lastModifiedTime":1621036321260,"tocItem":{"sectionTitle":"Utilities","pageTitle":"File System","pageMeta":{},"dirName":"utilities","fileName":"file-system","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"File Content","id":"file-content"},{"title":"Copy","id":"copy"},{"title":"Archive","id":"archive"}]}},{"type":"Page","content":[{"title":"Cached Value","id":"cached-value","type":"Section","content":[{"type":"Paragraph","content":[{"text":"When you develop tests, you don't have to restart the whole flow from the beginning.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Imagine you have a multi step test that includes running Command Line tool and then validating REST API response, and","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"then opening a browser to assert UI values.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Cache long steps results like created entities ","type":"SimpleText"},{"code":"ids","type":"InlinedCode"},{"text":" to speed up tests development.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"In the example below, you create first scenario that runs a heavy command line tool that generates an id.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"We then cache the value and you can write a second scenario and keep re-running it, without the need to re-run the first one.","type":"SimpleText"}]},{"lang":"groovy","snippet":"import static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\ndef createdId = cache.value(\"cli-heavy-created-id\") // declare cached value with distinct id\n\nscenario(\"heavy setup operation\") {\n    def cliResult = cli.run(\"scripts/cli-heavy-process\") // long running process that you don't want to re-run as you write your tests\n    createdId.set(cliResult.extractFromOutputByRegexp(\"id=(\\\\S+)\")) // caching the extracted id from CLI run\n}\n\nscenario(\"using previous setup id even after restart\") {\n    def id = createdId.get() // using cached value from previous test run. value will be preserved between restarts and re-compile\n    http.get(\"/resource/${id}\") {\n        message.should == \"hello\"\n    }\n}","title":"cached value","startLine":"example","endLine":"example","excludeStartEnd":true,"commentsType":"inline","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: Use ","type":"SimpleText"},{"url":"/webtau/groovy-standalone-runner/selective-run","isFile":false,"type":"Link","content":[{"text":"Selective Run","type":"SimpleText"}]},{"text":" or ","type":"SimpleText"},{"url":"/webtau/REPL/test-runs","isFile":false,"type":"Link","content":[{"text":"REPL mode","type":"SimpleText"}]},{"text":"","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"to run one scenario at a time.","type":"SimpleText"}]}]}],"lastModifiedTime":1621036321260,"tocItem":{"sectionTitle":"Utilities","pageTitle":"Cache","pageMeta":{},"dirName":"utilities","fileName":"cache","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Cached Value","id":"cached-value"}]}},{"type":"Page","content":[{"title":"Standalone CLI","id":"standalone-cli","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau has a standalone runner, so you can author and run tests without needing a build system or IDEs.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"You can fire your editor of choice and start creating automations without worrying about imports and packages","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"to get your first result.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"In Enterprise setups webtau command line tool can be shared with everyone through mount drives or other similar","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"mechanisms which makes local testing and CI testing to be much more streamlined.","type":"SimpleText"}]}]},{"title":"Setup","id":"setup","type":"Section","content":[{"type":"Paragraph","content":[{"text":"If you have ","type":"SimpleText"},{"url":"https://brew.sh","isFile":false,"type":"Link","content":[{"text":"brew","type":"SimpleText"}]},{"text":" installed in your system use","type":"SimpleText"}]},{"lang":"","snippet":"brew install testingisdocumenting/brew/webtau\n","lineNumber":"","type":"Snippet"},{"type":"Paragraph","content":[{"text":"If you have ","type":"SimpleText"},{"url":"https://sdkman.io","isFile":false,"type":"Link","content":[{"text":"sdkman","type":"SimpleText"}]},{"text":" installed in your system use","type":"SimpleText"}]},{"lang":"","snippet":"sdk install webtau\n","lineNumber":"","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Alternatively, download and unzip ","type":"SimpleText"},{"url":"https://repo.maven.apache.org/maven2/org/testingisdocumenting/webtau/webtau-dist/1.41/webtau-dist-1.41-webtau.zip","isFile":false,"type":"Link","content":[{"text":"webtau","type":"SimpleText"}]},{"text":".","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Add it to your ","type":"SimpleText"},{"code":"PATH","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"command":"webtau --example","paramsToHighlight":[],"type":"CliCommand"},{"type":"Paragraph","content":[{"text":"Navigate into ","type":"SimpleText"},{"code":"todo","type":"InlinedCode"},{"text":" example","type":"SimpleText"}]},{"command":"cd examples/todo","paramsToHighlight":[],"type":"CliCommand"},{"lang":"groovy","snippet":"import static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario('fetch todo item') {\n    http.get('/todos/1') {\n        title.should == 'delectus aut autem'\n        completed.should == false\n    }\n}","title":"todolist.groovy","type":"Snippet"},{"type":"Paragraph","content":[{"text":"To run test","type":"SimpleText"}]},{"command":"webtau todolist.groovy --url=https://jsonplaceholder.typicode.com","paramsToHighlight":["url"],"type":"CliCommand"}]},{"title":"REPL","id":"repl","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau standalone runner comes with ","type":"SimpleText"},{"code":"repl","type":"InlinedCode"},{"text":" mode that let you experiment with API and write tests incrementally.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Repl mode preserves context of the runs which significantly speeds up tests development.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Even if you don't want to use Groovy for your tests, you can still benefit from REPL mode as you experiment with APIs","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"and system under tests.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"url":"/webtau/REPL/experiments","isFile":false,"type":"Link","content":[{"text":"Learn more about REPL","type":"SimpleText"}]}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Groovy Standalone Runner","pageTitle":"Introduction","pageMeta":{},"dirName":"groovy-standalone-runner","fileName":"introduction","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Standalone CLI","id":"standalone-cli"},{"title":"Setup","id":"setup"},{"title":"REPL","id":"repl"}]}},{"type":"Page","content":[{"title":"Dynamic Scenarios","id":"dynamic-scenarios","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Every time you call ","type":"SimpleText"},{"code":"scenario","type":"InlinedCode"},{"text":" method a new scenario is being registered.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Define scenarios in a loop to have dynamic scenarios based on provided data.","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.concept\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\n[1, 2, 3].each { number ->\n    scenario(\"number $number\") {\n        println number\n    }\n}","title":"dynamic scenarios","type":"Snippet"}]},{"title":"CSV","id":"csv","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"url":"/webtau/utilities/data#csv-read","isFile":false,"type":"Link","content":[{"text":"data.csv","type":"SimpleText"}]},{"text":" to conveniently build your scenarios from an external ","type":"SimpleText"},{"code":"CSV","type":"InlinedCode"},{"text":" data set.","type":"SimpleText"}]},{"lang":"csv","snippet":"title, input, output\nhello, 10, 20\nworld, 30, 40","title":"examples/use-cases.csv","type":"Snippet"},{"lang":"groovy","snippet":"package scenarios.concept\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\ndata.csv.table('use-cases.csv').each { row ->\n    scenario(\"use case ${row.title}\") {\n        println row.input\n        println row.output\n    }\n}","title":"CSV-driven tests","type":"Snippet"}]},{"title":"Table Data","id":"table-data","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"TableData","type":"InlinedCode"},{"text":" if you want to derive data and/or have a convenience of collocating data and tests","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.concept\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\ndef lever = 10\n\ndef useCases = ['title'  | 'input'    | 'output'] {\n               ____________________________________\n                'hello'  | lever      | lever + 10\n                'world'  | lever + 30 | lever + 40 }\n\nuseCases.each { row ->\n    scenario(\"use case ${row.title}\") {\n        println row.input\n        println row.output\n    }\n}","title":"TableData-driven tests","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Groovy Standalone Runner","pageTitle":"Data Driven Scenarios","pageMeta":{},"dirName":"groovy-standalone-runner","fileName":"data-driven-scenarios","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Dynamic Scenarios","id":"dynamic-scenarios"},{"title":"CSV","id":"csv"},{"title":"Table Data","id":"table-data"}]}},{"type":"Page","content":[{"title":"Terminate All","id":"terminate-all","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"terminateAll","type":"InlinedCode"},{"text":" if you need to stop a current scenario and all the scenarios after that. Consequent scenarios will be marked","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"as skipped in the produced report.","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.concept\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario(\"first test\") {\n    terminateAll('hard stop of the rest of the tests')\n}\n\nscenario(\"second test\") {\n    browser.open(\"/app\")\n}\n\nscenario(\"third test\") {\n    http.get(\"/weather\") {\n        temperature.shouldBe < 100\n    }\n}","title":"tests termination","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Test two and three in the example above will not be executed. Browser will not be opened and REST API will not be called.","type":"SimpleText"}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Groovy Standalone Runner","pageTitle":"Tests Hard Stops","pageMeta":{},"dirName":"groovy-standalone-runner","fileName":"tests-hard-stops","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Terminate All","id":"terminate-all"}]}},{"type":"Page","content":[{"title":"sscenario","id":"sscenario","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Define tests with ","type":"SimpleText"},{"code":"sscenario","type":"InlinedCode"},{"text":" or ","type":"SimpleText"},{"code":"singleScenario","type":"InlinedCode"},{"text":" to only run those tests and skip all the other tests defined in all the test files.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Useful during tests creation or debugging.","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.concept\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nscenario('step one') {\n    http.post('/reset') {\n        // ...\n    }\n}\n\nsscenario('step two') {\n    // test that you want to focus on\n}\n\nsingleScenario('step three') {\n    // test that you want to focus on\n}\n\nscenario('step four') {\n    http.put('/extra') {\n        // ...\n    }\n}","title":"Selective tests run","highlight":[10,14],"type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: ","type":"SimpleText"},{"code":"webtau","type":"InlinedCode"},{"text":" command line will exit with non zero code if there are ","type":"SimpleText"},{"code":"sscenario","type":"InlinedCode"},{"text":" tests present","type":"SimpleText"}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Groovy Standalone Runner","pageTitle":"Selective Run","pageMeta":{},"dirName":"groovy-standalone-runner","fileName":"selective-run","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"sscenario","id":"sscenario"}]}},{"type":"Page","content":[{"title":"Skipping Tests on Condition","id":"skipping-tests-on-condition","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"onlyWhen","type":"InlinedCode"},{"text":" if you need to skip tests based on a condition.","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.concept\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nString emailHost = cfg.emailHost\n\nonlyWhen('email server is internal', { -> emailHost.contains('internal.server')}) {\n    scenario('confirmation emails should be sent') {\n        // ...\n        http.get(emailHost) {\n            subjects.should contain('my message')\n        }\n    }\n}","title":"Conditional tests skip","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Tests will still appear as part of your report but will be marked as skipped.","type":"SimpleText"}]}]},{"title":"Skipping Tests Based on Env","id":"skipping-tests-based-on-env","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use the ","type":"SimpleText"},{"code":"skipForEnv","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"onlyForEnv","type":"InlinedCode"},{"text":" shortcuts if you need to skip or enable tests for a certain environment.","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.concept\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nonlyForEnv('experimental') {\n    scenario('this scenario will only be executed in \"experimental\" env') {\n        http.get('/new-endpoint') {\n            price.shouldBe > 0\n        }\n    }\n}\n\nskipForEnv('experimental') {\n    scenario('this scenario will not be executed in \"experimental\" env') {\n        http.get('/new-endpoint') {\n            price.shouldBe > 0\n        }\n    }\n}","title":"Environment specific tests","type":"Snippet"}]},{"title":"Custom Shortcuts","id":"custom-shortcuts","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Consider creating your project specific shortcuts to avoid boilerplate.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Here is an example of ","type":"SimpleText"},{"code":"onlyForEnv","type":"InlinedCode"},{"text":" shortcut definition.","type":"SimpleText"}]},{"lang":"groovy","snippet":"static void onlyForEnv(String env, Closure registrationCode) {\n    onlyWhen(\"only for <$env> environment\",\n            { -> getCfg().getEnv() == env },\n            registrationCode)\n}","entry":"onlyForEnv","title":"Custom shortcut","type":"Snippet"}]},{"title":"Unconditionally Skipping Tests","id":"unconditionally-skipping-tests","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Instead of ","type":"SimpleText"},{"code":"scenario","type":"InlinedCode"},{"text":", use ","type":"SimpleText"},{"code":"dscenario","type":"InlinedCode"},{"text":" or ","type":"SimpleText"},{"code":"disabledScenario","type":"InlinedCode"},{"text":" to always skip a test.  This is analogous to","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Junit's ","type":"SimpleText"},{"code":"@Ignore","type":"InlinedCode"},{"text":" or ","type":"SimpleText"},{"code":"@Disabled","type":"InlinedCode"},{"text":".","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.concept\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\ndscenario('do not execute this scenario') {\n    http.get('/new-endpoint') {\n        price.shouldBe > 0\n    }\n}\n\ndisabledScenario('do not execute this scenario either') {\n    http.get('/new-endpoint') {\n        price.shouldBe > 0\n    }\n}","title":"Disable tests","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Groovy Standalone Runner","pageTitle":"Skipping Tests","pageMeta":{},"dirName":"groovy-standalone-runner","fileName":"skipping-tests","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Skipping Tests on Condition","id":"skipping-tests-on-condition"},{"title":"Skipping Tests Based on Env","id":"skipping-tests-based-on-env"},{"title":"Custom Shortcuts","id":"custom-shortcuts"},{"title":"Unconditionally Skipping Tests","id":"unconditionally-skipping-tests"}]}},{"type":"Page","content":[{"title":"Specifying Test Metadata","id":"specifying-test-metadata","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To attach custom metadata to a test use ","type":"SimpleText"},{"code":"metadata","type":"InlinedCode"},{"text":" from ","type":"SimpleText"},{"code":"WebTauGroovyDsl","type":"InlinedCode"}]},{"lang":"groovy","snippet":"package scenarios.concept\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nmetadata([owner: \"team A\"]) // setting owner for all the scenarios below\n\nscenario(\"one\") {\n}\n\nscenario(\"two\") {\n}\n\nscenario(\"three\") {\n    metadata([owner: \"team B\"]) // owner is overridden for scenario \"three\"\n}\n\nscenario(\"four\") {\n}","title":"test metadata","commentsType":"inline","type":"Snippet"},{"type":"Paragraph","content":[{"code":"metadata","type":"InlinedCode"},{"text":" can be called multiple times outside of ","type":"SimpleText"},{"code":"scenario","type":"InlinedCode"},{"text":". It will be applied to all the scenarios below.","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.concept\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nmetadata([owner: \"team A\"]) // setting owner for scenarios \"one\" and \"two\"\n\nscenario(\"one\") {\n}\n\nscenario(\"two\") {\n}\n\nmetadata([owner: \"team B\"]) // setting owner for scenarios \"three\" and \"four\"\n\nscenario(\"three\") {\n}\n\nscenario(\"four\") {\n}","title":"multiple top-level metadata","commentsType":"inline","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Unlike previous example, \"team B\" will be set for scenario \"three\" and \"four\".","type":"SimpleText"}]}]},{"title":"Metadata Encapsulation","id":"metadata-encapsulation","type":"Section","content":[{"type":"Paragraph","content":[{"text":"You can encapsulate repeated metadata into a separate file.","type":"SimpleText"}]},{"lang":"groovy","snippet":"package scenarios.concept\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nSupport.teamA()\n\nscenario(\"one\") {\n}\n\nscenario(\"two\") {\n}\n\nscenario(\"three\") {\n    Support.teamB()\n}\n\nscenario(\"four\") {\n}","title":"encapsulated metadata","type":"Snippet"},{"lang":"groovy","snippet":"package scenarios.concept\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\nclass Support {\n    static void owner(String name) {\n        metadata([owner: name])\n    }\n\n    static void severity(int level) {\n        metadata([severity: level])\n    }\n\n    static void teamA() {\n        owner(\"team A\")\n    }\n\n    static void teamB() {\n        owner(\"team B\")\n    }\n\n    static void critical() {\n        severity(100)\n    }\n\n    static void low() {\n        severity(1)\n    }\n}","title":"Support.groovy","type":"Snippet"}]},{"title":"Report","id":"report","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Test metadata will be available in a generated report as well as in test listeners.","type":"SimpleText"}]},{"annotationsPath":"doc-artifacts/reports/report-test-metadata.json","imageSrc":"/webtau/doc-artifacts/reports/report-test-metadata.png","timestamp":1621036899896,"shapes":[{"id":"badge4","type":"badge","text":"1","color":"a","darkFriendly":false,"x":632,"y":128,"align":"Center"}],"width":1200.0,"height":804.0,"type":"AnnotatedImage"},{"delimiter":".","startNumber":1,"type":"OrderedList","content":[{"type":"ListItem","content":[{"type":"Paragraph","content":[{"text":"If metadata is present, it will be displayed at the test summary page","type":"SimpleText"}]}]}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Groovy Standalone Runner","pageTitle":"Test Metadata","pageMeta":{},"dirName":"groovy-standalone-runner","fileName":"test-metadata","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Specifying Test Metadata","id":"specifying-test-metadata"},{"title":"Metadata Encapsulation","id":"metadata-encapsulation"},{"title":"Report","id":"report"}]}},{"type":"Page","content":[{"title":"Test Listener Interface","id":"test-listener-interface","type":"Section","content":[{"type":"Paragraph","content":[{"text":"To define a custom test listener you need to implement the ","type":"SimpleText"},{"code":"TestListener","type":"InlinedCode"},{"text":" interface","type":"SimpleText"}]},{"lang":"java","snippet":"/*\n * Copyright 2020 webtau maintainers\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage org.testingisdocumenting.webtau;\n\nimport org.testingisdocumenting.webtau.reporter.WebTauTest;\n\n/**\n * Lowest common denominator for Groovy Standalone Tests, JUnit4, JUnit5\n */\npublic interface TestListener {\n    /**\n     * before any test is ran\n     */\n    default void beforeFirstTest() {}\n\n    /**\n     * before test code is invoked\n     * @param test test\n     */\n    default void beforeTestRun(WebTauTest test) {}\n\n    /**\n     * after test code is invoked\n     * @param test test\n     */\n    default void afterTestRun(WebTauTest test) {}\n\n    /**\n     * after all the tests are invoked\n     */\n    default void afterAllTests() {}\n\n    /**\n     * after test is ran but before its first statement.\n     * executed code in this listener is considered to be part of a test.\n     * @param test test\n     */\n    default void beforeFirstTestStatement(WebTauTest test) {}\n\n    /**\n     * right before test considered to be complete. May not be executed if the test didn't reach the last statement.\n     * executed code in this listener is considered to be part of a test.\n     * @param test test\n     */\n    default void afterLastTestStatement(WebTauTest test) {}\n}","title":"TestListener.java","type":"Snippet"}]},{"title":"Config","id":"config","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Once you have an implementation, use the ","type":"SimpleText"},{"code":"testListeners","type":"InlinedCode"},{"text":" key in your config file to use it","type":"SimpleText"}]},{"lang":"groovy","snippet":"import listeners.MetadataValidationTestListener\n\ntestListeners = [MetadataValidationTestListener]","title":"webtau.cfg.groovy","type":"Snippet"},{"lang":"groovy","snippet":"package listeners\n\nimport org.testingisdocumenting.webtau.TestListener\nimport org.testingisdocumenting.webtau.reporter.WebTauTest\n\nclass MetadataValidationTestListener implements TestListener {\n    @Override\n    void afterLastTestStatement(WebTauTest test) {\n        if (!test.isSynthetic() && !test.metadata.has('owner')) {\n            throw new RuntimeException('owner for <' + test.scenario + '> is not set')\n        }\n    }\n}","title":"listeners/MetadataValidationTestListener.groovy","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Groovy Standalone Runner","pageTitle":"Test Listeners","pageMeta":{},"dirName":"groovy-standalone-runner","fileName":"test-listeners","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Test Listener Interface","id":"test-listener-interface"},{"title":"Config","id":"config"}]}},{"type":"Page","content":[{"title":"Serial execution","id":"serial-execution","type":"Section","content":[{"type":"Paragraph","content":[{"text":"The default mode for running tests is serially; in other words, scenario files are executed one after the other.","type":"SimpleText"}]}]},{"title":"Parallel execution","id":"parallel-execution","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau supports executing tests in parallel.  In this mode, ","type":"SimpleText"},{"type":"StrongEmphasis","content":[{"text":"scenario files","type":"SimpleText"}]},{"text":" are executed in parallel.  ","type":"SimpleText"},{"type":"StrongEmphasis","content":[{"text":"Individual","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"scenarios","type":"SimpleText"}]},{"text":" are still executed sequentially.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"For large test suites, it is therefore advisable to create many small focused scenario files instead of few large files.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"To enable parallel execution, specify the ","type":"SimpleText"},{"code":"numberOfThreads","type":"InlinedCode"},{"text":" configuration property either through the configuration file","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"or as a CLI parameter.  This property dictates the maximum number of threads on which to run tests.  Alternatively,","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"set ","type":"SimpleText"},{"code":"numberOfThreads","type":"InlinedCode"},{"text":" to ","type":"SimpleText"},{"code":"-1","type":"InlinedCode"},{"text":" and webtau will use as many threads as there are scenario files.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Note: scenario file execution order is not guaranteed.","type":"SimpleText"}]}]},{"title":"Scenario discovery","id":"scenario-discovery","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau via CLI or Maven plugin supports a number of methods for specifying and discovering scenarios.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"The simplest way is to list the scenario files explicitly:","type":"SimpleText"}]},{"tabsContent":[{"name":"CLI","content":[{"command":"webtau scenarios/rest/simpleGet.groovy scnearios/rest/simplePost.groovy","paramsToHighlight":[],"type":"CliCommand"}]},{"name":"Maven","content":[{"lang":"xml","snippet":"<plugin>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau-maven-plugin</artifactId>\n    <version>1.41</version>\n    <executions>\n        <execution>\n            <phase>test</phase>\n            <goals>\n                <goal>run</goal>\n            </goals>\n        </execution>\n    </executions>\n    <configuration>\n        <workingDir>${project.basedir}/src/main/groovy</workingDir>\n        <env>integration</env>\n        <url>http://optional-base-url</url>\n        <tests>\n            <directory>${project.basedir}/src/main/groovy</directory>\n            <includes>\n                <include>scenarios/simpleGet.groovy</include>\n                <include>scenarios/simplePost.groovy</include>\n            </includes>\n        </tests>\n    </configuration>\n</plugin>","type":"Snippet"}]}],"type":"Tabs"},{"type":"Paragraph","content":[{"text":"Wildcard matching is also supported.  In the CLI version this is normal shell ","type":"SimpleText"},{"url":"https://en.wikipedia.org/wiki/Glob_(programming)","isFile":false,"type":"Link","content":[{"text":"glob","type":"SimpleText"}]},{"type":"SoftLineBreak"},{"text":"and in Maven it's a standard Maven file inclusion block:","type":"SimpleText"}]},{"tabsContent":[{"name":"CLI","content":[{"command":"webtau scenarios/rest/simple*.groovy","paramsToHighlight":[],"type":"CliCommand"}]},{"name":"Maven","content":[{"lang":"xml","snippet":"<plugin>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau-maven-plugin</artifactId>\n    <version>1.41</version>\n    <executions>\n        <execution>\n            <phase>test</phase>\n            <goals>\n                <goal>run</goal>\n            </goals>\n        </execution>\n    </executions>\n    <configuration>\n        <workingDir>${project.basedir}/src/main/groovy</workingDir>\n        <env>integration</env>\n        <url>http://optional-base-url</url>\n        <tests>\n            <directory>${project.basedir}/src/main/groovy</directory>\n            <includes>\n                <include>scenarios/simple*.groovy</include>\n            </includes>\n        </tests>\n    </configuration>\n</plugin>","type":"Snippet"}]}],"type":"Tabs"},{"type":"Paragraph","content":[{"text":"It is also possible to include a set of base directories and webtau will then find all ","type":"SimpleText"},{"code":"*.groovy","type":"InlinedCode"},{"text":" files within","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"them, recursively:","type":"SimpleText"}]},{"tabsContent":[{"name":"CLI","content":[{"command":"webtau scenarios/rest","paramsToHighlight":[],"type":"CliCommand"}]},{"name":"Maven","content":[{"lang":"xml","snippet":"<plugin>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau-maven-plugin</artifactId>\n    <version>1.41</version>\n    <executions>\n        <execution>\n            <phase>test</phase>\n            <goals>\n                <goal>run</goal>\n            </goals>\n        </execution>\n    </executions>\n    <configuration>\n        <workingDir>${project.basedir}/src/main/groovy</workingDir>\n        <env>integration</env>\n        <url>http://optional-base-url</url>\n        <tests>\n            <directory>${project.basedir}/src/main/groovy</directory>\n        </tests>\n    </configuration>\n</plugin>","type":"Snippet"}]}],"type":"Tabs"},{"type":"Paragraph","content":[{"text":"In this mode, the HTML report that webtau generates will show paths to the files relative to the","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"requested directories.","type":"SimpleText"}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Groovy Standalone Runner","pageTitle":"Test Execution","pageMeta":{},"dirName":"groovy-standalone-runner","fileName":"test-execution","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Serial execution","id":"serial-execution"},{"title":"Parallel execution","id":"parallel-execution"},{"title":"Scenario discovery","id":"scenario-discovery"}]}},{"type":"Page","content":[{"title":"Select","id":"select","type":"Section","content":[{"lang":"cfg","snippet":"waitTimeout = 2500\nurl = http://my-server\n\nenvironments {\n   dev {\n       url = \"http://localhost:8080\"\n   }\n}\n","lineNumber":"","title":"webtau.cfg.groovy","type":"Snippet"},{"command":"webtau --env=dev","paramsToHighlight":[],"type":"CliCommand"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Configuration","pageTitle":"Environments","pageMeta":{},"dirName":"configuration","fileName":"environments","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Select","id":"select"}]}},{"type":"Page","content":[{"title":"CLI and configuration file options","id":"cli-and-configuration-file-options","type":"Section","content":[{"table":{"columns":[{"title":"name"},{"title":"description"},{"title":"default value"}],"data":[[[{"type":"Paragraph","content":[{"text":"browserAnnotationsDarkFriendly","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"browser doc capture to use light colors annotations by default (for dark theme UI)","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"browserDisableExtensions","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"run browser without extensions","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"browserHeadless","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"run browser in headless mode","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"browserHeight","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"browser window height","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"0","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"browserId","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"browser to use: chrome, firefox","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"chrome","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"browserRemoteDriverUrl","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"browser remote driver url","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"browserStaleElementRetry","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"number of times to automatically retry for browser stale element actions","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"5","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"browserStaleElementRetryWait","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"wait time in between browser stale element retries","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"100","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"browserUrl","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"browser base url for application under test. It is being used instead of url when provided","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"browserVersion","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"browser version for automatic driver download","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"browserWidth","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"browser window width","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"0","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"cachePath","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"user driven cache base dir","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"${workingDir}/.webtau-cache","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"chromeBinPath","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"path to chrome binary","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"chromeDriverPath","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"path to chrome driver binary","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"cliPath","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"path items to append to path used for cli runs","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"[]","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"cliTimeout","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"cli foreground command run timeout (ms)","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"30000","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"config","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"config file path","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"webtau.cfg.groovy","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"consolePayloadOutputLimit","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"max number of lines to display in console for outputs (e.g. http response)","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"500","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"dbDriverClassName","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"primary database driver class name","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"dbPassword","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"primary database password","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"dbUrl","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"primary database url","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"dbUserName","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"primary database user name","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"disableRedirects","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"disable following of redirects from HTTP calls","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"docPath","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"path for captured request/responses, screenshots and other generated artifacts for documentation","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"${workingDir}/doc-artifacts","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"env","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"environment id","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"local","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"failedReportPath","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"failed report file path","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"firefoxBinPath","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"path to firefox binary","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"firefoxDriverPath","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"path to firefox driver binary","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"fullStackTrace","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"print full stack trace to console","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"graphQLEndpoint","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"override the default graphQL endpoint","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"/graphql","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"graphQLIgnoreIntrospectionFailures","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"ignore graphQL introspection failures, introspection is required for coverage reporting","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"true","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"graphQLShowOperationAsQueryParam","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"pass the graphQL operation as operation=","type":"SimpleText"},{"text":" query parameter if present","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"true","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"httpTimeout","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"http connect and read timeout in milliseconds","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"30000","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"jsonSchemasDir","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"url of directory containing JSON schemas","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"/home/runner/work/webtau/webtau/webtau-groovy-app","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"maxRedirects","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"Maximum number of redirects to follow for an HTTP call","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"20","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"noColor","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"disable ANSI colors","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"numberOfThreads","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"number of threads on which to run test files (one file per thread), -1 will use as many threads as there are files","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"1","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"openApiIgnoreAdditionalProperties","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"ignore additional OpenAPI properties","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"openApiSpecUrl","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"url of OpenAPI 2 spec against which to validate http calls","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"removeWebtauFromUserAgent","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"By default webtau appends webtau and its version to the user-agent, this disables that part","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"reportPath","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"report file path","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"/home/runner/work/webtau/webtau/webtau-groovy-app/${workingDir}/webtau.report.html","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"url","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"base url for application under test","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"userAgent","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"User agent to send on HTTP requests","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"webtau/1.41","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"verbosityLevel","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"output verbosity level. 0 - no output; 1 - test names; 2 - first level steps; etc","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"2147483647","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"waitTimeout","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"wait timeout in milliseconds","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"5000","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"workingDir","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"logical working dir","type":"SimpleText"}]}],null]]},"type":"Table"}]},{"title":"Environment variable options","id":"environment-variable-options","type":"Section","content":[{"table":{"columns":[{"title":"environment variable"},{"title":"description"},{"title":"default value"}],"data":[[[{"type":"Paragraph","content":[{"text":"WEBTAU_BROWSER_ANNOTATIONS_DARK_FRIENDLY","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"browser doc capture to use light colors annotations by default (for dark theme UI)","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_BROWSER_DISABLE_EXTENSIONS","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"run browser without extensions","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_BROWSER_HEADLESS","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"run browser in headless mode","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_BROWSER_HEIGHT","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"browser window height","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"0","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_BROWSER_ID","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"browser to use: chrome, firefox","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"chrome","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_BROWSER_REMOTE_DRIVER_URL","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"browser remote driver url","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"WEBTAU_BROWSER_STALE_ELEMENT_RETRY","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"number of times to automatically retry for browser stale element actions","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"5","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_BROWSER_STALE_ELEMENT_RETRY_WAIT","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"wait time in between browser stale element retries","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"100","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_BROWSER_URL","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"browser base url for application under test. It is being used instead of url when provided","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"WEBTAU_BROWSER_VERSION","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"browser version for automatic driver download","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"WEBTAU_BROWSER_WIDTH","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"browser window width","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"0","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_CACHE_PATH","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"user driven cache base dir","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"${workingDir}/.webtau-cache","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_CHROME_BIN_PATH","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"path to chrome binary","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"WEBTAU_CHROME_DRIVER_PATH","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"path to chrome driver binary","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"WEBTAU_CLI_PATH","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"path items to append to path used for cli runs","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"[]","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_CLI_TIMEOUT","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"cli foreground command run timeout (ms)","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"30000","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_CONFIG","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"config file path","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"webtau.cfg.groovy","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_CONSOLE_PAYLOAD_OUTPUT_LIMIT","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"max number of lines to display in console for outputs (e.g. http response)","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"500","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_DB_DRIVER_CLASS_NAME","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"primary database driver class name","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"WEBTAU_DB_PASSWORD","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"primary database password","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"WEBTAU_DB_URL","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"primary database url","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"WEBTAU_DB_USER_NAME","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"primary database user name","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"WEBTAU_DISABLE_REDIRECTS","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"disable following of redirects from HTTP calls","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_DOC_PATH","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"path for captured request/responses, screenshots and other generated artifacts for documentation","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"${workingDir}/doc-artifacts","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_ENV","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"environment id","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"local","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_FAILED_REPORT_PATH","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"failed report file path","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"WEBTAU_FIREFOX_BIN_PATH","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"path to firefox binary","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"WEBTAU_FIREFOX_DRIVER_PATH","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"path to firefox driver binary","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"WEBTAU_FULL_STACK_TRACE","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"print full stack trace to console","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_GRAPH_QLENDPOINT","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"override the default graphQL endpoint","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"/graphql","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_GRAPH_QLIGNORE_INTROSPECTION_FAILURES","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"ignore graphQL introspection failures, introspection is required for coverage reporting","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"true","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_GRAPH_QLSHOW_OPERATION_AS_QUERY_PARAM","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"pass the graphQL operation as operation=","type":"SimpleText"},{"text":" query parameter if present","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"true","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_HTTP_TIMEOUT","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"http connect and read timeout in milliseconds","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"30000","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_JSON_SCHEMAS_DIR","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"url of directory containing JSON schemas","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"/home/runner/work/webtau/webtau/webtau-groovy-app","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_MAX_REDIRECTS","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"Maximum number of redirects to follow for an HTTP call","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"20","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_NO_COLOR","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"disable ANSI colors","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_NUMBER_OF_THREADS","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"number of threads on which to run test files (one file per thread), -1 will use as many threads as there are files","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"1","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_OPEN_API_IGNORE_ADDITIONAL_PROPERTIES","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"ignore additional OpenAPI properties","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_OPEN_API_SPEC_URL","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"url of OpenAPI 2 spec against which to validate http calls","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"WEBTAU_REMOVE_WEBTAU_FROM_USER_AGENT","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"By default webtau appends webtau and its version to the user-agent, this disables that part","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_REPORT_PATH","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"report file path","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"/home/runner/work/webtau/webtau/webtau-groovy-app/${workingDir}/webtau.report.html","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_URL","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"base url for application under test","type":"SimpleText"}]}],null],[[{"type":"Paragraph","content":[{"text":"WEBTAU_USER_AGENT","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"User agent to send on HTTP requests","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"webtau/1.41","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_VERBOSITY_LEVEL","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"output verbosity level. 0 - no output; 1 - test names; 2 - first level steps; etc","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"2147483647","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_WAIT_TIMEOUT","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"wait timeout in milliseconds","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"5000","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"WEBTAU_WORKING_DIR","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"logical working dir","type":"SimpleText"}]}],null]]},"type":"Table"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Configuration","pageTitle":"Options","pageMeta":{},"dirName":"configuration","fileName":"options","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"CLI and configuration file options","id":"cli-and-configuration-file-options"},{"title":"Environment variable options","id":"environment-variable-options"}]}},{"type":"Page","content":[{"title":"WebTau Runner","id":"webtau-runner","type":"Section","content":[{"type":"Paragraph","content":[{"text":"You can use webtau ","type":"SimpleText"},{"code":"http.","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"graphql.","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"browser.","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"cli.","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"db.","type":"InlinedCode"},{"text":" methods as in a junit 4 tests, but to enable reporting you need to use","type":"SimpleText"},{"type":"SoftLineBreak"},{"code":"@RunWith(WebTauRunner.class)","type":"InlinedCode"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"package com.example.tests.junit4\n\nimport org.testingisdocumenting.webtau.junit4.WebTauRunner\nimport org.junit.Test\nimport org.junit.runner.RunWith\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.* // convenient single import for DSL methods and props like http\n\n@RunWith(WebTauRunner)  // runner is required to have this test to be a part of generated html report\nclass CustomerCrudSingleGroovyTest {\n    private def customerPayload = [firstName: 'FN',\n                                   lastName: 'LN']\n    private def changedCustomerPayload = [*:customerPayload, lastName: 'NLN']\n\n    @Test\n    void crud() {\n        def id = http.post(\"/customers\", customerPayload) {\n            return id\n        }\n\n        http.get(\"/customers/$id\") {\n            body.should == customerPayload\n        }\n\n        http.put(\"/customers/$id\", changedCustomerPayload) {\n            body.should == changedCustomerPayload\n        }\n\n        http.get(\"/customers/$id\") {\n            body.should == changedCustomerPayload\n        }\n\n        http.delete(\"/customers/$id\") {\n            statusCode.should == 204\n        }\n\n        http.get(\"/customers/$id\") {\n            statusCode.should == 404\n        }\n    }\n}","title":"CRUD test in a single method","commentsType":"inline","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"package com.example.tests.junit4;\n\nimport org.testingisdocumenting.webtau.junit4.WebTauRunner;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\n\nimport java.util.Map;\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*; // convenient single import for DSL methods and props like http and equal, aMapOf, etc\n\n@RunWith(WebTauRunner.class) // runner is required to have this test to be a part of generated html report\npublic class CustomerCrudSingleJavaTest {\n    private Map<String, Object> customerPayload = createCustomerPayload();\n    private Map<String, Object> changedCustomerPayload = createChangedCustomerPayload();\n\n    @Test\n    public void crud() {\n        int id = http.post(\"/customers\", customerPayload, ((header, body) -> {\n            return body.get(\"id\");\n        }));\n\n        http.get(\"/customers/\" + id, ((header, body) -> {\n            body.should(equal(customerPayload));\n        }));\n\n        http.put(\"/customers/\" + id, changedCustomerPayload, ((header, body) -> {\n            body.should(equal(changedCustomerPayload));\n        }));\n\n        http.get(\"/customers/\" + id, ((header, body) -> {\n            body.should(equal(changedCustomerPayload));\n        }));\n\n        http.delete(\"/customers/\" + id, ((header, body) -> {\n            header.statusCode().should(equal(204));\n        }));\n\n        http.get(\"/customers/\" + id, ((header, body) -> {\n            header.statusCode().should(equal(404));\n        }));\n    }\n\n    private Map<String, Object> createCustomerPayload() {\n        return aMapOf(\n                \"firstName\", \"FN\",\n                \"lastName\", \"LN\");\n    }\n\n    private Map<String, Object> createChangedCustomerPayload() {\n        Map<String, Object> payload = createCustomerPayload();\n        payload.put(\"lastName\", \"NLN\");\n\n        return payload;\n    }\n}","title":"CRUD test in a single method","commentsType":"inline","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Before/After","id":"beforeafter","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"@Before","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"@After","type":"InlinedCode"},{"text":" standard ","type":"SimpleText"},{"code":"JUnit 4","type":"InlinedCode"},{"text":" annotations to implement init and cleanup logic for each test.","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"package com.example.tests.junit4\n\nimport org.testingisdocumenting.webtau.junit4.WebTauRunner\nimport org.junit.After\nimport org.junit.Before\nimport org.junit.Test\nimport org.junit.runner.RunWith\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\n@RunWith(WebTauRunner.class)\nclass CustomerCrudBeforeAfterGroovyTest {\n    private def customerPayload = [firstName: 'FN',\n                                   lastName: 'LN']\n    private def changedCustomerPayload = [*:customerPayload, lastName: 'NLN']\n\n    private int customerId\n\n    @Before\n    void \"create customer\"() {\n        customerId = http.post(\"/customers\", customerPayload) {\n            return id // We deliberately named field as \"customerId\" to avoid conflict with response field. Alternatively you can use body.id to avoid the conflict\n        }\n    }\n\n    @Test\n    void \"query customer\"() {\n        http.get(\"/customers/$customerId\") {\n            body.should == customerPayload\n        }\n    }\n\n    @Test\n    void \"update customer\"() {\n        http.put(\"/customers/$customerId\", changedCustomerPayload) {\n            body.should == changedCustomerPayload\n        }\n\n        http.get(\"/customers/$customerId\") {\n            body.should == changedCustomerPayload\n        }\n    }\n\n    @After\n    void \"delete customer\"() {\n        http.delete(\"/customers/$customerId\") {\n            statusCode.should == 204\n        }\n\n        http.get(\"/customers/$customerId\") {\n            statusCode.should == 404\n        }\n    }\n}","title":"CRUD test with @Before and @After annotations","commentsType":"inline","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"package com.example.tests.junit4;\n\nimport org.testingisdocumenting.webtau.junit4.WebTauRunner;\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\n\nimport java.util.Map;\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*;\n\n@RunWith(WebTauRunner.class)\npublic class CustomerCrudBeforeAfterJavaTest {\n    private Map<String, Object> customerPayload = createCustomerPayload();\n    private Map<String, Object> changedCustomerPayload = createChangedCustomerPayload();\n    private int customerId;\n\n    @Before\n    public void createCustomer() {\n        customerId = http.post(\"/customers\", customerPayload, ((header, body) -> {\n            return body.get(\"id\");\n        }));\n    }\n\n    @Test\n    public void queryCustomer() {\n        http.get(\"/customers/\" + customerId, ((header, body) -> {\n            body.should(equal(customerPayload));\n        }));\n    }\n\n    @Test\n    public void updateCustomer() {\n        http.put(\"/customers/\" + customerId, changedCustomerPayload, ((header, body) -> {\n            body.should(equal(changedCustomerPayload));\n        }));\n\n        http.get(\"/customers/\" + customerId, ((header, body) -> {\n            body.should(equal(changedCustomerPayload));\n        }));\n    }\n\n    @After\n    public void deleteCustomer() {\n        http.delete(\"/customers/\" + customerId, (header, body) -> {\n            header.statusCode().should(equal(204));\n        });\n\n        http.get(\"/customers/\" + customerId, ((header, body) -> {\n            header.statusCode().should(equal(404));\n        }));\n    }\n\n    private Map<String, Object> createCustomerPayload() {\n        return aMapOf(\n                \"firstName\", \"FN\",\n                \"lastName\", \"LN\");\n    }\n\n    private Map<String, Object> createChangedCustomerPayload() {\n        Map<String, Object> payload = createCustomerPayload();\n        payload.put(\"lastName\", \"NLN\");\n\n        return payload;\n    }\n}","title":"CRUD test with @Before and @After annotations","commentsType":"inline","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"BeforeClass/AfterClass","id":"beforeclassafterclass","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"@BeforeClass","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"@AfterClass","type":"InlinedCode"},{"text":" to prepare and cleanup resources required for multiple test methods.","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"package com.example.tests.junit4\n\nimport org.testingisdocumenting.webtau.junit4.WebTauRunner\nimport org.junit.AfterClass\nimport org.junit.BeforeClass\nimport org.junit.Test\nimport org.junit.runner.RunWith\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.http\n\n@RunWith(WebTauRunner.class)\nclass CustomerQueryGroovyTest {\n    private static def id1 // keep track of created ids to assert and cleanup later\n    private static def id2\n    private static def id3\n\n    @BeforeClass\n    static void createCustomers() {\n        id1 = createCustomer(\"CQ_FN1\", \"CQ_LN1\")\n        id2 = createCustomer(\"CQ_FN1\", \"CQ_LN2\")\n        id3 = createCustomer(\"CQ_FN2\", \"CQ_LN2\")\n    }\n\n    @Test\n    void queryByFirstName() {\n        http.get(\"/customers/search/first-name\", [name: \"CQ_FN1\"]) {\n            body.should == [\"*id\" | \"firstName\" | \"lastName\"] { // star(*) marks key column so assertion is order agnostic\n                            __________________________________\n                             id1  | \"CQ_FN1\"    | \"CQ_LN1\"\n                             id2  | \"CQ_FN1\"    | \"CQ_LN2\" }\n        }\n    }\n\n    @Test\n    void queryByLastName() {\n        http.get(\"/customers/search/last-name\", [name: \"CQ_LN2\"]) {\n           body.should == [\"*id\" | \"firstName\" | \"lastName\"] {\n                          __________________________________\n                            id2  | \"CQ_FN1\"    | \"CQ_LN2\"\n                            id3  | \"CQ_FN2\"    | \"CQ_LN2\" }\n        }\n    }\n\n    @AfterClass\n    static void cleanup() {\n        [id1, id2, id3].each { http.delete(\"/customers/$it\") }\n    }\n\n    private static def createCustomer(String firstName, String lastName) {\n        return http.post(\"/customers\", [firstName: firstName, lastName: lastName]) { id }\n    }\n}","commentsType":"inline","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"package com.example.tests.junit4;\n\nimport org.testingisdocumenting.webtau.junit4.WebTauRunner;\nimport org.junit.AfterClass;\nimport org.junit.BeforeClass;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\n\nimport java.util.Map;\nimport java.util.stream.Stream;\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*;\n\n@RunWith(WebTauRunner.class)\npublic class CustomerQueryJavaTest {\n    private static Integer id1; // keep track of created ids to assert and cleanup later\n    private static Integer id2;\n    private static Integer id3;\n\n    @BeforeClass\n    public static void createCustomers() {\n        id1 = createCustomer(\"CQ_FN1\", \"CQ_LN1\");\n        id2 = createCustomer(\"CQ_FN1\", \"CQ_LN2\");\n        id3 = createCustomer(\"CQ_FN2\", \"CQ_LN2\");\n    }\n\n    @Test\n    public void queryByFirstName() {\n        http.get(\"/customers/search/first-name\", http.query(\"name\", \"CQ_FN1\"), (header, body) -> {\n            body.should(equal(table(\"*id\", \"firstName\", \"lastName\", // star(*) marks key column so assertion is order agnostic\n                                   ________________________________,\n                                      id1, \"CQ_FN1\"   , \"CQ_LN1\",\n                                      id2, \"CQ_FN1\"   , \"CQ_LN2\")));\n        });\n    }\n\n    @Test\n    public void queryByLastName() {\n        http.get(\"/customers/search/last-name\", http.query(\"name\", \"CQ_LN2\"), (header, body) -> {\n            body.should(equal(table(\"*id\", \"firstName\", \"lastName\",\n                                    ________________________________,\n                                      id2, \"CQ_FN1\"   , \"CQ_LN2\",\n                                      id3, \"CQ_FN2\"   , \"CQ_LN2\")));\n        });\n    }\n\n    @AfterClass\n    public static void cleanup() {\n        Stream.of(id1, id2, id3).forEach(id -> http.delete(\"/customers/\" + id));\n    }\n\n    private static int createCustomer(String firstName, String lastName) {\n        Map<String, Object> payload = aMapOf(\n                \"firstName\", firstName,\n                \"lastName\", lastName);\n\n        return http.post(\"/customers\", payload, ((header, body) -> {\n            return body.get(\"id\");\n        }));\n    }\n}","commentsType":"inline","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Maven Import","id":"maven-import","type":"Section","content":[{"lang":"xml","snippet":"<dependency>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau-junit4</artifactId>\n    <version>1.41</version>\n</dependency>","type":"Snippet"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Generic Runners","pageTitle":"JUnit 4","pageMeta":{},"dirName":"generic-runners","fileName":"JUnit-4","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"WebTau Runner","id":"webtau-runner"},{"title":"Before/After","id":"beforeafter"},{"title":"BeforeClass/AfterClass","id":"beforeclassafterclass"},{"title":"Maven Import","id":"maven-import"}]}},{"type":"Page","content":[{"title":"WebTau Runner","id":"webtau-runner","type":"Section","content":[{"type":"Paragraph","content":[{"text":"You can use webtau ","type":"SimpleText"},{"code":"http.","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"graphql.","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"browser.","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"cli.","type":"InlinedCode"},{"text":", ","type":"SimpleText"},{"code":"db.","type":"InlinedCode"},{"text":" methods as in a junit 5 tests, but to enable reporting you need to use","type":"SimpleText"},{"type":"SoftLineBreak"},{"code":"@Webtau","type":"InlinedCode"},{"text":" annotation","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"package com.example.tests.junit5\n\nimport org.testingisdocumenting.webtau.junit5.WebTau\nimport org.junit.jupiter.api.*\n\nimport static org.testingisdocumenting.webtau.WebTauGroovyDsl.*\n\n@WebTau\n@TestMethodOrder(MethodOrderer.OrderAnnotation) // forcing methods execution order\n@DisplayName(\"customer CRUD\")\nclass CustomerCrudSeparatedGroovyTest {\n    private static def customerPayload = [firstName: 'FN',\n                                          lastName : 'LN']\n    private static def changedCustomerPayload = [*: customerPayload, lastName: 'NLN']\n\n    private static def id\n\n    @BeforeAll\n    @DisplayName(\"create customer\") // optional friendly name for reporting purposes\n    static void createCustomer() {\n        id = http.post(\"/customers\", customerPayload) {\n            body.id // using body prefix is required in this case as id conflicts with class field name\n        }\n\n        id.shouldNot == 0\n    }\n\n    @Test\n    @Order(1)\n    @DisplayName(\"read customer\")\n    void read() {\n        http.get(\"/customers/$id\") {\n            body.should == customerPayload\n        }\n    }\n\n    @Test\n    @Order(2) // order dependence saves from creating customer on every test\n    @DisplayName(\"update customer\")\n    void update() {\n        http.put(\"/customers/$id\", changedCustomerPayload) {\n            body.should == changedCustomerPayload\n        }\n\n        http.get(\"/customers/$id\") {\n            body.should == changedCustomerPayload\n        }\n    }\n\n    @Test\n    @Order(3) // but you can still run each method independently\n    @DisplayName(\"delete customer\")\n    void delete() {\n        http.delete(\"/customers/$id\") {\n            header.statusCode.should == 204\n        }\n\n        http.get(\"/customers/$id\") {\n            header.statusCode.should == 404\n        }\n\n        id = -1 // marking as deleted to let cleanup step know that no delete is required\n    }\n\n    @AfterAll\n    static void cleanup() { // optional (since we create new ids all the time) step to keep your environment clean\n        if (id == -1) {\n            return\n        }\n\n        http.delete(\"/customers/$id\")\n    }\n}","commentsType":"inline","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"package com.example.tests.junit5;\n\nimport org.testingisdocumenting.webtau.junit5.WebTau;\nimport org.junit.jupiter.api.*;\n\nimport java.util.Map;\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*;\n\n@WebTau\n@TestMethodOrder(MethodOrderer.OrderAnnotation.class) // forcing methods execution order\n@DisplayName(\"customer CRUD\")\npublic class CustomerCrudSeparatedJavaTest {\n    private static final Map<String, ?> customerPayload = aMapOf(\n            \"firstName\", \"FN\",\n            \"lastName\", \"LN\" );\n\n    private static final Map<String, ?> changedCustomerPayload = aMapOf(\n            customerPayload,\n            \"lastName\", \"NLN\");\n\n    private static int id;\n\n    @BeforeAll\n    @DisplayName(\"create customer\") // optional friendly name for reporting purposes\n    static void createCustomer() {\n        id = http.post(\"/customers\", customerPayload, ((header, body) -> {\n            return body.get(\"id\");\n        }));\n\n        actual(id).shouldNot(equal(0));\n    }\n\n    @Test\n    @Order(1)\n    @DisplayName(\"read customer\")\n    void read() {\n        http.get(\"/customers/\" + id, ((header, body) -> {\n            body.should(equal(customerPayload));\n        }));\n    }\n\n    @Test\n    @Order(2) // order dependence saves from creating customer on every test\n    @DisplayName(\"update customer\")\n    void update() {\n        http.put(\"/customers/\" + id, changedCustomerPayload, ((header, body) -> {\n            body.should(equal(changedCustomerPayload));\n        }));\n\n        http.get(\"/customers/\" + id, ((header, body) -> {\n            body.should(equal(changedCustomerPayload));\n        }));\n    }\n\n    @Test\n    @Order(3) // but you can still run each method independently\n    @DisplayName(\"delete customer\")\n    void delete() {\n        http.delete(\"/customers/\" + id, ((header, body) -> {\n            header.statusCode().should(equal(204));\n        }));\n\n        http.get(\"/customers/\" + id, ((header, body) -> {\n            header.statusCode().should(equal(404));\n        }));\n\n        id = -1; // marking as deleted to let cleanup step know that no delete is required\n    }\n\n    @AfterAll\n    static void cleanup() { // optional (since we create new ids all the time) step to keep your environment clean\n        if (id == -1) {\n            return;\n        }\n\n        http.delete(\"/customers/\" + id);\n    }\n}","commentsType":"inline","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"BeforeAll/AfterAll","id":"beforeallafterall","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"@BeforeAll","type":"InlinedCode"},{"text":" and ","type":"SimpleText"},{"code":"@AfterAll","type":"InlinedCode"},{"text":" to prepare and cleanup resources required for multiple test methods.","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"package com.example.tests.junit5\n\nimport org.testingisdocumenting.webtau.junit5.WebTau\nimport org.junit.jupiter.api.AfterAll\nimport org.junit.jupiter.api.BeforeAll\nimport org.junit.jupiter.api.DisplayName\nimport org.junit.jupiter.api.Test\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.http\n\n@WebTau\n@DisplayName(\"customer query\")\nclass CustomerQueryGroovyTest {\n    private static def id1 // keep track of created ids to assert and cleanup later\n    private static def id2\n    private static def id3\n\n    @BeforeAll\n    @DisplayName(\"create customers\")\n    static void createCustomers() {\n        id1 = createCustomer(\"CQ_FN1\", \"CQ_LN1\")\n        id2 = createCustomer(\"CQ_FN1\", \"CQ_LN2\")\n        id3 = createCustomer(\"CQ_FN2\", \"CQ_LN2\")\n    }\n\n    @Test\n    @DisplayName(\"query by first name\")\n    void queryByFirstName() {\n        http.get(\"/customers/search/first-name\", [name: \"CQ_FN1\"]) {\n            body.should == [\"*id\" | \"firstName\" | \"lastName\"] { // star(*) marks key column so assertion is order agnostic\n                           __________________________________\n                             id1  | \"CQ_FN1\"    | \"CQ_LN1\"\n                             id2  | \"CQ_FN1\"    | \"CQ_LN2\" }\n        }\n    }\n\n    @Test\n    @DisplayName(\"query by last name\")\n    void queryByLastName() {\n        http.get(\"/customers/search/last-name\", [name: \"CQ_LN2\"]) {\n            body.should == [\"*id\" | \"firstName\" | \"lastName\"] {\n                           __________________________________\n                             id2  | \"CQ_FN1\"    | \"CQ_LN2\"\n                             id3  | \"CQ_FN2\"    | \"CQ_LN2\" }\n        }\n    }\n\n    @AfterAll\n    @DisplayName(\"clean up\")\n    static void cleanup() {\n        [id1, id2, id3].each { http.delete(\"/customers/$it\") }\n    }\n\n    private static def createCustomer(String firstName, String lastName) {\n        return http.post(\"/customers\", [firstName: firstName, lastName: lastName]) { id }\n    }\n}","commentsType":"inline","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"package com.example.tests.junit5;\n\nimport org.junit.jupiter.api.AfterAll;\nimport org.junit.jupiter.api.BeforeAll;\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Test;\n\nimport java.util.Map;\nimport java.util.stream.Stream;\n\nimport static org.testingisdocumenting.webtau.WebTauDsl.*;\n\n@DisplayName(\"customer query\")\nclass CustomerQueryJavaTest {\n    private static Integer id1; // keep track of created ids to assert and cleanup later\n    private static Integer id2;\n    private static Integer id3;\n\n    @BeforeAll\n    @DisplayName(\"create customers\")\n    static void createCustomers() {\n        id1 = createCustomer(\"CQ_FN1\", \"CQ_LN1\");\n        id2 = createCustomer(\"CQ_FN1\", \"CQ_LN2\");\n        id3 = createCustomer(\"CQ_FN2\", \"CQ_LN2\");\n    }\n\n    @Test\n    @DisplayName(\"query by first name\")\n    void queryByFirstName() {\n        http.get(\"/customers/search/first-name\", http.query(\"name\", \"CQ_FN1\"), (header, body) -> {\n            body.should(equal(table(\"*id\", \"firstName\", \"lastName\", // star(*) marks key column so assertion is order agnostic\n                                   ________________________________,\n                                      id1, \"CQ_FN1\"   , \"CQ_LN1\",\n                                      id2, \"CQ_FN1\"   , \"CQ_LN2\")));\n        });\n    }\n\n    @Test\n    @DisplayName(\"query by last name\")\n    void queryByLastName() {\n        http.get(\"/customers/search/last-name\", http.query(\"name\", \"CQ_LN2\"), (header, body) -> {\n            body.should(equal(table(\"*id\", \"firstName\", \"lastName\",\n                                    ________________________________,\n                                      id2, \"CQ_FN1\"   , \"CQ_LN2\",\n                                      id3, \"CQ_FN2\"   , \"CQ_LN2\")));\n        });\n    }\n\n    @AfterAll\n    @DisplayName(\"clean up\")\n    static void cleanup() {\n        Stream.of(id1, id2, id3).forEach(id -> http.delete(\"/customers/\" + id));\n    }\n\n    private static int createCustomer(String firstName, String lastName) {\n        Map<String, Object> payload = aMapOf(\n                \"firstName\", firstName,\n                \"lastName\", lastName);\n\n        return http.post(\"/customers\", payload, ((header, body) -> {\n            return body.get(\"id\");\n        }));\n    }\n}","commentsType":"inline","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Maven Import","id":"maven-import","type":"Section","content":[{"lang":"xml","snippet":"<dependency>\n    <groupId>org.testingisdocumenting.webtau</groupId>\n    <artifactId>webtau-junit5</artifactId>\n    <version>1.41</version>\n</dependency>","type":"Snippet"}]},{"title":"TestFactory","id":"testfactory","type":"Section","content":[{"type":"Paragraph","content":[{"text":"With the additional annotation ","type":"SimpleText"},{"code":"@TestFactory","type":"InlinedCode"},{"text":" you can use ","type":"SimpleText"},{"code":"TableData","type":"InlinedCode"},{"text":" as an easy-to-read source of","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"similar but independent tests where each row is treated as its own test (comparable to JUnit 4's","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"parameterized tests), optionally with a descriptive label.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Here are examples of parameterized tests with and without labels, and how an IDE uses the label for display purposes:","type":"SimpleText"}]},{"lang":"groovy","snippet":"@TestFactory\ndef \"individual tests use generated display labels\"() {\n    [\"price\" | \"quantity\" | \"outcome\"] {\n    _________________________________\n      10     |  30        |  300\n      -10    |  30        | -300\n    }.test {\n        PriceCalculator.calculate(price, quantity).should == outcome\n    }\n}","title":"Parameterized tests without explicit label","entry":"individual tests use generated display labels","type":"Snippet"},{"lang":"groovy","snippet":"@TestFactory\ndef \"individual tests can use an optional display label to clarify the use case\"() {\n    [\"label\"           | \"price\" | \"quantity\" | \"outcome\"] {\n    ___________________________________________________\n      \"positive price\" | 10      |  30        |  300\n      \"negative price\" | -10     |  30        | -300\n    }.test {\n        PriceCalculator.calculate(price, quantity).should == outcome\n    }\n}","title":"Parameterized tests with explicit label","entry":"individual tests can use an optional display label to clarify the use case","type":"Snippet"},{"imageSrc":"/webtau/img/intellij-parameterized-tests.png","timestamp":1621036321256,"shapes":[],"width":402.0,"height":156.0,"type":"AnnotatedImage"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"Generic Runners","pageTitle":"JUnit 5","pageMeta":{},"dirName":"generic-runners","fileName":"JUnit-5","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"WebTau Runner","id":"webtau-runner"},{"title":"BeforeAll/AfterAll","id":"beforeallafterall"},{"title":"Maven Import","id":"maven-import"},{"title":"TestFactory","id":"testfactory"}]}},{"type":"Page","content":[{"title":"Data Focused Tests","id":"data-focused-tests","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Webtau simplifies writing REST/GraphQL/Browser/DB/CLI tests. On top of that if the logic behind those layers is written in JVM based language,","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"webtau also simplifies testing logic behind those layers directly.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"Webtau makes tests to be focused on input and output by reducing boilerplate.","type":"SimpleText"}]}]},{"title":"Simplified Input Preparation","id":"simplified-input-preparation","type":"Section","content":[{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"@Test\nvoid \"diversified teams should have various levels and time at company\"() {\n    def employeeData = [ \"id\"    | \"level\" | \"monthsAtCompany\"] {\n                       _______________________________________\n                         \"bob\"   |       2 |  12\n                         \"smith\" |       4 |  34\n                         \"john\"  |       3 |  20 }\n\n    def diversified = peopleManagement.diversityLevel(employees(employeeData))\n    diversified.should == true\n}","entry":"diversified teams should have various levels and time at company","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"@Test\npublic void diversifiedTeamsShouldHaveVariousLevelsAndTimeAtCompany() {\n    TableData employeeData = table(     \"id\", \"level\", \"monthsAtCompany\").values(\n                                       \"bob\",       2, 12,\n                                     \"smith\",       4, 34,\n                                      \"john\",       3, 20);\n\n    boolean diversified = peopleManagement.diversityLevel(employees(employeeData));\n    actual(diversified).should(equal(true));\n}","entry":"diversifiedTeamsShouldHaveVariousLevelsAndTimeAtCompany","type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Simplified Output Validation","id":"simplified-output-validation","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Complex data and assertions are first class citizens.","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"@Test\nvoid \"provides access to new joiners\"() {\n    TableData allEmployees = [\"id\"    | \"level\" | \"monthsAtCompany\"] {\n                              ______________________________________\n                              \"alice\" |       5 |  1\n                              \"bob\"   |       3 |  0\n                              \"smith\" |       4 |  1\n                              \"cat\"   |       4 |  0 }\n\n    addEmployees(allEmployees)\n\n    dao.thisWeekJoiners().should == [\"id\"    | \"level\" | \"monthsAtCompany\"] {\n                                     ______________________________________\n                                     \"bob\"   | 3       | 0\n                                     \"cat\"   | 4       | 0  }\n}","entry":"provides access to new joiners","type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"@Test\npublic void providesAccessToNewJoiners() {\n    TableData allEmployees = table(    \"id\", \"level\", \"monthsAtCompany\",\n                                    ____________________________________,\n                                    \"alice\",       5,   1,\n                                      \"bob\",       3,   0,\n                                    \"smith\",       4,   1,\n                                      \"cat\",       4,   0);\n    addEmployees(allEmployees);\n\n    actual(dao.thisWeekJoiners()).should(equal(table(   \"*id\", \"level\", \"monthsAtCompany\",\n                                                        ____________________________________,\n                                                        \"bob\",       3,   0,\n                                                        \"cat\",       4,   0)));\n}","entry":"providesAccessToNewJoiners","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: The examples above assumes ","type":"SimpleText"},{"code":"import static org.testingisdocumenting.webtau.WebTauCore.*","type":"InlinedCode"},{"text":" or ","type":"SimpleText"},{"code":"import static org.testingisdocumenting.webtau.WebTauDsl.*","type":"InlinedCode"},{"text":".","type":"SimpleText"}]}]}],"type":"Tabs"},{"type":"Paragraph","content":[{"text":"For more ","type":"SimpleText"},{"code":"TableData","type":"InlinedCode"},{"text":" features, check ","type":"SimpleText"},{"url":"/webtau/reference/table-data","isFile":false,"type":"Link","content":[{"text":"reference page","type":"SimpleText"}]}]}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"JVM Business Logic","pageTitle":"Data Driven","pageMeta":{},"dirName":"JVM-business-logic","fileName":"data-driven","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Data Focused Tests","id":"data-focused-tests"},{"title":"Simplified Input Preparation","id":"simplified-input-preparation"},{"title":"Simplified Output Validation","id":"simplified-output-validation"}]}},{"type":"Page","content":[{"title":"Living Document","id":"living-document","type":"Section","content":[{"type":"Paragraph","content":[{"text":"In your test you can capture input and output and save it to a file.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"By using documentation systems you can use the captured artifacts to render business friendly documentation of your business logic.","type":"SimpleText"}]},{"type":"Paragraph","content":[{"text":"As system evolves, so do your tests and so does your documentation. Essentially you will have a living document describing your system.","type":"SimpleText"}]}]},{"title":"Capture Input","id":"capture-input","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"doc.capture","type":"InlinedCode"},{"text":" to save a test captured value to a file.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Example below assumes ","type":"SimpleText"},{"code":"core","type":"InlinedCode"},{"text":" static import.","type":"SimpleText"}]},{"lang":"java","snippet":"import static org.testingisdocumenting.webtau.WebTauCore.*;","includeRegexp":"import.*Core","type":"Snippet"},{"lang":"java","snippet":"TableData allEmployees = table(    \"id\", \"level\", \"monthsAtCompany\",\n                               ____________________________________,\n                                \"alice\",       5,   1,\n                                  \"bob\",       3,   0,\n                                \"smith\",       4,   1,\n                                  \"cat\",       4,   0);\naddEmployees(allEmployees);\n\ndoc.capture(\"all-employees\", allEmployees); // capture all employees for documentation purposes","title":"capturing a value","entry":"initEmployees","commentsType":"inline","bodyOnly":true,"type":"Snippet"}]},{"title":"Capture Expected Output","id":"capture-expected-output","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"doc.expected.capture","type":"InlinedCode"},{"text":" to save most recent expected value.","type":"SimpleText"}]},{"lang":"java","snippet":"actual(dao.thisWeekJoiners()).should(equal(table(   \"*id\", \"level\", \"monthsAtCompany\",\n                                                ____________________________________,\n                                                    \"bob\",       3,   0,\n                                                    \"cat\",       4,   0)));\n\ndoc.expected.capture(\"new-joiners\"); // capture expected new joiners for documentation purposes","title":"capturing most recent expected","entry":"validateNewJoiners","commentsType":"inline","bodyOnly":true,"type":"Snippet"}]},{"title":"Znai Example","id":"znai-example","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Since this documentation is rendered using ","type":"SimpleText"},{"url":"https://github.org/testingisdocumenting/znai","isFile":false,"type":"Link","content":[{"text":"Znai","type":"SimpleText"}]},{"text":" here is an example of how to use the captured artifacts.","type":"SimpleText"},{"type":"SoftLineBreak"},{"url":"https://github.org/testingisdocumenting/znai","isFile":false,"type":"Link","content":[{"text":"Znai","type":"SimpleText"}]},{"text":" has ","type":"SimpleText"},{"code":":include-table:","type":"InlinedCode"},{"text":" plugin to render a table giving a json or CSV file.","type":"SimpleText"}]},{"lang":"text","snippet":":include-table: doc-artifacts/all-employees.json\n:include-table: doc-artifacts/new-joiners.json\n","lineNumber":"","type":"Snippet"},{"type":"Paragraph","content":[{"text":"Below is the example of the business logic rendered as documentation.","type":"SimpleText"}]},{"type":"ThematicBreak"},{"type":"Paragraph","content":[{"text":"Our HR system consider all employees that has been in the company less than a month as new joiners.","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"For example, giving employees:","type":"SimpleText"}]},{"table":{"columns":[{"title":"id"},{"title":"level"},{"title":"monthsAtCompany"}],"data":[[[{"type":"Paragraph","content":[{"text":"alice","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"5","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"1","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"bob","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"3","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"0","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"smith","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"4","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"1","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"cat","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"4","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"0","type":"SimpleText"}]}]]]},"type":"Table"},{"type":"Paragraph","content":[{"text":"System will list following employees as new joiners:","type":"SimpleText"}]},{"table":{"columns":[{"title":"id"},{"title":"level"},{"title":"monthsAtCompany"}],"data":[[[{"type":"Paragraph","content":[{"text":"bob","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"3","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"0","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"cat","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"4","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"0","type":"SimpleText"}]}]]]},"type":"Table"}]}],"lastModifiedTime":1621036321256,"tocItem":{"sectionTitle":"JVM Business Logic","pageTitle":"Documentation Artifacts","pageMeta":{},"dirName":"JVM-business-logic","fileName":"documentation-artifacts","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Living Document","id":"living-document"},{"title":"Capture Input","id":"capture-input"},{"title":"Capture Expected Output","id":"capture-expected-output"},{"title":"Znai Example","id":"znai-example"}]}},{"type":"Page","content":[{"title":"Create","id":"create","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use language specific DSL to create ","type":"SimpleText"},{"code":"TableData","type":"InlinedCode"},{"text":" instance:","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"[\"Col A\" | \"Col B\" | \"Col C\"] {\n________________________________\n   \"v1a\" |   \"v1b\" | \"v1c\"\n   \"v2a\" |   \"v2b\" | \"v2c\" }","entry":"createTableWithUnderscore","bodyOnly":true,"type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"table(\"Col A\", \"Col B\", \"Col C\",\n      ________________________________,\n        \"v1a\",   \"v1b\", \"v1c\",\n        \"v2a\",   \"v2b\", \"v2c\")","entry":"createTableDataInOneGo","bodyOnly":true,"removeReturn":true,"removeSemicolon":true,"type":"Snippet"},{"type":"Paragraph","content":[{"text":"Note: The example above assumes ","type":"SimpleText"},{"code":"import static org.testingisdocumenting.webtau.WebTauCore.*","type":"InlinedCode"},{"text":" or ","type":"SimpleText"},{"code":"import static org.testingisdocumenting.webtau.WebTauDsl.*","type":"InlinedCode"},{"text":".","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"Additionally ","type":"SimpleText"},{"code":"WebTauCore","type":"InlinedCode"},{"text":" has header-separating","type":"SimpleText"},{"type":"SoftLineBreak"},{"text":"lines defined using underscores ","type":"SimpleText"},{"code":"___","type":"InlinedCode"},{"text":" of various lengths, which you can optionally use for aesthetics.","type":"SimpleText"}]}]}],"type":"Tabs"},{"type":"Paragraph","content":[{"text":"Using ","type":"SimpleText"},{"code":"____","type":"InlinedCode"},{"text":" underscore is optional and is there for aesthetics only","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"[\"Col A\" | \"Col B\" | \"Col C\"] {\n   \"v1a\" |   \"v1b\" | \"v1c\"\n   \"v2a\" |   \"v2b\" | \"v2c\" }","entry":"createTableWithoutUnderscore","bodyOnly":true,"type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"table(\"Col A\", \"Col B\", \"Col C\").values(\n        \"v1a\",   \"v1b\", \"v1c\",\n        \"v2a\",   \"v2b\", \"v2c\")","entry":"createTableDataSeparateValues","bodyOnly":true,"removeReturn":true,"removeSemicolon":true,"type":"Snippet"}]}],"type":"Tabs"}]},{"title":"Key Columns","id":"key-columns","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"*","type":"InlinedCode"},{"text":" in front of a column to specify it as a key column","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"[\"*id\" | \"Name\" | \"Type\"] {\n___________________________\n \"id1\" | \"N\"    | \"T\"\n \"id2\" | \"N2\"   | \"T2\"\n \"id3\" | \"N\"    | \"T\" }","entry":"createTableWithKeyColumns","bodyOnly":true,"type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"table(\"*id\" , \"Name\" , \"Type\",\n      _______________________,\n      \"id1\" , \"N\"    , \"T\",\n      \"id2\" , \"N2\"   , \"T2\",\n      \"id3\" , \"N\"    , \"T\")","entry":"createTableWithKeyColumns","bodyOnly":true,"removeReturn":true,"removeSemicolon":true,"type":"Snippet"}]}],"type":"Tabs"},{"type":"Paragraph","content":[{"text":"To access a value by key column","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"def found = tableData.find(key(\"id2\"))\nfound.Name.should == \"N2\"","entry":"findByKeyAndValidate","bodyOnly":true,"type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"Record found = tableData.find(key(\"id2\"));\nactual(found.get(\"Name\")).should(equal(\"N2\"));","entry":"findByKeyAndValidate","bodyOnly":true,"type":"Snippet"}]}],"type":"Tabs"},{"type":"Paragraph","content":[{"text":"To change key columns of an existing table","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"tableData.withNewKeyColumns(\"Name\", \"Type\")","entry":"changeKeyColumns","bodyOnly":true,"type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"tableData.withNewKeyColumns(\"Name\", \"Type\")","entry":"changeKeyColumns","bodyOnly":true,"removeReturn":true,"removeSemicolon":true,"type":"Snippet"}]}],"type":"Tabs"},{"type":"Paragraph","content":[{"text":"Note: ","type":"SimpleText"},{"code":"withNewKeyColumns","type":"InlinedCode"},{"text":" creates new table and validates new key column uniqueness","type":"SimpleText"}]}]},{"title":"Permutations","id":"permutations","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"permute(v1, v2)","type":"InlinedCode"},{"text":" to automatically generate multiple rows.","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"[\"Col A\"              | \"Col B\"         | \"Col C\"] {\n___________________________________________________________\n permute(true, false) | \"v1b\"           | permute('a', 'b')\n \"v2a\"                | permute(10, 20) | \"v2c\" }","entry":"createTableDataWithPermute","bodyOnly":true,"type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"table(\"Col A\"              , \"Col B\"         , \"Col C\",\n      ________________________________________________________________,\n       permute(true, false), \"v1b\"           , permute('a', 'b'),\n       \"v2a\"               , permute(10, 20) , \"v2c\")","entry":"createTableDataWithPermute","bodyOnly":true,"removeReturn":true,"removeSemicolon":true,"type":"Snippet"}]}],"type":"Tabs"},{"table":{"columns":[{"title":"Col A"},{"title":"Col B"},{"title":"Col C"}],"data":[[[{"type":"Paragraph","content":[{"text":"true","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v1b","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"a","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v1b","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"a","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"true","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v1b","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"b","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v1b","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"b","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"v2a","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"10","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v2c","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"v2a","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"20","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v2c","type":"SimpleText"}]}]]]},"type":"Table"}]},{"title":"GUID","id":"guid","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"cell.guid","type":"InlinedCode"},{"text":" to automatically generate unique ids.","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"[\"ID\"      | \"Col A\"              | \"Col B\"         | \"Col C\"] {\n________________________________________________________________________\n cell.guid | permute(true, false) | \"v1b\"           | permute('a', 'b')\n cell.guid | \"v2a\"                | permute(10, 20) | \"v2c\" }","entry":"createTableDataWithPermuteAndGuid","bodyOnly":true,"type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"table(\"ID\"      , \"Col A\"              , \"Col B\"         , \"Col C\",\n      ______________________________________________________________________,\n       cell.guid, permute(true, false), \"v1b\"           , permute('a', 'b'),\n       cell.guid, \"v2a\"               , permute(10, 20) , \"v2c\")","entry":"createTableDataWithPermuteAndGuid","bodyOnly":true,"removeReturn":true,"removeSemicolon":true,"type":"Snippet"}]}],"type":"Tabs"},{"table":{"columns":[{"title":"ID"},{"title":"Col A"},{"title":"Col B"},{"title":"Col C"}],"data":[[[{"type":"Paragraph","content":[{"text":"c3bf4807-e918-418b-9733-019d6846590c","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"true","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v1b","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"a","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"798b3873-5942-4396-a4a2-9449d45ce2a5","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v1b","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"a","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"83fea072-6e05-4af8-86d9-7c7bbfb3a738","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"true","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v1b","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"b","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"ded35973-37b4-4c8f-b0d4-1626ac08316c","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"false","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v1b","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"b","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"404122a6-e2ff-4ee0-b4b1-1bcd784ae277","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v2a","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"10","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v2c","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"07063eaf-b740-433c-97af-012240a7389c","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v2a","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"20","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v2c","type":"SimpleText"}]}]]]},"type":"Table"}]},{"title":"Replace","id":"replace","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"table.replace(before, after)","type":"InlinedCode"},{"text":" to replace values in a table.","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"[\"Col A\" | \"Col B\" | \"Col C\"] {\n________________________________\n   \"v1a\" |   \"v1b\" | \"v1c\"\n   \"v2a\" |   \"v2b\" | \"v2c\" }","entry":"createTableWithUnderscore","bodyOnly":true,"type":"Snippet"},{"lang":"groovy","snippet":"tableData.replace(\"v1b\", \"v1b_\")","entry":"replaceValue","bodyOnly":true,"type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"table(\"Col A\", \"Col B\", \"Col C\",\n      ________________________________,\n        \"v1a\",   \"v1b\", \"v1c\",\n        \"v2a\",   \"v2b\", \"v2c\")","entry":"createTableDataInOneGo","bodyOnly":true,"removeReturn":true,"removeSemicolon":true,"type":"Snippet"},{"lang":"java","snippet":"tableData.replace(\"v1b\", \"v1b_\")","entry":"replaceValue","bodyOnly":true,"removeReturn":true,"removeSemicolon":true,"type":"Snippet"}]}],"type":"Tabs"},{"table":{"columns":[{"title":"Col A"},{"title":"Col B"},{"title":"Col C"}],"data":[[[{"type":"Paragraph","content":[{"text":"v1a","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v1b_","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v1c","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"v2a","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v2b","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"v2c","type":"SimpleText"}]}]]]},"type":"Table"}]},{"title":"Cell Above Value Reference","id":"cell-above-value-reference","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"cell.above","type":"InlinedCode"},{"text":" to refer to the previous row value","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"[\"Name\" | \"Start Date\"              | \"Games To Play\" ] {\n ______________________________________________________\n \"John\" | LocalDate.of(2016, 6, 20) | 10\n \"Bob\"  | cell.above                |  8\n \"Mike\" | cell.above                | 14\n\n \"Drew\" | LocalDate.of(2016, 6, 22) | 10\n \"Pete\" | cell.above                | 11\n \"Max\"  | cell.above                |  3 }","entry":"createTableDataWithAboveRef","bodyOnly":true,"type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"table(\"Name\", \"Start Date\"             , \"Games To Play\",\n      __________________________________________________,\n      \"John\", LocalDate.of(2016, 6, 20), 10,\n      \"Bob\" , cell.above               ,  8,\n      \"Mike\", cell.above               , 14,\n\n      \"Drew\", LocalDate.of(2016, 6, 22), 10,\n      \"Pete\", cell.above               , 11,\n      \"Max\" , cell.above               ,  3)","entry":"createTableDataWithAboveRef","bodyOnly":true,"removeReturn":true,"removeSemicolon":true,"type":"Snippet"}]}],"type":"Tabs"},{"table":{"columns":[{"title":"Name"},{"title":"Start Date"},{"title":"Games To Play"}],"data":[[[{"type":"Paragraph","content":[{"text":"John","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"2016-06-20","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"10","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"Bob","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"2016-06-20","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"8","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"Mike","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"2016-06-20","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"14","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"Drew","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"2016-06-22","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"10","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"Pete","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"2016-06-22","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"11","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"Max","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"2016-06-22","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"3","type":"SimpleText"}]}]]]},"type":"Table"}]},{"title":"Cell Above Math","id":"cell-above-math","type":"Section","content":[{"type":"Paragraph","content":[{"text":"Use ","type":"SimpleText"},{"code":"cell.above.plus|minus","type":"InlinedCode"},{"text":" to generate a derived value based on the previous row value","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"[\"Name\" | \"Start Date\"              | \"Games To Play\" ] {\n ______________________________________________________\n \"John\" | LocalDate.of(2016, 6, 20) | 10\n \"Bob\"  | cell.above                | cell.above + 1\n \"Mike\" | cell.above                | cell.above + 1 }","entry":"createTableDataWithAboveRefAndMath","bodyOnly":true,"type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"table(\"Name\", \"Start Date\"             , \"Games To Play\",\n     ________________________________________________________________,\n      \"John\", LocalDate.of(2016, 6, 20), 10,\n      \"Bob\" , cell.above               , cell.above.plus(1),\n      \"Mike\", cell.above               , cell.above.plus(1))","entry":"createTableDataWithAboveRefAndMath","bodyOnly":true,"removeReturn":true,"removeSemicolon":true,"type":"Snippet"}]}],"type":"Tabs"},{"table":{"columns":[{"title":"Name"},{"title":"Start Date"},{"title":"Games To Play"}],"data":[[[{"type":"Paragraph","content":[{"text":"John","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"2016-06-20","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"10","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"Bob","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"2016-06-20","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"11","type":"SimpleText"}]}]],[[{"type":"Paragraph","content":[{"text":"Mike","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"2016-06-20","type":"SimpleText"}]}],[{"type":"Paragraph","content":[{"text":"12","type":"SimpleText"}]}]]]},"type":"Table"},{"type":"Paragraph","content":[{"text":"Extract ","type":"SimpleText"},{"code":"cell.above.operation","type":"InlinedCode"},{"text":" to make your intentions clearer","type":"SimpleText"}]},{"tabsContent":[{"name":"Groovy","content":[{"lang":"groovy","snippet":"def increment = cell.above + 1\n\n[\"Name\" | \"Start Date\"              | \"Games To Play\" ] {\n ______________________________________________________\n \"John\" | LocalDate.of(2016, 6, 20) | 10\n \"Bob\"  | cell.above                | increment\n \"Mike\" | cell.above                | increment }","entry":"createTableDataWithAboveRefAndMathExtracted","bodyOnly":true,"type":"Snippet"}]},{"name":"Java","content":[{"lang":"java","snippet":"TableDataCellValueGenerator<?> increment = cell.above.plus(1)\n\ntable(\"Name\", \"Start Date\"             , \"Games To Play\",\n     ________________________________________________________________,\n      \"John\", LocalDate.of(2016, 6, 20), 10,\n      \"Bob\" , cell.above               , increment,\n      \"Mike\", cell.above               , increment)","entries":["createIncrementExample","createTableDataWithAboveRefAndMathExtracted"],"bodyOnly":true,"removeReturn":true,"removeSemicolon":true,"type":"Snippet"}]}],"type":"Tabs"}]}],"lastModifiedTime":1621036321260,"tocItem":{"sectionTitle":"Reference","pageTitle":"Table Data","pageMeta":{},"dirName":"reference","fileName":"table-data","viewOnRelativePath":null,"pageSectionIdTitles":[{"title":"Create","id":"create"},{"title":"Key Columns","id":"key-columns"},{"title":"Permutations","id":"permutations"},{"title":"GUID","id":"guid"},{"title":"Replace","id":"replace"},{"title":"Cell Above Value Reference","id":"cell-above-value-reference"},{"title":"Cell Above Math","id":"cell-above-math"}]}}]